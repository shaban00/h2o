{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tinymce/themes/silver/theme.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/themes/silver/index.js","webpack:///./frontend/libs/tinymce_extensions.js","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/media/plugin.js","webpack:///./node_modules/tinymce/plugins/media/index.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/noneditable/plugin.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/tinymce/plugins/noneditable/index.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/tinymce/icons/default/index.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./frontend/pages/rich_text_editor.js","webpack:///./node_modules/tinymce/icons/default/icons.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","typeOf","x","Array","isPrototypeOf","constructor","String","isType$1","type","isSimpleType","eq$1","a","isString","isObject","isArray","isNull","isBoolean","isUndefined","undefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","len","noop","noarg","f","compose","fa","fb","args","_i","arguments","compose1","fbc","fab","constant$1","identity$1","tripleEquals","b","curry","fn","initialArgs","restArgs","all","concat","not","die","msg","Error","never","always","global$g","tinymce","util","Tools","resolve","__assign","assign","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","ar","none","NONE","thunk","id","me","fold","_s","isSome","isNone","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","each","exists","forall","filter","toArray","toString","some","constant_a","self","from$1","Optional","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","xs","contains$2","range$2","num","chunk$1","array","size","map$2","each$1","eachr","partition$3","pass","fail","arr","filter$2","foldr","acc","foldl","findUntil","until","find$5","findIndex$1","flatten","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","sort","comparator","copy","get$f","head","last$2","findMap","keys","obj","props","k","map$1","tupleMap","v","tuple","objAcc","internalFilter","onTrue","onFalse","filter$1","mapToArray","find$4","values","get$e","has$2","hasNonNullableKey","is$1","lhs","rhs","left","equals","lift2","cat","sequence","oa","ob","lift3","oc","mapFrom","someIf","addToEnd","str","suffix","removeFromStart","numChars","substring","checkRange","substr","start","removeLeading","prefix","startsWith","ensureTrailing","endsWith","contains$1","blank","replace","trim$1","isNotEmpty","isEmpty","isSupported$1","dom","style","getPropertyValue","fromHtml$2","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom","fromTag","tag","node","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","SugarElement","fromHtml","Function","SimpleResultType","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","name$2","element","nodeName","toLowerCase","nodeType","isType","isElement$2","isText$1","isDocument","isDocumentFragment","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find$3","agent","major","minor","group","Number","nu$d","detect$4","versionRegexes","cleanedAgent","unknown$3","Version","nu","detect","unknown","detectBrowser$1","browsers","userAgentData","brands","uaBrand","lcBrand","brand","_a","info","current","version","parseInt","detect$3","candidates","candidate","search","detectBrowser","detectOs","oses","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","ie","opera","firefox","safari","unknown$2","nu$c","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","Browser","windows","ios","android","linux","osx","solaris","freebsd","chromeos","unknown$1","nu$b","isOS","isWindows","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$2","userAgentDataOpt","deviceType","PlatformDetection","query","matchMedia","matches","platform","navigator","detect$1","compareDocumentPosition","match","documentPositionContainedBy","Node","DOCUMENT_POSITION_CONTAINED_BY","is","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","all$3","base","querySelectorAll","one","querySelector","eq","e1","e2","regularContains","d1","d2","contains","ieContains","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","parentNode","offsetParent","nextSibling","children","child$2","index","cs","firstChild","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","body","isInShadowRoot","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composed","composedPath","shadowRoot","inBody","getBody","rawSet","setAttribute","set$8","setAll$1","attrs","get$d","getAttribute","getOpt","has$1","hasAttribute","remove$7","removeAttribute","internalSet","setProperty","internalRemove","removeProperty","set$7","setAll","css","setOptions","get$c","styles","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","item","isValidValue","remove$6","reflow","offsetWidth","Dimension","getOffset","set","h","parseFloat","getOuter","aggregate","properties","val","isNaN","max","cumulativeInclusions","absoluteMax","api$3","getBoundingClientRect","height","offsetHeight","get$b","getOuter$2","setMax$1","inclusions","absMax","r$1","top","translate","SugarPosition","boxPosition","box","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","api$2","set$6","get$a","getOuter$1","setMax","mkEvent","stop","prevent","kill","fromRawEvent$1","rawEvent","stopPropagation","preventDefault","clientX","clientY","handle","handler","binder","useCapture","wrapped","addEventListener","unbind","bind$2","capture$1","removeEventListener","before$2","marker","parent$1","insertBefore","after$2","sibling","append$2","prepend$1","firstChild$1","appendChild","appendAt","before$1","elements","append$1","empty","textContent","rogue","remove$5","removeChild","unwrap","wrapper","children$1","get$9","_DOC","scrollTo","get$8","_win","bounds$1","width","right","bottom","getBounds$3","scroll","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","walkUp","navigation","frame","view","owner","rest","pathTo","paths","frameElement","owner$3","Navigation","freeze","__proto__","find$2","path","frames","loc","pointed","point","rect","bounds","box$1","xy","w","absolute$2","position","value$3","_opt","_f","mapError","_","onValue","toOptional","isValue","isError","error$1","message","onError","fromOption","opt","err","Result","fold$1","res","stype","serror","svalue","partition$2","results","errors","Value","bind$1","bindError","toResult$1","fromResult$1","SimpleResult","fromResult","toResult","partition","field$2","newKey","presence","prop","customField$1","instantiator","ifField","ifCustom","shallow$1","old","deep","bothObjects","deepMerge","baseMerge","merger","objects","ret","curObject","merge$1","required$2","process","defaultedThunk","fallbackThunk","defaulted$1","fallback","asOption","mergeWithThunk","baseThunk","mergeWith","mergeValues$1","mergeErrors$1","consolidateObj","consolidateArr","partitions","ResultCombine","formatObj","input","JSON","stringify","formatErrors","es","getErrorInfo","join","nu$a","missingRequired","missingKey","missingBranch","branches","branch","unsupportedFields","unsupported","custom","value$2","validator","extract","anyValue$1","requiredAccess","bundle","fallbackAccess","optionAccess","optionDefaultedAccess","extractField","field","av","bundleAsOption","optValue","ov","extractFields","fields","success","fields_1","valueThunk","getDelegate","getSetKeys","objOfOnly","delegate","objOf","fieldNames","extra","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","props_1","setOf$1","validateKeys","keys$1","validatedKeys","validKeys","schema","vk","_desc","processor","getP","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","chooseFrom","ch","vp","choose$2","choice","chosen","arrOfVal","valueOf","setOf","extractValue","label","errs","asRaw","extraction","errInfo","formatError","asRawOrDie$1","choose$1","thunkOf","desc","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredBoolean","requiredFunction","forbid","_v","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","optionObjOfOnly","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedPostMsg","defaultedArrayOf","defaultedObjOf","Cell","initial","generate$7","cases","constructors","adt","acase","count","argLength","branchKeys","allReqd","reqKey","foldArgs","log","params","Adt","generate","bothErrors","firstError","secondError","bothValues","_a$2","partition$1","exclude$1","wrap$2","wrapAll$1","keyvalues","kv","exclude","wrap$1","wrapAll","mergeValues","mergeErrors","consolidate","objs","ensureIsRoot","isRoot","ancestor$2","transform","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","parts","all$2","handlers","any","read$2","fuse$1","constant","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","dispatchEvent","derive$2","configs","predicate","run$1","runActionExtra","action","runOnName","runOnSourceName","redirectToUid","uid","getByUid","redirectee","redirectToPart","detail","partName","partUids","runWithTarget","ev","getByDom","closest","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","fromHtml$1","get$7","set$5","content","docDom","fragment","createDocumentFragment","contentElements","container","clone","cloneNode","clone$1","original","isDeep","shallow","getHtml","isRecursive","originator","events$i","warn","DefaultEvents","events","unique","generate$6","date","Date","time","getTime","random","floor","prefix$1","idAttr$1","idAttr","write","writeOnly","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","markAsBehaviourApi","apiName","apiFunction","endIndex","openBracketIndex","parameters","split","toFunctionAnnotation","cleanParameters","markAsExtraApi","extraName","markAsSketchApi","premadeTag","premade$1","comp","getPremade","spec","makeApi","getApis","NoState","init","nu$8","readState","generateFrom$1","validated","behaviours","list","optBlobThunk","output","blob","config","state","getBehaviours$3","bData","getData$2","byInnerKey","indexKey","chain","nu$7","classes","attributes","merge","defnA","mod","combine$2","baseMod","modsByBehaviour","behaviour","exhibit","byAspect","modification","combineObjects","combinedClasses","combinedAttributes","combinedStyles","sortKeys","keyName","order","sorted","aKey","bKey","aIndex","bIndex","uncurried","purpose","curried","cHandler","curryArgs","descHandler","extraArgs","getCurried","behaviourTuple","nameToHandlers","groupByEvents","behaviourEvents","combine$1","eventOrder","byEventName","combineGroups","assemble","rawHandler","missingOrderError","eventName","tuples","fuse","sortedTuples","combined","assembled","baseBehaviour","schema$z","toInfo","toDefinition","domChildren","components","toModification","domModification","toEvents","read","attr","add$4","remove$4","supports","classList","get$6","add$3","clazz","remove$3","add$2","add","cleanClass","remove$2","remove","has","add$1","remove$1","hasAll","get$5","set$4","renderToDom","definition","subject","innerHtml","getBehaviours$2","generateFrom","generate$4","getDomDefinition","bList","infoModification","baseModification","getEvents","baseEvents","build$2","getMe","systemApi","bBlob","modDefinition","subcomponents","connect","newApi","disconnect","syncComponents","subs","child","hasConfigured","apis","behaviourName","buildSubcomponents","build$1","buildFromSpec","userSpec","specEvents","completeSpec","external$2","extSpec","uids","isSketchSpec$1","userSpecWithUid","premade","ClosestOrAncestor","ancestor","EventConfiguration","ancestor$1","closest$3","child$1","descendant$1","descend","child_1","closest$2","descendant","closest$1","find$1","queryElem","dependent","dep","manager","ariaId","link","unlink","isAriaPartOf","isPartOf$1","eventConfig","makeEventLogger","initialTarget","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","finishTime","processEvent","status","patterns","NORMAL","noLogger","LOGGING","logger","STOP","getTrace","stack","lines","line","ignoreEvent","monitorEvent","menuFields","itemFields","itemSchema$3","_initSize","itemMarkers","tieredMenuMarkers","markers$1","required","onPresenceHandler","fieldName","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","cata$2","cataVertical","middle","cataHorizontal","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","clamp$1","getRestriction","anchor","restrictions","dir","adjustBounds","bubbleOffset","applyRestriction","pos","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","eastEdgeX$1","westEdgeX$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","west$2","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","chooseChannels","channels","universal","events$h","receiveConfig","channelMap","receivingData","targetChannels","channelInfo","channelSchema","onReceive","ActiveReceiving","ReceivingSchema","executeEvent","bConfig","bState","executor","loadEvent","_simulatedEvent","create$8","active","configSchema","schemaSchema","doCreate","createModes$1","modes","wrapApi","bName","revokeBehaviour","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$7","modeSchema","createModes","branchKey","Receiving","exhibit$6","posConfig","useFixed","ActivePosition","getDocument","focus$3","focus","blur$1","blur","hasFocus","root","activeElement","preserve$1","refocus","focused","oldFocus","newFocus","NuPositionCss","toPx","toOptions","applyPositionCss","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","decisionX","decisionY","decisionWidth","decisionHeight","decisionRight","decisionBottom","reposition","origin","toBox","rel","viewport","getBounds","translate$2","removeScroll","outerScroll","cata$1","onNone","onRelative","onFixed","AttributeValue","relative$1","fixed$1","anchorBox","placementAttribute","setPlacement$1","getPlacement","reset$2","adt$8","fit","nofit","determinePosition","boundsX","boundsY","boundsRight","boundsBottom","xInBounds","yInBounds","originInBounds","rightInBounds","bottomInBounds","sizeInBounds","visibleW","visibleH","calcReposition","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcMaxSizes","upAvailable","downAvailable","maxHeight","westAvailable","eastAvailable","maxWidth","attempt","adjustedBounds","newX","newY","fits","fittedBox","isPartlyVisible","_b","on","classesOn","off","classesOff","layout","testY","attempts","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","next","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","improved","abc","bestNext","singleton","doRevoke","clear","isSet","destroyable","destroy","unbindable","api$1","value$1","capture","fromRawEvent","timerAttr","isTransitioning$1","transition","shouldApplyTransitionCss","lastPlacement","placer","hasChanges","intermediate","round","toFixed","newValue","getTransitionDuration","times","parse","delay","duration","dur","setupTransitionListeners","timer","transitionEnd","transitionCancel","isSourceTransition","pseudoElement","propertyName","transitionDone","clearTimeout","transitionStarted","transitionStart_1","requestAnimationFrame","setTimeout","startTransitioning","timerId","applyTransitionCss","shouldTransition","intermediatePosition_1","intermediateCssOptions","elementSize","options","preference","setClasses","classInfo","setHeight","maxHeightFunction","setWidth","maxWidthFunction","position$2","positionCss","setPlacement","setMaxHeight","anchored","available","expandable$1","defaultOr","dephault","simple","layouts","overrideOptions","go","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$4","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","placement$4","anchorInfo","hotspot","overrides","HotspotAnchor","placement$3","MakeshiftAnchor","adt$7","screen","absolute","toAbsolute","sum","points","sumAsFixed","positions","sumAsAbsolute","absolute$1","hasSameOwner","frameOwner","compOwner","getRootPoint","getBox","calcNewAnchor","optBox","rootPoint","topLeft","layoutsLtr","showAbove","layoutsRtl","placement$2","nodeBox","NodeAnchor","zeroWidth","nbsp","create$6","soffset","finish","foffset","SimRange","adt$6","before","after","cata","onBefore","onOn","onAfter","getStart$1","situ","on$1","after$1","Situ","getStart","adt$5","domRange","exact","exactFromRange","simRange","selection","rng","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","getWin","range$1","SimSelection","range","setStart","setStartBefore","setStartAfter","setFinish","setEndBefore","setEnd","setEndAfter","relativeToNative","finishSitu","createRange","exactToNative","toRect","getFirstRect$1","rects","getClientRects","getBounds$2","adt$4","fromRange","startOffset","endContainer","endOffset","getRanges","doDiagnose","ranges","collapsed","reversed","rev","diagnose","asLtrRange","diagnosis","FocusInsideModes","NodeValue","getOption","nodeValue","api","get$3","getEnd","isTextNodeWithCursorPosition","trim","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","last$1","descendantRtl","descendants","makeRange","same","getNativeSelection","getSelection","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","focus_1","anchorOffset","focusOffset","getExact","sel","getFirstRect","getBounds$1","point$1","descendOnce$1","last","descendOnce","getAnchorSelection","modStart","modFinish","placement$1","selectionBox","optRect","rawRect","targetElement","SelectionAnchor","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","submenuInfo","SubmenuAnchor","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","getFixedOrigin","getRelativeOrigin","place","anchoring","placee","lastPlace","position$1","posState","placementSpec","positionWithin","boxElement","boundsBox","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","doPlace","newState","vis","getMode","pConfig","_pState","reset$1","PositionApis","reset","init$g","PositioningState","Positioning","fireDetaching","fireAttaching","attach$1","detachChildren$1","childComp","replaceChildren","newChildren","deleted","attach","attachWith","insertion","doDetach","detach","detachChildren","attachSystem","guiSystem","attachSystemWith","attachSystemAfter","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","open$1","onOpen","setContent","openWhileCloaked","transaction","cloak","decloak","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","isPartOf","getState$2","store","cssKey","restore","oldValue","_sState","sink","cloakVisibilityAttr","hasPosition","SandboxApis","open","close","getState","events$g","sandboxConfig","sandboxState","ActiveSandbox","SandboxSchema","init$f","contents","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isPart","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","setValue$3","setValue","getValue$3","getValue","getState$1","RepresentApis","events$f","resetOnDom","_se","ActiveRepresenting","memory$1","isNotSet","manual","dataset","dataByValue","dataByText","lookup","itemString","update","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","init$e","RepresentState","memory","setValue$2","onSetValue","getValue$2","getDataKey","getFallbackEntry","onLoad$4","initialValue","onUnload$1","DatasetStore","getValue$1","_repState","setValue$1","onLoad$3","ManualStore","onLoad$2","initVal","MemoryStore","RepresentSchema","Representing","setValueFrom","source","forbidden","get$2","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","subPlaceholder","compSpec","placeholders","newSpec","scan","uiType","substitute","req","childSpecs","substituted","valuesThunk","preprocessor","preprocess","substituteAll","oneReplace","replacements","used","substitutePlaces","ps","ph","single$2","placeholder","adt$2","external","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","asCommon","convert","adtConstructor","partSchema","external$1","PartType","combine","partSpec","partValidated","defaults","internals","externals","pname","factory","_partSpec","_partValidated","units","u","generate$3","np","g","doGenerateOne","generateOne$1","schemas","names","substitutes","components$1","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generateOne","partSchemas","partUidsSchemas","asRawOrDie","baseS","single$1","specWithUid","supplyUid","composite$1","partUidsSchema","hasUid","isSketchSpec","singleSchema","compositeSchema","rawConfig","configFields","extraApis","composite","partFields","inside","getCurrent","composeConfig","_composeState","find","ComposeApis","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable$1","enable$1","hasNative","useNative","nativeIsDisabled","nativeDisable","nativeEnable","ariaIsDisabled","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","set$3","DisableApis","enable","disable","exhibit$5","events$e","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","dehighlightAll","dehighlight","isHighlighted","highlight","onHighlight","highlightFirst","getFirst","firstComp","highlightLast","getLast","lastComp","highlightAt","getByIndex","highlightBy","getCandidates","targetComp","queryTarget","getHighlighted","_hState","itemClass","getDelta$2","selected","dest","getPrevious","getNext","HighlightApis","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","shiftKey","isControl","ctrlKey","isNotShift","rule","classification","choose","transitions","reportFocusShifting","prevFocus","noChange","dom$2","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","rules","onFocusHandler","focusInside","OnFocusMode","focusIn","tryGoInsideComponent","isEnterOrSpace","OnEnterOrSpaceMode","keyboardEvents","create$5","cyclicField","tabbingConfig","visibilitySelector","findInitial","tabstops","visibles","firstTabstop","findCurrent","focusManager","isTabstop","useTabstopAt","_tabbingState","goFromTabstop","stopIndex","cycle","cyclic","tabstop","optStopIndex","goBackwards","navigate","goForwards","execute","onEnter","exit","onEscape","AcyclicType","CyclicType","doDefaultExecute","defaultExecute","isComplex","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","getKeydownRules$5","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","getKeyupRules$5","ExecutionType","flatgrid$1","dimensions","setGridSize","numRows","numColumns","getNumRows","getNumColumns","init$d","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locate","locateVisible","visible","findIndex","withGrid","numCols","oldRow","oldColumn","address","newIndex","row","column","cycleHorizontal$1","onLastRow","colsInRow","newColumn","cycleVertical$1","newRow","newCol","cycleRight$1","cycleLeft$1","cycleUp$1","cycleDown$1","schema$u","focusIn$3","gridConfig","_gridState","first","findCurrent$1","execute$3","doMove$2","gridState","identified","handleTab","captureTab","doEscape$1","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","getKeyupRules$4","FlatgridType","horizontal","isDisabledButton","tryCycle","schema$t","flowConfig","execute$2","focusIn$2","_state","getInitial","moveLeft$2","moveRight$2","doMove$1","flowState","executeOnMove","doEscape","getKeydownRules$3","_flowState","westMovers","allowVertical","eastMovers","getKeyupRules$3","FlowType","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","cycleRight","cycleLeft","cycleUp","cycleDown","moveLeft$1","moveRight$1","moveUp$1","moveDown$1","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","execute$1","toMatrix","rows","doMove","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","fireShiftTab","menuState","moveOnTab","fireTab","getKeydownRules$1","getKeyupRules$1","MenuType","schema$q","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","SpecialType","acyclic","flow","execution","menu","special","KeyboardBranches","isFlatgridState","keyState","Keying","keyConfig","sendFocusIn","set$2","replaceConfig","replaceState","insert","childSpec","append","appendee","prepend","prependee","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","replaceBy","replaceePred","ReplaceApis","Replacing","events$d","eventHandlers","focus$2","focusConfig","ignore","onFocus","isFocused","FocusApis","exhibit$4","tabindex","events$c","stopMousedown","ActiveFocus","FocusSchema","Focusing","SetupBehaviourCellState","initialState","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","toggleClass","toggle$2","set$1","isOn","ToggleApis","toggle","exhibit$3","events$b","load","toggleOnExecute","ActiveToggle","updatePressed","syncWithExpanded","updateExpanded","updateSelected","updateChecked","ToggleSchema","pressed","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","executeHandler","hoverEvent","focusEvent","onHover","onFocus$1","hover","focus$1","builder$2","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$p","builder$1","schema$o","owner$2","parts$h","builder","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","schema$n","itemSchema$2","separator","configureGrid","movementInfo","markers","configureMatrix","rowSelector","configureMenu","parts$g","itemInfo","unit","fakeFocus","schema$m","grid","make$7","_spec","_externals","menuBehaviours","selectedItem","role","Menu","transpose$1","trace","byItem","byMenu","triggerItem","triggerMenu","generate$2","menus","expansions","menuItems","menuPaths","_triggerItem","init$c","primary","directory","isClear","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","getTriggeringItem","menuValue","getTriggerData","getItemByValue","getPreparedMenu","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggeringPath","itemValue","extraPath","lookupItem","revPath","triggers","menuIndex","expand","collapse","refresh","lookupMenu","extractPreparedMenu","otherMenus","menuValues","getPrimary","getMenus","prep","LayeredState","make$6","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","buildMenus","primaryName","makeSketch","nbMenu","layeredState","setup","componentMap","toDirectory","getItemValue","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","getSubmenuParents","parentItems","itemComp","updateAriaExpansions","updateMenuPath","latestMenuName","menuPrep","activeMenu","buildIfRequired","expandRight","HighlightSubmenu","activeMenuPrep","onOpenSubmenu","collapseLeft","onCollapseMenu","updateView","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","HighlightParent","getActiveItem","collapseMenuApi","currentItem","highlightPrimary","extractMenuFromContainer","repositionMenus","maybeActivePrimary","allMenus","preparedMenus","primaryMenu","onRepositionMenu","collapseMenu","tmenuBehaviours","_keyInfo","selectedMenu","collapseItem$1","tieredData","singleData","collapseItem","tieredMenu","tmenu","makeMenu","menuSandbox","menuSpec","lazySink","isFirstTierSubmenu","triggeringPaths","getSubmenuLayouts","submenuTriggers","st","submenuLayouts","factory$m","isPartOfRelated","related","getRelated","thing","showAt","showWithin","showWithinBounds","showMenuAt","showMenuWithinBounds","hide","getContent","inlineBehaviours","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","InlineView","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip$2","global$f","factory$l","lookupAttr","getModAttributes","roleAttrs","buttonBehaviours","Button","record","anyInSystem","asSpec","global$e","rtlTransform","defaultIconName","defaultIcon","icons","getIconName","lcName","rtlName","lookupIcon","get$1","iconProvider","fallbackIcon","needsRtlTransform","iconName","addFocusableBehaviour","svg","renderIcon$2","rtlIconClasses","iconHtml","render$3","renderFirst","iconNames","notificationIconMap","warning","factory$k","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","icon","level","memButton","onAction","notificationIconSpec","notificationBodySpec","closeButton","Notification","NotificationManagerImpl","editor","extras","uiMothership","sharedBackstage","backstage","shared","getLayoutDirection","notifications","notification","moveRel","getEl","settings","closeCallback","hideCloseButton","timeout","notificationWrapper","progressBar","providers","getSink","header","isPositionedAtTop","contentArea","getContentAreaContainer","win$1","moveTo","notificationSpec","anchorOverrides","layoutDirection_1","nodeAnchor","anchors","nuText","getArgs","ItemResponse","rate","cancel","throttle","global$d","isBoundary","isBlock","getContentEditable","repeatLeft","rootNode","backwards","autocompleteSelector","create$4","getNode","getDoc","extractContents","insertNode","elm","normalize","setCursorLocation","isValidTextRange","getText","isWhitespace","chr","stripTriggerChar","triggerCh","findChar","char","charAt","findStart","initRange","minChars","findTriggerChIndex","getParent","getRoot","cloneRange","triggerCharIndex","lastIndexOf","triggerChar","getContext","createRng","selectNode","setup$e","onKeypress","redirectKeyToItem","getItem","getView","isActive","cancelIfNecessary","isMenuOpen","stopImmediatePropagation","isProcessingAction","AutocompleterEditorEvents","global$c","isText","isElement$1","toLast","toLeaf","isPreviousCharContent","isStartOfWord","getTriggerContext","database","triggerChars","lookup$2","getDatabase","getRng","context","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetchResult","fetch","maxResults","then","matchText","columns","highlightOn","separatorMenuItemSchema","createSeparatorMenuItem","autocompleterItemSchema","autocompleterSchema","createSeparatorItem","createAutocompleterItem","createAutocompleter","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","createContextForm","contextToolbarSchema","createContextToolbar","stringArray","register$b","popups","ui","registry","getAll","popup","datasetValues","dv","ToolbarMode","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","groupHeadingClass","iconClass","textClass","accessoryClass","caretClass","checkmarkClass","activeClass","containerClass","containerColumnClass","containerRowClass","containerAlignRightClass","containerAlignLeftClass","containerValignTopClass","containerValignMiddleClass","containerValignBottomClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","chunk","rowDom","chunks","forSwatch","forToolbar","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","forHorizontalCollection","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","createCardMenuItem","choiceMenuItemSchema","createChoiceMenuItem","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","createFancyMenuItem","menuItemSchema","createMenuItem","nestedMenuItemSchema","createNestedMenuItem","toggleMenuItemSchema","createToggleMenuItem","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","namedEvents","unnamedEvents","SimpleBehaviours","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","setComponents","tState","specs","getTooltip","tooltip","TooltippingApis","events$9","tooltipConfig","clearTooltip","clearTimer","show","isShowing","tooltipDom","tooltipComponents","setTooltip","resetTimer","ActiveTooltipping","TooltippingSchema","init$b","TooltippingState","Tooltipping","escape","global$b","global$a","getSkinUrl","skin","getParam","skinUrl","skinName","documentBaseURI","baseURL","isReadOnly","isSkinDisabled","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","getUserStyleFormats","isMergeStyleFormats","getLineHeightFormats","getContentLanguages","getRemovedMenuItems","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","_a$1","getToolbarGroups","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerSelector","fixedToolbarContainerTarget","isToolbarPersist","fixedContainerTarget","inline","useFixedContainer","getUiContainer","fixedContainer","isDistractionFree","isStickyToolbar","getStickyToolbarOffset","isDraggableModal$1","getMenubar","getToolbar","getFilePickerCallback","getFilePickerTypes","getFileBrowserCallbackTypes","noTypeaheadUrls","getAnchorTop","getAnchorBottom","getFilePickerValidatorHandler","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","setupReadonlyModeSwitch","setMode","receivingConfig","button","splitButton","toolbarButton","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$9","convertText","mac","alt","ctrl","access","other","shortcut","updated","segment","renderIcon$1","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderSubmenuCaret","renderDownwardsCaret","renderContainer","directionClass","alignClass","align","getValignClass","valign","renderImage","src","renderColorStructure","providerBackstage","colorPickerCommand","removeColorCommand","itemText","ariaLabel","iconSvg","iconContent","getDom","common","title","baseDom","renderItemDomStructure","domTitle","renderNormalItemStructure","providersBackstage","renderIcons","iconSpec","renderIcon","renderEmptyIcon","leftIcon","checkmark","checkMark","textRender","htmlContent","menuItem","shortcutContent","caret","renderItemStructure","tooltipBehaviour","tooltipWorker","_tooltip","encodeText","encode","replaceText","translated","encoded","escapedMatchRegex","RegExp","renderAutocompleteItem","useText","onItemValueHandler","_api","render$2","shouldHighlight","cardText","renderCardMenuItem","setDisabled","renderChoiceItem","isSelected","setActive","parts$f","hexColour","shorthandRegex","longformRegex","isHexString","hex","normalizeHex","toUpperCase","fromString$1","getLongForm","hexString","extractValues","longForm","splitForm","exec","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireSkinLoaded$1","fire","fireSkinLoadError$1","fireResizeEditor","fireResizeContent","fireScrollContent","fireTextColorChange","hsvColour","fromRgb","minRGB","maxRGB","hexToHsv","hsvToHex","anyToHex","canvas","canvasContext","clearRect","fillStyle","fillRect","getImageData","global$8","storageName","ColorCache","storageString","localstorage","prune","diff","cache","unshift","pop","setItem","idx","FocusMode","choiceItem","defaultColors","colorCache","mapColors","colorMap","colors","getColorCols$2","defaultCols","hasCustomColors$1","getColorMap","getColors$2","unmapped","getCurrentColors","addColor","fallbackColor","getCurrentColor","format","getParents","applyFormat","undoManager","transact","formatter","nodeChanged","removeFormat","registerCommands","addCommand","calcCols","sqrt","getColorCols$1","getAdditionalColors","hasCustom","applyColor","onChoice","dialog","colorPickerDialog","colorOpt","execCommand","getColors$1","getFetch$1","callback","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","addSplitButton","select","optCurrentRgb","currentRgb","currentHex","_splitButtonApi","onItemAction","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","onSubmit","getData","colorpicker","windowManager","alert","details","initialData","buttons","onCancel","register$a","lastForeColor","lastBackColor","createPartialChoiceMenu","presetItemTypes","alloyItems","createChoiceItems","itemPresets","deriveMenuMovement","menuMarkers","rowClass","deriveCollectionMovement","renderColorSwatchItem","getColorItems","colorinput","getColorCols","widgetSpec","useCustomColors","initData","allowCustomColors","hasCustomColors","getColors","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","emitCellOver","se","makeCells","cells","selectCells","selectedRow","selectedColumn","makeComponents","cellRow","makeLabelText","renderInsertTableMenuItem","sizeLabelId","emptyLabelText","memLabel","fancyMenuItems","renderFancyMenuItem","render","renderNestedItem","downwardsCaret","renderNormalItem","renderSeparatorItem","renderToggleMenuItem","autocomplete","separator$3","nested","toggle$1","fancy","card","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createAutocompleteItems","createPartialMenu","itemHasIcon","createItem","createPartial","createTieredDataFrom","partialMenu","createMenuFrom","focusMode","ContentFocus","register$9","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","getCombinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","commenceIfNecessary","matchLength","display","ld","doLookup","newContext","lookupInfo","combinedItems","autocompleterUiApi","hasPlugin","Autocompleter","register","DelayedFunction","fun","ref","schedule","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","touches","isFarEnough","touch","distX","distY","monitor","startData","longpressFired","longpress$1","handleTouchstart","handleTouchmove","handleTouchend","isSame","fireIfReady","isDangerous","keyEv","bindFocus","bindBlur","setup$d","rawSettings","stopBackspace","tapEvent","simpleEvents","tapStopped","stopped","pasteTimeout","onPaste","onKeydown","onFocusIn","focusoutTimeout","onFocusOut","derive","rawTarget","fromSource","isStopped","isCut","fromExternal","adt$1","resume","complete","doTriggerHandler","eventType","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerHandler","listeners","_logger","listener","triggerUntilStopped","triggerOnUntilStopped","broadcastHandler","EventRegistry","registerId","findHandler","filterByType","isAboveRoot","unregisterId","handlersById","_eventName","Registry","readOrTag","failOnDuplicate","tagId","conflict","unregister","getById","factory$j","domWithoutAttributes","containerBehaviours","Container","takeover","domEvents","_alloyId","broadcast$1","broadcastData","receivers","receiver","renderBar","interpreter","schema$l","parts$e","excludeFactory","factory$i","fieldBehaviours","descriptor","descriptorId","getField","getLabel","FormField","exhibit$2","tabConfig","tabAttr","ActiveTabstopping","TabstopSchema","Tabstopping","global$7","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormField","renderFormFieldDomWith","renderFormFieldDom","renderLabel$2","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","htmlLines","mapItemName","disabledClass","encodeAllRaw","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","schema$k","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","factory$h","Input","exports$1","define","require","global","amd","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","thisArg","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","race","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","Global","promisePolyfill_1","boltExport","HighlightOnOpen","Promise$1","nu$3","baseFn","callbacks","nCallback","isReady","cbs","pure$1","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","nu$2","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","valid","isInvalid","InvalidateApis","events$8","onEvent","validateOnLoad","ActiveInvalidate","InvalidateSchema","Invalidating","validation","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingApis","CouplingSchema","init$a","coupled","CouplingState","Coupling","partType$1","getAnchor","getHotspot","getAnchorOverrides","mapFetch","fetcher","openF","highlightOnOpen","futureData","getLazySink","tdata","HighlightFirst","onOpenSync","processed","_onOpenSync","_highlightOnOpen","togglePopup","showing","matchWidth","useMinWidth","buttonWidth","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$j","parts$d","factory$g","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","Dropdown","exhibit$1","unselectable","events$7","ActiveUnselecting","Unselecting","renderPanelButton","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","colorPicker","valueOpt","colorButton","_field","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","modelDetail","getValueFromEvent","spectrum","SliderParts","_sliderChangeEvent","sliderChangeEvent","isTouchEvent$2","evt","getEventSource","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange$3","setToTLEdgeXY","setToTEdge","setToTEdgeXY","setToTREdgeXY","setToREdge","setToREdgeXY","setToBREdgeXY","setToBEdge","setToBEdgeXY","setToBLEdgeXY","setToLEdge","setToLEdgeXY","reduceBy","increaseBy","capValue","snapValueOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","numSteps","findOffsetOf","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","sliderValue$2","findValueOfOffset$1","setValueFrom$2","sliderVal","setToMin$2","setToMax$2","moveBy$2","handleMovement$2","getValueFromEvent$2","findOffsetOfValue$1","minEdge","maxEdge","minOffset","findPositionOfValue$1","slider","setPositionFromValue$2","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","fireSliderChange$1","sliderValue$1","setValueFrom$1","setToMin$1","setToMax$1","moveBy$1","handleMovement$1","getValueFromEvent$1","findOffsetOfValue","setPositionFromValue$1","getTopEdge","getBottomEdge","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","fireSliderChange","sliderValue","moveBy","isVerticalMovement","handleMovement","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","TwoDModel","SliderSchema","sketch$2","getThumb","changeValue","onChange","resetToMin","resetToMax","fireOnChoose","onChoose","wasDown","onDragStart","onDragEnd","sliderBehaviours","getInitialValue","onInit","Slider","fieldsUpdate","sliderUpdate","paletteUpdate","sliderFactory","getClass","_thumb","owner$1","schema$i","getPartName$1","sketch$1","fSpec","fieldParts","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToHex","hexField","copyRgbToForm","rgb","memPreview","updatePreview","preview","copyHexToRgb","setValueRgb","getValueRgb","onInvalidInput","onValidHex","onValidRgb","isHexInputEvent","onValidInput","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","rgbFormSketcher","paletteFactory","_translate","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","setPaletteHue","setPaletteThumb","_detail","_slider","saturationBrightnessPaletteSketcher","setHue","_apis","setThumb","makeFactory","rgbForm","onInvalidHex","sbPalette","hueSliderToDegrees","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","memPalette","memRgb","updatePalette","_hex","palette","updateFields","updateSlider","updatePaletteThumb","updateState","runUpdates","updates","onPaletteUpdate","oldHue","newHsv","newHex","onSliderUpdate","oldRgb","oldHsv","onFieldsUpdate","colourPickerSketcher","self$1","memento$1","mem","childAt","ComposingConfigs","memento","english","getEnglishText","translate$1","renderColorPicker","colourPickerFactory","memPicker","picker","optRgbForm","optHex","formValues","pattern","global$6","isOldCustomEditor","renderCustomEditor","editorApi","memReplaced","ta","scriptId","scriptUrl","ea","cvalue","ed","global$5","processors","rawProcessors","rawValue","postprocess","withComp","optInitialValue","setter","withElement","domValue","domHtml","RepresentingConfigs","defaultImageFileTypes","filterByExtension","files","allowedImageFileTypes","explode","getSetting","isFileInAllowedTypes","file","renderDropZone","actions","onDrop","transferEvent","handleFiles","dataTransfer","onSelect","memInput","accept","renderField","inputComp","renderGrid","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","isPseudoStop","platformNeedsSandboxing","getDynamicSource","isSandbox","cachedValue","_frameComponent","frameComponent","contentWindow","renderIFrame","sandboxed","sourcing","create$3","resize$3","tCanvas","get2dContext","drawImage","getWidth$1","image","naturalWidth","getHeight$1","naturalHeight","blobToImage","blobUrl","URL","createObjectURL","Image","removeListeners","loaded","dataUriToBlobSync","uri","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlob","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","canvasToDataURL","blobToCanvas","revokeImageUrl","blobToDataUri","reader","FileReader","onloadend","readAsDataURL","revokeObjectURL","create$2","getCanvas","initialType","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","blobToImageResult","clamp","parsedValue","identity","DELTA_INDEX","multiply","matrix1","matrix2","out","adjustContrast","adjustBrightness","adjustColors","adjustR","adjustG","adjustB","colorFilter","ir","applyColorFilter","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","putImageData","convoluteFilter","applyConvoluteFilter","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","scy","innerOffset","wt","pixelsIn","pixelsOut","functionColorFilter","colorFn","filterImpl","applyLookup","complexAdjustableColorFilter","matrixAdjustFn","adjust","basicColorFilter","basicConvolutionFilter","kernel","invert$1","brightness$1","contrast$1","colorize$1","sharpen$1","gamma$1","pow","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","rotate$1","angle","applyRotate","degrees","rad","PI","sin","cos","newWidth","newHeight","rotate","flip$1","axis","applyFlip","crop$1","applyCrop","resize$2","newCanvas","invert","sharpen","gamma","colorize","contrast","flip","crop","resize$1","iconsProvider","renderIconFromPack","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","onToolbarButtonExecute","itemApi","buttonApi","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","memDropdown","displayText","displayIcon","isMenuItemReference","isSeparator$1","isExpandingMenuItem","separator$2","unwrapReferences","realItems","getFromExpandingItem","submenuItems","newMenus","newExpansions","getFromItem","generateValueIfRequired","itemWithValue","newData","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","isMenuFooterButtonSpec","isNormalFooterButtonSpec","renderFooterButton","memButton_1","menuButtonSpec","fixedSpec","renderDialogButton","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","factory$f","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","FormCoupledInputs","formatSize","unitDec","maxDecimal","numText","parseSize","sizeText","numPattern","convertUnit","inInch","noSizeConversion","_input","ratioSizeConversion","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","optCurrent","optOther","value1","value2","undo","redo","zoom","back","swap","transform$1","tempTransform","transformApply","internal","saveState","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","emitTempTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","createSpacer","createApplyButton","makeCropTransform","getRect","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","makeResizeTransform","resizePanelComponents","sizeInput","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","variableFilterPanelComponents","createVariableFilterPanel","filterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","cropPanelUpdate","_anyInSystem","showCrop","resizePanelUpdate","measurements","getMeasurements","sharpenTransform","invertTransform","buttonPanelComponents","getApplyButton","global$4","global$3","global$2","getDocumentSize","scrollWidth","scrollHeight","isTouchEvent$1","changedTouches","updateWithTouchData","DragHelper","_c","eventOverlay","downButton","startX","startY","handleEvents","overlayEvents","sugarDoc","handleElement","getElementById","docSize","screenX","screenY","cursor","drag","deltaX","deltaY","create$1","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaW","deltaH","blockers","getAbsoluteRect","outerRect","relativeRect","getRelativeRect","innerRect","getInnerRect","moveRect","startRect","instance","setInnerRect","createDragHelper","cropContainer","blocker","blockerElm","cropBlocker","handleElm","cropHandle","repaint","handleFocus","handleKeydown","activeHandle","moveAndBlock","keyCode","SPACEBAR","toggleVisibility","elems","updateElementRect","newRect","setRect","setViewPortRect","setClampRect","helper","CropRect","loadImage","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","img","panelW","panelH","bg","cRect","zoomFit","updateSrc","url","aImg","lastViewRect","viewRect","inflate","currentZoom","newZoom","setButtonEnabled","enabled","renderSideBar","updateButtonUndoStates","undoEnabled","redoEnabled","memUndo","memRedo","UndoStack","removed","canUndo","canRedo","Delimiter","makeState","blobState","tempState","undoStack","getBlobState","setBlobState","getTempState","updateTempState","newTempState","createState","destroyTempState","destroyState","destroyStates","states","addBlobState","addTempState","applyTempState","postApply","temp","currentState","getHistoryStates","renderImageTools","historyStates","sideBar","disableUndoRedo","_oImg","unblock","imageResultToBlob","block","editPanel","applyButton","blobManipulate","catch","manipulate","tempManipulate","manipulateApply","currentUrl","renderLabel","backstageShared","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","renderListBox","initialItem","sketchSpec","listBoxWrap","renderPanel","factory$e","initialValues","selectClasses","selectAttributes","selectBehaviours","found","HtmlSelect","renderSelectBox","translatedOptions","chevron","selectWrap","renderTable","renderTh","renderHeader","renderTd","renderTr","renderRows","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","flex","extraClasses2","maximized","renderInput","renderTextarea","events$6","streamConfig","streamState","streams","stream","cancelEvent","ActiveStreaming","_config","setTimer","init$9","StreamingState","setup$c","streamInfo","sInfo","throttler","onStream","stopEvent","StreamingSchema","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","setSelectionToEnd","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","itemDisplay","itemExecute","make$3","navigateList","highlighter","previewing","focusBehaviours$1","responseTime","focusInInput","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeahead","typeaheadBehaviours","schema$g","parts$b","populateFromBrowse","Typeahead","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$1","worker","fromFuture","future","fromPromise","completer","FutureResult","separator$1","toMenuItem","staticMenuItem","toMenuItems","targets","filterLinkTargets","filteredTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","historyTargets","history","joinMenuLists","bothEmpty","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","getHistory","errorId","renderUrlInput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","controlHWrapper","openUrlPicker","componentData","urlData","fieldname","chosenData","renderAlertBanner","iconTooltip","renderCheckbox","repBehaviour","toggleCheckboxHandler","className","memIcons","renderHtmlPanel","make$2","makeIframe","iframeSpec","factories","bar","collection","alertbanner","textarea","iframe","checkbox","dropzone","listbox","selectbox","sizeinput","urlinput","customeditor","htmlpanel","imagetools","table","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","interpretWithoutForm","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","bubbleSize","editableAreaAnchor","standardAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","inlineDialog","ColorInputBackstage","isDraggableModal","DialogBackstage","HeaderBackstage","getDockingMode","setDockingMode","defaultStyleFormats","isNestedFormat","isBlockFormat","isInlineFormat","isSelectorFormat","mapFormats","userFormats","fmt","customFormats","formats","formatName","formatNameWithPrefix","registerCustomFormats","registerFormats","getStyleFormats","registeredUserFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$8","enrichSupported","enrichMenu","submenuSpec","enrichCustom","customSpec","newItem","doEnrich","newItems","getStyleItems","init$8","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","isElement","hasContentEditableState","contentEditable","isContentEditableTrue","isContentEditableFalse","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isAnchor","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","elms","getAnchorTargets","getTargetElements","hasTitle","LinkTargets","STORAGE_KEY","HISTORY_LENGTH","isHttpUrl","isArrayOfUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","setAllHistory","itemsWithoutUrl","isTruthy","makeMap","getPicker","getPickerTypes","optFileTypes","optLegacyTypes","optTypes","_picker","types","getPickerSetting","pickerTypes","entry","getTextSetting","UrlInputBackstage","init$7","contextMenuState","styleselect","isContextMenuOpen","setContextMenuState","setup$b","ship","channel","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","editorManager","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","onDismissPopups","parts$a","partType","schema$f","customListDetail","itemsPart","parts$9","factory$d","_external","setItems","getListContainer","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","shell","listBehaviours","CustomList","schema$e","enhanceGroups","parts$8","factory$c","setGroups","groups","getGroupContainer","toolbarBehaviours","Toolbar","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","isFixed","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isPartiallyVisible","isTopCompletelyVisible","isBottomCompletelyVisible","isVisibleForModes","getPrior","getInitialPos","storePrior","setInitialPos","revertToOriginal","clearInitialPos","offsetBox_1","_left","_top","_right","_bottom","morphToOriginal","getModes","morphToFixed","winBox","top_1","isTop","getMorph","getMorphToOriginal","morphToStatic","setDocked","onUndocked","morphToCoord","method","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","setVisible","refreshInternal","lazyViewport","morph","resetInternal","refresh$4","isDocked$1","setModes","DockingApis","events$5","dockInfo","dockState","onShown","onHidden","ActiveDocking","DockingSchema","init$6","docked","initialBounds","DockingState","Docking","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","scrollFromBehindHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","isDockedMode","updateIframeContentFlow","getOccupiedHeight","parentElem","padding","parentWidth","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","restoreFocus","headerElem","focusedElem","ownerDoc","activeElm","findFocusedElem","rootElm","setup$9","lazyHeader","getIframeBehaviours","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","headerHeight","boxHeight","topBound","StickyHeader","sticky","groupToolbarButtonSchema","createGroupToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","createSplitButton","factory$b","setMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","SilverMenubar","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","shrinker","doStartGrow","wasShrinking","beforeSize","fullSize","startPartialGrow","startCompleteGrow","setStartSize","setExpanded","onStartGrow","refresh$3","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isGrowing","_slideState","isShrinking","isTransitioning","toggleGrow","SlidingApis","events$4","onGrown","ActiveSliding","SlidingSchema","init$5","SlidingState","Sliding","schema$d","getPartName","sSpec","slot","make$1","getSlotNames","getSlot","onSlot","def","onSlots","doShowing","_key","doShow","doHide","hideSlot","hideSlots","hideAllSlots","showSlot","slotBehaviours","slotApis","SlotContainer","sidebarSchema","createSidebar","setup$8","sidebars","queryCommandValue","addToggleButton","handleToggle","makePanels","panelConfigs","bridged","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","setSidebar","sidebar","optSlider","toggleSidebar","optSlotContainer","whichSidebar","sidebarOpen","fixSize","autoSize","renderSidebar","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingApis","BlockingSchema","init$4","BlockingState","Blocking","getAttrs","getBusySpec$1","_root","_behaviours","focusBusyComponent","throbber","toggleEditorTabIndex","tabIndexAttr","dataTabIndexAttr","iframeElement","tabIndex","toggleThrobber","throbberFocus","busyComp","renderThrobber","isFocusEvent","isPasteBinTarget","targetElm","setup$7","lazyThrobber","throbberState","stealFocus","command","setEditorTimeout","generate$1","within","withinWidth","apportion","total","parray","toUnit","fitLast","overflow","overflower","fitAll","tryFit","divide","setGroups$1","storedGroups","bGroups","findFocusedComp","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","availableWidth","overflows","schema$c","schema$b","parts$7","expandable","schema$a","parts$6","toggledClass","toolbarSandbox","bounder","makeSandbox","factory$a","FloatingToolbarButton","schema$9","parts$5","factory$9","tgroupBehaviours","itemSelector","ToolbarGroup","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","factory$8","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","SplitFloatingToolbar","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","factory$7","toolbarToggleEvent","doSetGroups","_button","SplitSlidingToolbar","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","overflowXOffset","moreDrawerData","headerBounds","docElem","docBounds","renderSlidingMoreToolbar","renderToolbar","scrolling","factory$6","getSocket","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","optToolbar","setMenubar","menubar","focusMenubar","partMenubar","toolbarFactory","sliding","floating","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","lazyToolbar","lazyMoreButton","partHeader","partSocket","partSidebar","partThrobber","OuterContainer","grps","grp","renderedToolbars","defaultMenubar","defaultMenus","edit","tools","help","removedMenuItems","itemName","removedMenuItem","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","isNotSeparator","fireSkinLoaded","_skinLoaded","initialized","fireSkinLoadError","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUiCss","loadShadowDomUiSkins","isInShadowRoot$1","shadowDomSkinCss","loadSkin","isInline","contentCSS","onSetupFormatToggle","boundCallback","binding","formatChanged","once","onSetupEvent","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","generateSelectItems","_editor","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","rawFormats","buildBasicStaticDataset","ResizeTypes","delimiter","SemiColon","buildBasicSettingsDataset","settingName","alignMenuItems","getSpec$4","getMatchingValue","_format","updateSelectMenuIcon","alignment","canApply","createAlignSelect","alignSelectMenu","defaultFontsFormats","systemStackFonts","splitFonts","fontFamily","fonts","font","isSystemFontStack","matchesSystemStack","getSpec$3","systemFont","getFirstFont","matchOpt","updateSelectMenuText","createFontSelect","fontSelectMenu","defaultFontsizeFormats","legacyFontSizes","keywordFontSizes","factor","toPt","fontSize","toLegacy","getSpec$2","_loop_1","pt","legacy","Space","createFontsizeSelect","fontsizeSelectMenu","findNearest","getStyles","defaultBlocks","getSpec$1","fallbackFormat","detectedFormat","createFormatSelect","formatSelectMenu","getSpec","getFormatItems","flattenedItems","createStyleSelect","styleSelectMenu","events$3","reflectingConfig","reflectingState","renderComponents","newComponents","rawData","ActiveReflecting","reflectState","ReflectingApis","ReflectingSchema","init$3","ReflectingState","Reflecting","schema$7","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$3","factory$5","openMenu","executeOnButton","buttonEvents","ariaDescriptor","splitDropdownBehaviours","SplitDropdown","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","_d","renderFloatingToolbarButton","identifyButtons","renderCommonToolbarButton","specialisation","toolbarButtonBehaviours","renderToolbarButton","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButton","renderToolbarToggleButtonWith","fetchChoices","renderSplitButton","displayChannel","underlinePath","setIconStroke","buttonComp","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","grouptoolbarbutton","identify","allowToolbarGroups","TopToBottom","styleSelectButton","fontsizeSelectButton","fontSelectButton","formatButton","alignMenuButton","extractFrom","bespokeButtons","fontsizeselect","fontselect","formatselect","removeUnusedDefaults","filteredItemGroups","subItem","convertStringToolbar","strToolbar","groupsStrings","isToolbarGroupSettingArray","createToolbar","toolbarConfig","lookupButton","toolbarItem","prefixes","toolbarGroups","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","setupEvents$1","initialDocEle","lastWindowDimensions","innerWidth","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","elementLoad","render$1","lastToolbarWidth","eTargetNode","targetNode","uiRoot","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","refreshDrawer","iframeContainer","Iframe","parseToInt","re","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeight","baseHeight","minHeight","getHeightWithFallback","getWidth","baseWidth","minWidth","getWidthWithFallback","InlineHeader","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","calcMode","toolbar_1","toolbarHeight","targetBounds","roomAtTop","docHeight","roomAtBottom","winBounds","isRoomAtBottomViewport","setupMode","verticalDir","updateChromeWidth","bodyMargin","updateChromePosition","repositionPopups$1","updateChromeUi","resetDocking","floatContainerComp","updateMode","updateUi","currentMode","newMode","addClass","removeClass","getTargetPosAndBounds","setupEvents","toolbarPersist","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","uiContainer","delayedRender","Inline","showContextToolbarEvent","hideContextToolbarEvent","getFormApi","runOnExecute","formApi","renderContextButton","renderContextToggleButton","mementos","asSpecs","findPrimary","compInSystem","buildInitGroups","commands","renderContextForm","toolbarType","ContextForm","isVerticalOverlap","threshold","getRangeRect","leaf$1","getSelectionBounds","scroll_1","bodyPos","getAnchorElementBounds","getHorizontalBounds","contentAreaBox","viewportBounds","getVerticalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getContextToolbarBounds","toolbarOrMenubarEnabled","bubbleSize$1","bubbleAlignments$1","inset","isEntireElementSelected","preservePosition","currentPosition","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","isOverlapping","isReposition","yBounds","contextbarHeight","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","getAnchorLayout","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","filterByPositionForStartNode","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForAncestorNode","findPosition_1","basePosition","matchStartNode","nodeCandidates","editorCandidates","nodeMatches","editorMatches","matchAncestor","startNode","scopes","ancestorElem","inNodeScope","lookup$1","rootElem","isOutsideRoot","inEditorScope","categorise","forms","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","renderContextToolbar","currentWidth","newContents","oldContents","forwardContents","register$7","registryContextToolbars","lastTrigger","lastContextPosition","canLaunchToolbar","isSameLaunchElement","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","buildContextToolbarGroups","allButtons","buildContextFormGroups","default","anchorLayout","launchContext","launchContextToolbar","toolbarKey","register$6","alignToolbarButtons","cmd","addButton","unsupportedLength","decimalDigits","signedInteger","exponentPart","dot","unsignedDecimalLiteral","float","isUnit","accepted","check","unitRaw","normalise","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","lineHeightSpec","languageSpec","settingsOpt","customCode","code","customValue","ele","codeOpt","lang","register$5","register$4","onSetupOutdentState","queryCommandState","registerButtons$2","register$3","onActionToggleFormat","registerFormatButtons","_idx","name_1","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","addMenuItem","register$2","onSetupUndoRedoState","registerMenuItems$1","registerButtons","register$1","onSetupVisualAidState","hasVisual","registerMenuItems","addToggleMenuItem","registerToolbarButton","setup$6","transpose","dx","dy","isTouchEvent","fromPageXY","pageX","pageY","fromClientXY","transposeContentAreaContainer","containerPos","getPos","getPointAnchor","getSelectionAnchor","getNodeAnchor","getAnchorSpec$1","anchorType","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","isTouchWithinSelection","touch_1","rngRectOpt","rngRect","setupiOSOverrides","originalSelection","selectionReset","setRng","unbindEventListeners","preventMousedown","clearSelectionReset","getAnchorSpec","bubbleYOffset","initAndShow","shouldHighlightImmediately","openiOS_1","patchPipeConfig","shouldNeverUseNative","defaultItems","contextMenus","isContextMenuDisabled","getContextMenu","getAvoidOverlapSelector","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","lastMenuItem","generateContextMenu","selectedElement","sections","allItems","isNativeOverrideKeyEvent","isTriggeredByKeyboard","pointerType","getSelectedElement","getAnchorType","selectorExists","setup$5","hideContextMenu","showContextMenu","initAndShow$2","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","withinRange","coord1","coord2","getDeltas","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","snapsInfo","leftAttr","topAttr","getCoords","snapInfo","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","stopDrag","findMatchingSnap","snaps","sensor","inRange","getSnapPoints","matchSnap","bestSnap","deltas","bestDeltas","currAvg","bestAvg","snapTo$1","snapTo","dragConfig","getTarget","repositionTarget","origin_1","snapPin","DraggingApis","initialAttribute","resetZIndex","zIndex","changeZIndex","zindex","instigate","anyComponent","discard","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","getCurrentCoord","location","clampCoords","coords","absoluteCoord","newCoords","offset$1","calcNewCoord","optSnaps","currentCoord","snapping","onSensor","dragBy","onDrag","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","updateStartState","setStartData","init$2","dragApi","forceDrop","drop","delayDrop","getData$1","getDelta$1","MouseData","getDelta","events$2","stop$1","schema$5","init$1","getDataFrom","TouchData","events$1","blockerSingleton","stopBlocking","schema$4","schema$3","mouse","mouseOrTouch","DraggingBranches","previous","calculateDelta","dragEvent","nuData","DragState","Dragging","dragger","snapWidth","snapOffset","calcSnap","selectorOpt","td","selectorHandle","sensorLeft","sensorTop","sensorWidth","sensorHeight","getSnapsConfig","isSameCell","cellOpt","currentTd","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getTopLeftSnaps","getBottomRightSnap","memBottomRight","getBottomRightSnaps","topLeftSnaps","bottomRightSnaps","bottomRight","showOrHideHandle","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","getSnapConfig","snapTopLeft","snapLastTopLeft","snapBottomRight","snapLastBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden","renderElementPath","getDataPath","newPathElements","_btn","divider","newAcc","updatePath","parents","newPath","parent_1","isDefaultPrevented","isPropagationStopped","getDimensions","resizeType","originalHeight","originalWidth","Both","resize","dim","getResizeType","None","Vertical","keyboardHandler","renderResizeHandler","_target","renderWordCount","replaceCountText","words","characters","currentVal","wordCount","renderStatusbar","renderBranding","linkHtml","getTextComponents","getComponents","resizeHandler","setup$3","lazyOuterContainer","platformClasses","touchPlatformClass","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","isHeaderDocked","resizeUiMothership","makeSinkDefinition","isGridUiContainer","sinkSpec","reactiveWidthSpec","memAnchorBar","lazyAnchorBar","sb","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","getPartToolbar","editorComponents","containerComponents","opacity","border","addQueryStateHandler","getUi","broadcastAll","setEditorSize","parsedHeight","parsedWidth","renderUI","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","describedBy","describedElement","describeElement","describeId","labelledBy","labelledElement","labelElement","schema$2","basic","parts$2","dragBlockClass","getDragBounds","factory$4","dialogComp","showDialog","externalBlocker","hideDialog","blockerDom","getDialogBody","getDialogFooter","setBusy","setIdle","modalEventsId","getFooter","modalBehaviours","ModalDialog","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","createBarFields","itemsField","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputFields","colorInputSchema","colorInputDataProcessor","colorPickerFields","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneFields","dropZoneSchema","dropZoneDataProcessor","createGridFields","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","createDialog","urlDialogButtonSchema","urlDialogSchema","createUrlDialog","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","getDataProcessor","getNamedItems","createDataValidator","namedItems","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","factory$3","tabButtonBehaviours","TabButton","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","factory$2","tabbarBehaviours","selectedClass","tab","Tabbar","factory$1","tabviewBehaviours","Tabview","barPart","tabs","viewPart","tabValue","tabview","tabWithValue","tabData","onChangeTab","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","onDismissTab","getViewItems","showTab","tabKey","getTabIfNotActive","optTab","TabSection","measureHeights","allTabs","tabviewComp","_tab","getMaxHeight","heights","getMaxTabviewHeight","tablist","documentElement$1","tabviewHeight","isTabListBeside","currentTabHeight","dialogTopMargin","dialogBottomMargin","dialogHeight","chromeHeight","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","getTabview","smartTabHeight","extraEvents","maxTabHeightOpt","oldHeight","naiveTabHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","ariaAttributes","renderInlineBody","contentId","renderModalBody","bodySpec","renderIframeBody","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","renderInlineHeader","titleId","renderModalHeader","pTitle","pHandle","draghandle","draggable","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","menuButton","innerAcc","initCommonEvents","fireApiEvent","_event","initUrlDialog","getInstanceApi","withSpec","currentDialog","initDialog","currentDialogInit","cur","onTabChange","newTabName","oldTabName","SilverDialogEvents","makeButton","footerButtons","buttonName","buttonGroups","makeGroup","renderFooter","initSpec","lookupByName","renderInlineFooter","renderModalFooter","getCompByName","form_1","getFormWrapper","footerState","validateData$1","dialogState","getDialogApi","doRedial","menuItemStates","withRoot","valueComp","representedValues","menuItemCurrentState","setData","prevData","instanceApi","mergedData","newInternalData","bodyState","tabSection","dialogInit","getDialogSizeClasses","renderDialog","storagedMenuButtons","objOfCells","dialogSize","modalAccess","getForm","outerForm","renderInlineDialog","dialogLabelId","dialogContentId","memHeader","memBody","memFooter","global$1","getUrlDialogApi","sendMessage","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","isCustomMessage","handleMessage","insertContent","renderUrlDialog","iframeUri","base_uri","href","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","onMessage","iframeEle","iframeWin","postMessage","setup$2","closeDialog","alertDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$1","confirmDialog","memFooterYes","footerNo","footerYesButton","validateData","isAlertOrConfirmDialog","inlineAdditionalBehaviours","isStickyToolbar$1","openInlineDialog","openModalDialog","openModalUrlDialog","internalInitialData","config$1","refreshDocking","dialogUi","inlineDialogComp","confirm","Theme","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","defaultDescription","handleImageUpload","blobInfo","failure","onUploadProgress","FormData","filename","Axios","post","firstInaccessibleImage","images","getElementsByTagName","ii","checkAllyShip","tinymceEditor","handleChange","inaccessible","dirtyWatcher","changeWatcher","imageAltContextForm","isImage","addContextForm","arg","setDirty","installFootnotes","isFootnote","getFootnoteNodePair","refNode","bodyNode","footnoteIntegrity","$","refs","bodies","getFootnoteId","mark","getElementsByClassName","refsById","groupBy","mapValues","bodiesById","orphanedRefs","differenceBy","orphanedBodies","forEach","unset","bodyMark","bodyDom","labelDom","createFragment","labelsDom","labels","parentElement","parentText","space","lastElementChild","footnoteDiv","class","createFootnote","uuid","refHTML","footnote","updateFootnote","bodyContent","getFootnoteData","redundantMark","htmlID","openDialog","currentNode","isEditingNode","nextFootnote","Dialog","getInitConfig","enhanced","semanticStyles","plugins","extend_valid_elements","image_class_list","skin_url","content_style","branding","image_uploadtab","images_upload_handler","images_upload_credentials","image_dimensions","automatic_uploads","contextmenu_never_use_native","paste_auto_cleanup_on_paste","paste_remove_styles","paste_remove_styles_if_webkit","paste_strip_class_attributes","relative_urls","convert_urls","remove_script_host","media_dimensions","extended_valid_elements","v1","v4","byteToHex","bytesToUuid","buf","bth","wasType","isEmpty$1","is$2","isTag","lastChild","shallowAs","mutate","matchNodeName","matchNodeNames","regex","isTextNode","isListNode","isOlUlNode","isOlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isTextBlock","getTextBlockElements","blockElements","isBogusBr","previousSibling","keepBookmarks","isChildOfBody","isChildOf","shouldIndentOnTab","getForcedRootBlock","getForcedRootBlockAttrs","createTextBlock","contentNode","textBlock","hasContentNode","getBlockElements","blockName","tagName","setAttribs","DOM$2","splitList","li","removeAndKeepBookmarks","bookmarks","newBlock","tmpRng","insertAfter","isDescriptionDetail","isDescriptionTerm","outdentDlItem","dl","indentDlItem","dlIndentation","indentation","dlItems","getNormalizedPoint","normalizeRange","outRng","rangeStart","rangeEnd","getParentList","selectionStart","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","listItemsElms","parentLi","getSelectedListItems","getSelectedDlItems","parentTableCell","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","fromElements","fireListEvent","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","createSegments","populateSegments","listAttributes","itemAttributes","normalizeSegment","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList","hasFirstChildList","hasLastChildList","isIndented","cloneItemContent","createEntry","dirty","indentEntry","cloneListProperties","cleanListProperties","closestSiblingEntry","normalizeEntries","matchingEntry","parseItem","itemSelection","selectionState","currentItemEntry","childListEntries","parseList","parser","newDepth","parseLists","initialDepth","sourceList","outdentedComposer","normalizedEntries","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listIndentation","entrySets","entrySet","composedLists","composedList","selectionIndentation","isHandled","bookmark","getBookmark","moveToBookmark","indentListSelection","outdentListSelection","flattenListSelection","DOM$1","createBookmark","setupEndPoint","offsetNode","resolveBookmark","restoreEndPoint","nodeIndex","listToggleActionFromListName","listName","isCustomList","listState","activate","nodeChangeHandler","inList","updateListStyle","setStyle","updateListAttrs","updateListWithDetails","removeStyles","getEndPointNode","getSelectedTextBlocks","textBlocks","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","detailStyle","applyList","listItemName","selectedTextBlocks","listBlock","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList$1","newList","toggleMultipleLists","parentIsList","hasListStyleDetail","allLists","toggleSingleList","toggleList","selectedSubLists","normalizeList","normalizeLists","grep","findNextCaretContainer","isForward","nonEmptyBlocks","getNonEmptyElements","walker","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","mergeLiElements","listNode","ul","nestedLists","mergeIntoEmptyLi","fromLi","toLi","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_2","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","DELETE","updateList","setStyles","setAttrib","parseAlphabeticBase26","chars","charValue","composeAlphabeticBase26","quotient","fromCharCode","isUppercase","isLowercase","isNumeric","deduceListType","parseStartValue","listStyleType","parseDetail","currentList","getAttrib","queryListCommandState","registerDialog","setupTabKey","metaKeyPressed","listProperties","addContextMenu","Plugin","getScripts","getAudioTemplateCallback","getVideoTemplateCallback","hasLiveEmbeds","shouldFilterHtml","getUrlResolver","hasAltSource","hasPoster","hasDimensions","getVideoScriptMatch","trimPx","getEphoxEmbedData","altsource","poster","htmlToData","isEphoxEmbed","allow_conditional_comments","movie","extend","videoScript","guess","mimes","mp3","m4a","wav","mp4","webm","ogg","swf","fileEnd","mime","addPx","setAttributes","updatedAttrs","updateEphoxEmbed","styleMap","serializeStyle","sources","updateHtml","updateAll","hasImage","writer","sourceCount","comment","cdata","imgAttrs","urlPatterns","allowFullscreen","getProtocol","protocolMatches","getUrl","newUrl","matchPattern","getIframeHtml","allowfullscreen","getFlashHtml","getAudioHtml","audioTemplateCallback","altsourcemime","getVideoHtml","videoTemplateCallback","sourcemime","getScriptHtml","dataToHtml","dataIn","embed","convertURL","isMediaElement","selectedNode","hasClass","objectType","unescape","embedPromise","rej","wrappedResolve","defaultPromise","loadedData","getEmbedHtml","embedHandler","isCached","extractMeta","sourceInput","mainData","metaData","getFromData","getFromMetaData","getNonEmptyValue","getFromValueFirst","getFromMetaFirst","dims","errorMessage","notificationManager","snippetToData","embedSnippet","getEditorData","snippet","serializer","serialize","addEmbedHtml","snippetData","selectPlaceholder","beforeObjects","afterObjects","handleInsert","submitForm","editorData","handleSource","serviceData","handleEmbed","dataFromEmbed","handleUpdate","mediaInput","generalTab","embedTextarea","embedTab","advancedFormItems","advancedTab","showDialog$1","sanitize","blocked","attrName","isLiveEmbedNode","defaultValue","setDimensions","previewNode","useDefaults","defaultWidth","fallbackHeight","defaultHeight","appendNodeContent","newNode","forced_root_block","createPlaceholderNode","placeHolder","shortEnded","retainAttributesAndInnerHtml","transparentSrc","createPreviewNode","previewWrapper","frameborder","sanitizedHtml","shimNode","sourceNode","attribs","ai","attrValue","isPageEmbedWrapper","nodeClass","isWithinEmbedWrapper","placeHolderConverter","nodes","ceFalse","specialElements","getSpecialElements","boolAttrs","getBoolAttrs","addNodeFilter","addAttributeFilter","realElm","innerNode","realElmName","$elm","selectorChangedWithUnbind","getNonEditableClass","getEditableClass","getNonEditableRegExps","nonEditableRegExps","checkClassName","replaceMatchWithSpan","cls","prevChar","findStartTagIndex","tagHtml","convertRegExpsToNonEditable","contentEditableAttrName","editClass","nonEditClass","hasEditClass","hasNonEditClass","hasProPlugin","clipboard","repeat","firePastePreProcess","isWordHtml","wordContent","firePastePostProcess","firePastePlainTextToggle","firePaste","ieFake","shouldBlockDrop","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","getValidate","getAllowHtmlDataUrls","getPasteDataImages","getImagesDataImgFilter","getImagesReuseFilename","getTabSpaces","getAllowedImageFileTypes","internalMimeType","internalMark","unmark","isMarked","internalHtmlMime","isPlainText","toBRs","openContainer","rootTag","rootAttrs","toBlockElements","blocks","tagOpen","tagClose","paragraphs","stitch","isRegExp","domParser","shortEndedElements","getShortEndedElements","ignoreElements","walk","trimHtml","trimSpaces","s1","s2","createIdGenerator","getImageMimeType","ext","lowerExt","mimeOverrides","jpg","jpe","jfi","jif","jfif","pjpeg","pjp","hasOwn","isWordContent","isNumericList","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","txt","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","_listLevel","nodeText","filterStyles","validStyles","styleValue","outputStyles","outputStyle","filterWordContent","retainStyleProperties","spaces","validElements","valid_elements","valid_children","attributesOrder","preProcess$1","preProcess","isRootContent","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","hasEventListeners","pasteHtml$1","paste","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","pasteAsText","isCollapsibleWhitespace","isNewLineChar","isNewline","normalizeWhitespace","tabSpace","normalizedText","pcIsSpace","doPaste","pasteHtml","internalFlag","pasteText","encodedText","getDataTransferItems","mceInternalUrlPrefix","legacyText","contentType","getClipboardContent","clipboardEvent","clipboardData","hasContentType","clipboardContent","mimeType","hasHtmlOrText","parseDataUri","decodeURIComponent","isValidDataUriImage","imgElm","extractFilename","uniqueId","pasteImage","imageItem","blobCache","editorUpload","existingBlobInfo","getByData","useFileName","blobUri","isClipboardEvent","isDataTransferItem","getAsFile","readFilesAsDataUris","onload","allowedExtensions","extension","getImagesFromDataTransfer","kind","pasteImageData","fileResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","registerEventHandlers","pasteBin","pasteFormat","keyboardPastePlainTextState","keyboardPasteEvent","keyboardPastePressed","removePasteBinOnKeyUp","webkit","insertClipboardContent","isKeyBoardPaste","plainTextMode","isDefaultContent","isPlainTextHtml","isAbsoluteUrl$1","getLastRng","isKeyboardPaste","registerEventsAndFilters","isPasteInsert","isWebKitFakeUrl","isDataUri","getPasteBinParent","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isDefault","lastRngCell","gecko","pasteBinClone","copyAndRemove","pasteBinClones","dirtyWrappers","cleanWrapper","isPasteBin","PasteBin","Clipboard","togglePlainTextPaste","hasWorkingClipboardApi","iOS","setHtml5Clipboard","clearData","setClipboardData","markedHtml","contenteditable","offscreenRange","selectNodeContents","isTableSelection","hasSelectedContent","getCaretRangeFromEvent","getCaretRangeFromPoint","isPlainTextFileUrl","plainTextContent","setFocusedRange","draggingInternallyState","dropContent","content_1","plugin","postProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","node_1","decode","removeUnderlineAndFontInAnchor","makeSetupHandler","pastePlainTextToggleHandler","eq$2","none$2","each$2","flatten$1","sort$1","detect$6","detect$5","toFloat","COMMENT","fromDom$1","fromPoint$1","validSectionList","isValidSection","parentName","rowspan","colspan","detailnew","isNew","extended","isLocked","rowdetail","rowdetailnew","elementnew","rowcells","finishRow","finishCol","columnext","colgroup","type$1","isComment","rawParent","prevSibling","children$3","child$3","body$1","getBody$1","ancestors$4","children$2","ancestors$3","clone$2","bindFrom","oot","getRaw$2","copy$2","sourceDom","targetDom","cssText","getAttrValue","getSpan","hasColspan","cellOrCol","hasRowspan","getCssValue","firstLayer","filterFirstLayer","tags","isRootOrUpperTable","cells$1","columns$1","columnGroups","columnGroup","rows$1","fromRowsOrColGroups","getSection","getParentSection","fromTable$1","columnGroups$1","fromPastedRows","addCells","gridRow","existingCells","newCells","setCells","addCell","mutateCell","mapCells","getCell","getCellElement","cellLength","extractGridDetails","cols","cloneRow","cloneCell","LOCKED_COL_ATTR","getLockedColumnsFromTable","lockedColStr","lockedCols","getLockedColumnsFromGrid","lockedArr","_val","getAt","warehouse","findItem","filtered","filterItems","generateColumns","rowData","columnsGroup","tableOpt","lockedColumns","maxRows","maxColumns","rowCount","colgroupRows","currentRow","rowCell","occupiedColumnPosition","occupiedRowPosition","rowPosition","columnPosition","newpos","colgroup$1","colgroups","grid$1","fromTable","justCells","justColumns","hasColumns","getColumnAt","Warehouse","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","isWithin","isRectangular","isRect","detailIsWithin","detailA","detailB","getAnyBox","startCoords","finishCoords","sc","fc","getBox$1","intercepts$1","parentCell","innerCell","isContainedBy","c1","c2","deltaColumn","getWarehouse","intercepts","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","before$4","after$5","before$3","after$4","TagBoundaries","DomUniverse","isEmptyTag","isNonEditable","comparePosition","copyAttributesTo","destination","as","isSpecial","getLanguage","up","down","copyTo","afterAll","appendAll","setText","universe","look","oneAll","unsafeOne","commonElement","ancestors$2","ps1","ps2","ind","pruned1","pruned2","firstpath","secondpath","sharedOne$1","ancestors$1","universe$3","sharedOne","_universe","ancestors","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve$1","sels","lastSelectedSelector","getEdges","firstSelectedSelector","expandTo","shiftSelection","retrieve","retrieveBox","sectionSelector","firstAncestor","lastAncestor","fA","lA","onMultiple","onSingle","none$1","Selections","lazyRoot","selectedSelector","copy$1","cloneChildren","mutate$1","needManualCalc","toNumber","px","getProp","getBoxSizing","calcContentBoxSize","lower","paddingUpper","paddingLower","borderUpper","borderLower","getCalculatedHeight","boxSizing","getCalculatedWidth","getInnerWidth","getInner","getRuntime$1","isValidCell","rowsArr","getBlock","getFallback","decide","inBlock","validInBlock","detailOption","isSingle","deduce","aa","getRuntime","rowInfo","colInfo","rtlEdge","ltrEdge","getTop$1","findPositions","getInnerEdge","getOuterEdge","cellOption","lastLine","negate","optElements","ltr$1","rtl$1","amount","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","isCol$2","getPercentSize","outerGetter","innerGetter","relativeParent","setPixelWidth","setPercentageWidth","getHeightValue","normalizePixelSize","getTotalHeight","getRaw$1","getRawWidth$1","getRawHeight","getPercentageWidth","getPixelWidth$1","getGenericWidth","setGenericWidth","getPixelTableWidth","getPercentTableWidth","isPercentSizing$1","isPixelSizing$1","isNoneSizing$1","percentageBasedSizeRegex","isCol$1","getRawW","getRawH","justCols","isValidColumn","supportsColWidths","backups","getWidthFrom","columnCells","colFilter","getDeduced","deduced","getRawWidths","getPercentageWidths","tableSize","minCellWidth","cellWidth","pixelWidth","getPixelWidths","getHeightFrom","getPixelHeights","getRawHeights","widthLookup","noneSize","zero","getWidths","getCellDelta","singleColumnWidth","setElementWidth","adjustTableWidth","isRelative","percentageSize","getFloatWidth","_delta","pixelSize","newNext","chooseSize","percentMatch","getTableSize","TableSize","statsStruct","minRow","minCol","maxRow","maxCol","allCells","selectedCells","findSelectedStats","house","totalColumns","totalRows","endRow","endCol","seenSelected","fillInGaps","stats","needCell","clean","replica","widthDelta","emptyRows","getTableWidthDelta","colWidths","allColsWidth","selectedColsWidth","extract$1","replicaHouse","replicaStats","unselectedCells","transferableAttributes","createCell","createCol","createColgroup","createRow$1","replace$1","pasteReplace","cloneFormats","oldCell","newCell","first$1","firstText","formatSelector","clonedFormat","cloneAppropriateAttributes","validAttributes","attributeName","attribute","cellOperations","formatsToClone","cloneCss","lastNode","colGap","gap","paste$1","getNodeName","getPixelWidth","getPixelHeight","removePxSuffix","addPxSuffix","removeDataStyle","removeStyleAttribute","getRawWidth","isPercentage$1","isPixel","getSelectionStart","getSelectionEnd","selections","unmergable","hasSpan","hasRowOrColSpan","mergable","ephemera","strSelected","strSelectedSelector","strAttributeSelector","strFirstSelected","strFirstSelectedSelector","strLastSelected","strLastSelectedSelector","attributeSelector","firstSelected","lastSelected","noMenu","generators","pasteRows","getSelectionCellFallback","getSelectionFromSelector","initCell","cellName","getSelectionCellOrCaption","getSelectionCell","getCellsFromSelection","getRowsFromSelection","rowsOpt","extractSelected","serializeElements","getTextContent","registerEvents","multiCellContext","isTable","pasteCells","only","ColumnContext","neighbours","determine","onOnly","calcLeftEdgeDeltas","onMiddle","calcMiddleDeltas","calcRightEdgeDeltas","measures","recalculateWidthForCells","widths","recalculateWidthForColumns","recalculateHeightForCells","matchRowHeight","sumUp","recalculate","recalculateAndApply","newSizes","adjustWidth","resizing","isLastColumn","clampedStep","clampTableDelta","newWidths","resizeTable","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustAndRedistributeWidths$1","_table","resizeBehaviour","sizes","tablePixelWidth","calcRedestributedWidths","pixelDelta","adjustWidthTo","_info","surround","startIndex","clampDeltaHelper","minCellSize","clampNegativeDelta","clampDelta","calcFixedDeltas","clampedDelta","calcRelativeDeltas","ratio","newThis","_prev","resizer","totalWidth","tableWidth","ratio_1","preserveTable","_minCellSize","maxDelta","_totalWidth","_pixelDelta","_isRelative","isResizable","detached","editable","ResizeWire","validateFor","rawAmount","Size","redistributeToPercent","colType","pc","redistributeToPx","newTotalWidth","redistributeEmpty","newWidthType","redistributeValues","_pc","redistribute$1","newType","floats","roundDown","floored","redistributeToW","redistributeToColumns","redistributeToH","getUnit","redistribute","optWidth","optHeight","widthUnit","oldWidths","nuWidths","hUnit","totalHeight","oldHeights","nuHeights","isPercentSizing","isPixelSizing","isNoneSizing","getGridSize","Event","trigger","typeDefs","reqMessage","unsuppMessage","validateStrArr","invalidTypeMessage","incorrect","checkDupes","everything","dupe","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","DragMode","DragSink","DragApi","InDrag","compare","dataOption","NoDrag","Movement","noDragState","inDragState","mutation","throttledDrop","runIfActive","handle$2","namespace","dashNamespace","styles$1","resolve$1","Blocker","layerClass","mdown","mup","mmove","mout","MouseDrag","isEditable$1","assumeEditable","isContentEditable","Mutation","BarMutation","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","resizableRows","resizableColumns","resizableCols","colElmOpt","wire","drawBar","cpOption","cp","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","rowBar","refreshGrid","warhouse","resizableRowBars","resizableRowPositions","_pos","barIndex","resizableColBars","resizableColPositions","bars","isRowBar","isColBar","resizeBarDragging","BarManager","hoverTable","getResizer","_dataRow","_dataCol","currentCol","oldX","startAdjust","findClosestEditableTable","destroy$1","tbl","hideBars","showBars","lazySizing","hdirection","vdirection","beforeResize","afterResize","startDrag","TableResize","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","fireTableSelectionChange","fireTableSelectionClear","fireTableModified","styleModified","structureModified","styleAndStructureModified","defaultTableToolbar","defaultStyles","defaultCellBorderWidths","defaultCellBorderStyles","determineDefaultStyles","isPixelsForced","contentWidth","isResponsiveForced","defaultAttributes","defaultColumnResizingBehaviour","getTableSizingMode","getTableResponseWidth","getTableBorderWidths","getTableBorderStyles","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPercentagesForced","useColumnGroup","getTableHeaderType","validValues","getColumnResizingBehaviour","validModes","givenMode","isPreserveTableColumnResizing","isResizeTableColumnResizing","getCloneElements","cloneElements","hasObjectResizing","objectResizing","getTableBackgroundColorMap","getTableBorderColorMap","cleanupLegacyAttributes","convertToPercentSize","convertToPixelSize","convertToNoneSize","rowElements","enforcePercentage","enforcePixels","enforceNone","syncPixels","computedWidth","createContainer","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","lazyResize","lazyWire","lazyResizingBehaviour","afterCornerResize","isRightEdgeResize","percentW","targetPercentW","sz","rawWire","rawTable","scan$1","toEnd","freefallRtl$2","freefallRtl$1","universe$2","freefallRtl","halve","main","isHeaderCell","isHeaderCells","getRowHeaderType","isHeaderRow","getRowType$1","findCommonCellType","subType","headerCells","findCommonRowType","rowTypes","hasHeader","hasFooter","hasBody","findTableRowHeaderType","rowType","transformCell","substitution","transformRow","fixedCell","sectionCells","newSection","getTableSectionType","TableSection","setIfNot","insert$1","generateSection","sectionName","newRows","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sync","sectionElems","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","columnGroupsSection","clonedCell","getColumn","getRow","findDiff","subgrid","isColRow","toDetails","seen","updateSeen","toGrid","colgroupCols","rowCells","rowDetail","fromWarehouse","toDetailList","findInWarehouse","extractCells","cell$1","lc","postAction","genWrappers","tableSection","newElements","tableSizing","sizing","onPasteByEditor","onMergable","_warehouse","onUnmergable","onCells","onUnlockedCells","isUnlockedTableCell","allUnlocked","onUnlockedMergable","mergeable","onUnlockedUnmergable","merge$2","unmerge","currentCell","currentCellElm","isToReplace","uniqueCells","splitCols","prevCell","splitRows","rowPrevCells","replacement","sub","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","measureHeight","rowLengthA","rowLengthB","generateElements","generator","rowFill","exampleRow","colFill","lockedColFill","colNum","newChild","tailor","fillCols","fillRows","gridWidth","isLastColLocked","modifiedCols","newLockedColumns","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","lockedColumnObj","skippedCol","gridBColIndex","newCellElm","getValidStartAddress","currentStartAddress","gridColLength","adjustedRowAddress","possibleColAddresses","validColAddress","getLockedColumnsWithinBounds","validStartAddress","gridBRows","lockedColumnsWithinBounds","fittedGrid","newLockedColumnsWithinBounds","insertCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","oldCols","oldRows","newLocked","secondDiff","fittedGridB","insertRowAt","example","withinSpan","getElementFor","insertColumnAt","deleteColumnsAt","deleteRowsAt","notInStartRow","notInStartColumn","isDuplicatedCell","rowReplacerPredicate","targetRow","columnHeaders","entireTableIsHeader","_rowIndex","columnReplacePredicate","targetColumn","rowHeaders","_colIndex","determineScope","applyScope","newScope","isInHeader","getScope","oppositeScope","rowScopeGenerator","columnScopeGenerator","replaceIn","genScope","shouldReplace","isTarget","newCell_1","getColumnCells","getRowCells","replaceColumns","indexes","shouldReplaceCell","scopeGenerator","replaceRows","_cell","newGrid","replaceCells","targetCells","uniqueColumns","uniqueCheck","columnExists","currentDetail","isCol","isColgroup","isRow$1","elementToData","toData","nuCell","nuRow","recent","getOrInit","makeNew","replaceOrInit","getScopeAttribute","merging","getScopeProperty","stringAttributes","baseScope_1","scopes_1","isMixed","Generators","blockList","isList$1","isBlock$1","isEmptyTag$1","universe$1","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","findEditableCursorPosition","elementFromGrid","cursorElement","uniqueRows","rowCompilation","rowExists","opInsertRowsBefore","targetIndex","newG","opInsertRowsAfter","opInsertColumnsBefore","extractDetail","opInsertColumnsAfter","opMakeColumnsHeader","initialGrid","columnIndexes","opMakeCellsHeader","opUnmakeColumnsHeader","opUnmakeCellsHeader","makeRowsSection","rowIndexes","opMakeRowsHeader","opMakeRowsBody","opMakeRowsFooter","opEraseColumns","_comparator","_genWrappers","maxColIndex","opEraseRows","maxRowIndex","opMergeCells","opUnmergeCells","unmerge$1","opPasteCells","pasteDetails","gridify","wh","mergedGrid","gridifyRows","opPasteColsBefore","opPasteColsAfter","opPasteRowsBefore","opPasteRowsAfter","opGetColumnsType","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","opGetCellsType","opGetRowsType","minRowRange","maxRowRange","selectedRows","adjustAndRedistributeWidths","firstColumnIsLocked","lastColumnIsLocked","getColumnsWidth","uniqueCols","colWidth","insertColumnsExtractor","checkLocked","eraseColumnsExtractor","pasteColumnsExtractor","headerCellGenerator","bodyCellGenerator","insertRowsBefore","insertRowsAfter","insertColumnsBefore","insertColumnsAfter","eraseColumns","eraseRows","makeColumnsHeader","unmakeColumnsHeader","makeRowsHeader","makeRowsBody","makeRowsFooter","makeCellsHeader","unmakeCellsHeader","mergeCells","unmergeCells","pasteColsBefore","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnsType","getCellsType","getRowsType","TableActions","cellSelection","isTableBody","lastRowGuard","lastColumnGuard","colMutationOp","setSelectionFromAction","firstCell","des","guard","effect","noEvents","deleteRow","deleteColumn","insertRowsBefore$1","insertRowsAfter$1","insertColumnsBefore$1","insertColumnsAfter$1","mergeCells$1","unmergeCells$1","pasteColsBefore$1","pasteColsAfter$1","pasteRowsBefore$1","pasteRowsAfter$1","pasteCells$1","makeCellsHeader$1","unmakeCellsHeader$1","makeColumnsHeader$1","unmakeColumnsHeader$1","makeRowsHeader$1","makeRowsBody$1","makeRowsFooter$1","getTableCellType","getTableColType","getTableRowType","DefaultRenderOptions","colGroups","tableHeaderCell","tableCell","tableColumn","createRow","createGroupRow","createRows","headerType","renderOpts","rowHeadersGoInThead","actualRowHeaders","thead","theadRowHeaders","theadRows","tbody","numRowHeaders","tbodyRows","placeCaretInCell","selectFirstCellInTable","tableElm","fireEvents","isPercentage","colHeaders","addVisual","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","selectionTargets","setClipboardRows","setRows","getClipboardRows","getRows","setClipboardCols","setColumns","getClipboardCols","getColumns","constrainSpan","currentColspan","generateColGroup","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateRows","cellsToCopy","copiedCells","fakeTR","copyCols","fakeColGroups","fakeRows","copyRows","slicedGrid","filteredGrid","slicedDetails","getTDTHOverallStyle","firstChildStyle","checkChildren","currentStyle","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","verticalAlignValues","onSetupToggle","formatValue","checkNode","isListGroup","buildListItems","buildMenuItems","applyTableCellStyle","filterNoneItem","generateMenuItemsCallback","buildColorMenu","colorList","changeRowHeader","currentType","changeColumnHeader","getClassList$1","getItems$2","getAdvancedTab","dialogName","emptyBorderStyle","advTabItems","borderWidth","modifiers","testTruthy","setFormat","DomModifier","ifTruthy","rgbToHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemKey","comparisonValue","getAlignment","matchNode","getHAlignment","getVAlignment","extractDataFromSettings","hasAdvTableTab","extractAdvancedStyleData","defaultData","cellspacing","cellpadding","caption","getBorder","advStyle","getCellPaddingCellSpacing","spacing","getRowType","extractDataFromTableElement","optBorderWidth","extractDataFromRowElement","extractDataFromCellElement","colElm","celltype","halign","getSelectedCells","cellA","cellB","updateSimpleProps$1","modifier","colModifier","updateAdvancedProps$1","applyStyleData$1","isSingleCell","cellElm","applyStructureData$1","no_events","applyCellData","oldData","modifiedData","onSubmitCellForm","cellsData","open$2","dialogTabPanel","dialogPanel","getClassList","formChildren","getItems$1","updateSimpleProps","updateAdvancedProps","applyStyleData","isSingleRow","rowElm","applyStructureData","applyRowData","typeModified_1","styleModified_1","onSubmitRowForm","rowsData","insertNewTable","rowColCountItems","alwaysItems","appearanceItems","alignmentItem","classListItem","styleTDTH","applyDataToElement","onSubmitTableForm","captionElm","captionModified","generalPanel","nonAdvancedForm","advancedForm","getSelectionStartCellOrCaption","getSelectionStartCell","eraseTable","cellOrCaption","setSizingMode","isForcedSizing","getTableFromCell","performActionOnSelection","toggleTableClass","toggleTableCellClass","allHaveClass","formatterAction","toggleCaption","postExecute","actOnSelection","copyRowSelection","copyColSelection","pasteOnSelection","clonedRows","actOnType","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutCol","mceTableCutRow","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","mceTableCellToggleClass","mceTableToggleClass","mceTableToggleCaption","mceTableSizingMode","mceTableCellType","mceTableColType","mceTableRowType","func","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","registerQueryCommands","lookupOnSelection","clearRows","clearColumns","genericBase","remove_similar","inherit","cellBase","cellFormats","tablecellbackgroundcolor","backgroundColor","tablecellverticalalign","tablecellbordercolor","borderColor","tablecellclass","tableclass","tablecellborderstyle","borderStyle","tablecellborderwidth","CellLocation","isEligible","forwards","after$3","selectNodeContentsUsing","searchForPoint","rectForOffset","curDeltaX","inRect","locateOffset","textnode","rangeForOffset","locate$1","foundRect","searchInChildren","locateNode","boundedX","boundedY","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","beforeSpecial","preprocessRelative","preprocessExact","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","setToElement","selectNodeContents$1","rngGetter","getAtPoint","forward","go$1","backward","getCellFirstCursorPosition","rootElements","handle$1","body_1","isRoot_1","Response","Situs","convertToRange","makeSitus","selectRange","cellSel","annotations","updateSelection","newSels","clearBeforeUpdate","traverse","backtrack","_direction","sidestep","advance","successors","ruleOpt","succ","left$1","right$1","Walkers","hone","isLeaf","seekLeft$1","seekRight$1","seekLeft","seekRight","failedUp","failedDown","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","afterCell","beforeCell","_sharedRow","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","analysis","_message","getTop","getBottom","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","JUMP_SIZE","NUM_RETRIES","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","findSpot","brNeighbour","fromSitus","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","inSameTable","simulate","precheck","firstUpCheck","lastOffset","lastDownCheck","findCell","MouseSelection","clearstate","applySelection","singleCell","isNonEditableCell","isCellClosestContentEditable","selectContents","isKey","keycode","isUp","isDown","isNavigation","isBackward","by","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","getScrollY","rc","keyboard","clearToNavigate","realEvent","update$1","removeClasses","byClass","addSelectionClass","removeSelectionClasses","byAttr","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","getUpOrLeftCells","upGrid","upDetails","slicedCells","getDownOrRightCells","downGrid","downDetails","getOtherCells","hasInternalTarget","CellSelection","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","wrappedEvent","isLeftMouse","isLeftButtonPressed","dragStart","mouseDown","mouseOver","mouseUp","getDoubleTap","lastTarget","lastTimeStamp","touchEnd","lT","lTS","timeStamp","doubleTap","getSelectionTargets","changeHandlers","selectionDetails","isCaption","isDisabledForSelection","findTargets","startCellOrCaption","endTable","getExtractedDetails","onAny","onFirst","onLast","unmergeable","resetTargets","setupHandler","onSetupWithToggle","isDisabledFromLocked","lockedDisable","onSetupTable","onSetupCellOrRow","onSetupColumn","onSetupPasteable","getClipboardData","onSetupPasteableColumn","onSetupMergeable","_targets","onSetupUnmergeable","onSetupTableWithCaption","onSetupTableHeaders","onSetupTableRowHeaders","onSetupTableColumnHeaders","addButtons","tableClassList","tableCellClassList","addToolbars","addContextToolbar","addMenuItems","insertTableAction","tableProperties","deleteTable","addTempAttr","Plugin$1","assumeExternalTargets","externalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","getDefaultLinkProtocol","sanitizeList","sanitizeWith","extracter","createUi","ListOptions","isLink","getHref","collectNodesInRange","cloneContents","hasProtocol","applyRelTargetRules","isUnsafe","rels","addTargetRules","removeTargetRules","inArray","newRels","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","hasLinks","hasLinksInSelection","isOnlyTextSelected","inlineTextElements","getTextInlineElements","getLinkAttrs","handleExternalTargets","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","updateLink","linkImageFigure","createHTML","linkDomMutation","attachState","unlinkSelection","startAnchorElm","endAnchorElm","unlinkDomMutation","unlinkImageFigure","unwrapOptions","sanitizeData","isDomSafe","sanitizedData","fig","findTextByValue","catalog","persistentText","hasPersistentText","findCatalog","catalogs","linkCatalog","persistentData","getTitleFromUrlChange","getTextFromUrlChange","onUrlChange","onCatalogChange","DialogChanges","delayedConfirm","tryEmailTransform","suggestMailTo","tryProtocolTransform","defaultLinkProtocol","suggestProtocol","DialogConfirms","anchorNodes","AnchorListOptions","ClassListOptions","parseJson","getLinks","extractor","linkList","send","optItems","noneItem","LinkListOptions","getRels","isTargetBlank_1","enforceSafe","safeRelExtractor","sanitizer","RelOptions","fallbacks","getTargets","TargetOptions","nonEmptyAttr","extractFromAnchor","onlyText","linkClass","collect","linkNode","links","optNode","flags","titleEnabled","DialogInfo","handleSubmit","getChangedValue","changedData","pData","collectData","getInitialData","defaultTarget","makeDialog","urlInput","titleText","dialogDelta","appendClickRemove","createEvent","initMouseEvent","getLink","getSelectedLink","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","scrollIntoView","gotoSelectedLink","setupGotoLinks","toggler","toggleActiveState","toggleEnabledState","toggleUnlinkState","hasLinks$1","addShortcut","setupButtons","setupMenuItems","setupContextMenu","inLink","noLink","setupContextToolbars","collapseSelectionToEnd","onSetupLink","getLinkText","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","rnds","hasAdvTab","hasUploadTab","getPrependUrl","hasDescription","hasImageTitle","hasImageCaption","getImageList","hasUploadUrl","hasUploadHandler","showAccessibilityOptions","isAutomaticUploadsEnabled","parseIntAndGetMax","val1","val2","getImageSize","onerror","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","imageList","waitLoadImage","selectImage","isPlaceholderImage","isSafeImageUrl","getHspace","marginLeft","marginRight","getVspace","marginTop","marginBottom","hasCaption","updateAttrib","wrapInFigure","figureElm","removeFigure","normalizeStyle","normalizeCss","setSize","getSize","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","getIsDecorative","getAlt","hspace","vspace","isDecorative","getStyleValue","setAlt","figure","updateProp","sugarImage","updateAlt","normalized","normalizeCss$1","mergedCss","compressed","getSelectedImage","splitTextBlock","textBlockElements","parentElm","isValidChild","readImageDataFromSelection","insertImageAtCaret","outerHTML","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","sanitizeImageData","insertOrUpdateImage","partialData","selectedImageData","isGroup","findEntryDelegate","findEntry","optList","ListUtils","makeTab$2","AdvTab","makeTab","urlListSanitizer","futureImageList","hasAdvTab$1","hasUploadTab$1","hasUploadUrl$1","hasUploadHandler$1","hasDescription$1","hasImageTitle$1","hasDimensions$1","hasImageCaption$1","hasAccessibilityOptions","automaticUploads","prependURL","preUrl","makeItems","imageUrl","imageDescription","imageTitle","imageDimensions","getDialogContainerType","useColumns","makeTab$1","MainTab","UploadTab","prevImage","prevAlt","fromImageData","fileinput","toImageData","removeEmptyAlt","addPrependUrl2","srcURL","prependUrl","addPrependUrl","formFillFromMeta2","formFillFromMeta","calculateImageSize","helpers","imageSize","updateImagesDropdown","changeSrc","changeImages","calcVSpace","matchingTopBottom","calcHSpace","matchingLeftRight","calcBorderWidth","calcBorderStyle","calcStyle","changeStyle2","dataCopy","changeStyle","changeAStyle","changeFileInput","finalize","updateSrcAndSwitchTab","dataUrl","createBlobCache","uploadImage","alertErr","addToBlobCache","changeHandler","closeHandler","makeDialogBody","tabPanel","submitHandler","uploadImagesAuto","stylesArg","upload","hasImageClass","toggleContentEditableState","toggleContentEditable","getRandomValues","crypto","msCrypto","rnds8","source_view","editorContent","ENHANCED","ENABLE_MEDIA_UPLOAD","initRichTextEditor","textArea","IconManager"],"mappings":"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CbC,GAAgB,CAClB,CACErkG,KAAMokG,GACNp3F,KAAM,cACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,eACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,YACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,eACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,aACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,QACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,SACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,MACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,SACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,OACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,iBACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,SACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,WACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,cACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,YACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,aACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,cACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,OACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,YACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,YACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,QACNvO,MAAO,WAET,CACEuB,KAAMokG,GACNp3F,KAAM,QACNvO,MAAO,YAGP6lG,GAAab,GAAW,IACxBc,GAAY,SAAUC,GAExB,IADA,IAAIC,EAAS,GACJvoG,EAAI,EAAGA,EAAIsoG,EAASpoG,OAAQF,GAAK,EACxCuoG,EAAO/nG,KAAK,CACVsQ,KAAMw3F,EAAStoG,EAAI,GACnBuC,MAAO,IAAMukG,GAASwB,EAAStoG,IAAIuC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G,EAAclwF,IACvBkwF,EAAclwF,GAETkwF,GAELC,GAAW,WACb,MAAO,CACL,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,IAGAC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEEC,GAAW,SAAUC,EAASC,GAIhC,IAHA,IAEIpgH,EAFAsuF,EAAM,GACN+xB,EAAM,IAAIp8H,MAAM,IAEXzD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIkB,EAAI,EAAGA,EAAI,EAAGA,IACrB4sG,EAAI5sG,GAAK0+H,EAAQ1+H,EAAQ,EAAJlB,GAEvB,IAASkB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1Bse,EAAM,EACN,IAAK,IAAIjT,EAAI,EAAGA,EAAI,EAAGA,IACrBiT,GAAOmgH,EAAQz+H,EAAQ,EAAJqL,GAASuhG,EAAIvhG,GAElCszH,EAAI3+H,EAAQ,EAAJlB,GAASwf,GAGrB,OAAOqgH,GAELC,GAAiB,SAAU/wD,EAAQxsE,GACrC,IAAIiB,EAcJ,OAbAjB,EAAQ+8H,GAAM/8H,GAAQ,EAAG,GACzBA,GAAS,IACLA,EAAQ,EACViB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","file":"js/rich_text_editor.6f43d27a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"rich_text_editor\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/dist/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant$1 = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity$1 = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant$1(false);\n    var always = constant$1(true);\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity$1;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant$1(null),\n        getOrUndefined: constant$1(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant$1('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant$1(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$2 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk$1 = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map$2 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition$3 = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$5 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex$1 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map$2(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$2(a1, function (x) {\n        return !contains$2(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure$2 = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$f = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$f(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$f(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$4 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity$1);\n    };\n    var get$e = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var equals = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var addToEnd = function (str, suffix) {\n      return str + suffix;\n    };\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var ensureTrailing = function (str, suffix) {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$1 = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml$2 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name$2 = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement$2 = isType(ELEMENT);\n    var isText$1 = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$3 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    var detect$4 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    var unknown$3 = function () {\n      return nu$d(0, 0);\n    };\n    var nu$d = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$3 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$5(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$3(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$3(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$2 = function () {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$c = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chrome: constant$1(chrome),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$1 = function () {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$b = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      osx: constant$1(osx),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    var detect$2 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$1 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$3 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$1().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner$4 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner$4(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map$2(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$2 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$2(element, 0);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant$1(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$2(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$1(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$8 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$d = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$d(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$7 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$c = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$7(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$c(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$c(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$3 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$b = function (element) {\n      return api$3.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$3.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api$3.max(element, value, inclusions);\n      set$7(element, 'max-height', absMax + 'px');\n    };\n\n    var r$1 = function (left, top) {\n      var translate = function (x, y) {\n        return r$1(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r$1;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute$3 = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport$1 = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$6 = function (element, h) {\n      return api$2.set(element, h);\n    };\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$2.max(element, value, inclusions);\n      set$7(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var before$2 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$2 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$2(v, element);\n        });\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n    var prepend$1 = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$2 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$2(parent, index).fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$2(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$2(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$1(children(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$5(wrapper);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$8 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$8(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant$1([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$3 = function (element) {\n      return owner$4(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), function (frames) {\n        var offset = viewport$1(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box$1 = function (element) {\n      var xy = absolute$3(element);\n      var w = getOuter$1(element);\n      var h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    var absolute$2 = function (element) {\n      var position = find$2(element);\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds$3(window);\n    };\n\n    var value$3 = function (o) {\n      var or = function (_opt) {\n        return value$3(o);\n      };\n      var orThunk = function (_f) {\n        return value$3(o);\n      };\n      var map = function (f) {\n        return value$3(f(o));\n      };\n      var mapError = function (_f) {\n        return value$3(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant$1(o),\n        getOrThunk: constant$1(o),\n        getOrDie: constant$1(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error$1 = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity$1;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error$1(message);\n      };\n      var mapError = function (f) {\n        return error$1(f(message));\n      };\n      var bind = function (_f) {\n        return error$1(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity$1,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error$1(err);\n      }, value$3);\n    };\n    var Result = {\n      value: value$3,\n      error: error$1,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold$1 = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each$1(results, function (obj) {\n        fold$1(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult$1 = function (res) {\n      return fold$1(res, Result.error, Result.value);\n    };\n    var fromResult$1 = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map,\n      mapError: mapError,\n      fold: fold$1\n    };\n\n    var field$2 = function (key, newKey, presence, prop) {\n      return {\n        tag: 'field',\n        key: key,\n        newKey: newKey,\n        presence: presence,\n        prop: prop\n      };\n    };\n    var customField$1 = function (newKey, instantiator) {\n      return {\n        tag: 'custom',\n        newKey: newKey,\n        instantiator: instantiator\n      };\n    };\n    var fold = function (value, ifField, ifCustom) {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge$1 = baseMerge(shallow$1);\n\n    var required$2 = function () {\n      return {\n        tag: 'required',\n        process: {}\n      };\n    };\n    var defaultedThunk = function (fallbackThunk) {\n      return {\n        tag: 'defaultedThunk',\n        process: fallbackThunk\n      };\n    };\n    var defaulted$1 = function (fallback) {\n      return defaultedThunk(constant$1(fallback));\n    };\n    var asOption = function () {\n      return {\n        tag: 'option',\n        process: {}\n      };\n    };\n    var mergeWithThunk = function (baseThunk) {\n      return {\n        tag: 'mergeWithThunk',\n        process: baseThunk\n      };\n    };\n    var mergeWith = function (base) {\n      return mergeWithThunk(constant$1(base));\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu$a = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingRequired = function (path, key, obj) {\n      return nu$a(path, function () {\n        return 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu$a(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu$a(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu$a(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu$a(path, constant$1(err));\n    };\n\n    var value$2 = function (validator) {\n      var extract = function (path, val) {\n        return SimpleResult.bindError(validator(val), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = constant$1('val');\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue$1 = value$2(SimpleResult.svalue);\n\n    var requiredAccess = function (path, obj, key, bundle) {\n      return get$e(obj, key).fold(function () {\n        return missingRequired(path, key, obj);\n      }, bundle);\n    };\n    var fallbackAccess = function (obj, key, fallback, bundle) {\n      var v = get$e(obj, key).getOrThunk(function () {\n        return fallback(obj);\n      });\n      return bundle(v);\n    };\n    var optionAccess = function (obj, key, bundle) {\n      return bundle(get$e(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback, bundle) {\n      var opt = get$e(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return bundle(opt);\n    };\n    var extractField = function (field, path, obj, key, prop) {\n      var bundle = function (av) {\n        return prop.extract(path.concat([key]), av);\n      };\n      var bundleAsOption = function (optValue) {\n        return optValue.fold(function () {\n          return SimpleResult.svalue(Optional.none());\n        }, function (ov) {\n          var result = prop.extract(path.concat([key]), ov);\n          return SimpleResult.map(result, Optional.some);\n        });\n      };\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), function (v) {\n            var result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    var extractFields = function (path, obj, fields) {\n      var success = {};\n      var errors = [];\n      for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n        var field = fields_1[_i];\n        fold(field, function (key, newKey, presence, prop) {\n          var result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, function (err) {\n            errors.push.apply(errors, err);\n          }, function (res) {\n            success[newKey] = res;\n          });\n        }, function (newKey, instantiator) {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, val) {\n        return getDelegate().extract(path, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, isNonNullable));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, value) {\n        return fold(value, function (key) {\n          var _a;\n          return deepMerge(acc, (_a = {}, _a[key] = true, _a));\n        }, constant$1(acc));\n      }, {});\n      var extract = function (path, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter$2(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (values) {\n      var extract = function (path, o) {\n        return extractFields(path, o, values);\n      };\n      var toString = function () {\n        var fieldStrings = map$2(values, function (value) {\n          return fold(value, function (key, _okey, _presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (newKey, _instantiator) {\n            return 'state(' + newKey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, array) {\n        var results = map$2(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map$2(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf$1 = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$2(validator)).extract(path, keys);\n      };\n      var extract = function (path, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map$2(validKeys, function (vk) {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (_desc, processor) {\n      var getP = cached(processor);\n      var extract = function (path, val) {\n        return getP().extract(path, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOfObj = compose(arrOf, objOf);\n\n    var anyValue = constant$1(anyValue$1);\n    var typedValue = function (validator, expectedType) {\n      return value$2(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$2(function (a) {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    var chooseFrom = function (path, input, branches, ch) {\n      var fields = get$e(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), input);\n      });\n    };\n    var choose$2 = function (key, branches) {\n      var extract = function (path, input) {\n        var choice = get$e(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var arrOfVal = function () {\n      return arrOf(anyValue$1);\n    };\n    var valueOf = function (validator) {\n      return value$2(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf = function (validator, prop) {\n      return setOf$1(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extractValue = function (label, prop, obj) {\n      var res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extractValue(label, prop, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity$1);\n    };\n    var asRawOrDie$1 = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var choose$1 = function (key, branches) {\n      return choose$2(key, map$1(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n\n    var field$1 = field$2;\n    var customField = customField$1;\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains$2(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var required$1 = function (key) {\n      return field$1(key, key, required$2(), anyValue());\n    };\n    var requiredOf = function (key, schema) {\n      return field$1(key, key, required$2(), schema);\n    };\n    var requiredNumber = function (key) {\n      return requiredOf(key, number);\n    };\n    var requiredString = function (key) {\n      return requiredOf(key, string);\n    };\n    var requiredStringEnum = function (key, values) {\n      return field$1(key, key, required$2(), validateEnum(values));\n    };\n    var requiredBoolean = function (key) {\n      return requiredOf(key, boolean);\n    };\n    var requiredFunction = function (key) {\n      return requiredOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field$1(key, key, asOption(), value$2(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var requiredObjOf = function (key, objSchema) {\n      return field$1(key, key, required$2(), objOf(objSchema));\n    };\n    var requiredArrayOfObj = function (key, objFields) {\n      return field$1(key, key, required$2(), arrOfObj(objFields));\n    };\n    var requiredArrayOf = function (key, schema) {\n      return field$1(key, key, required$2(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field$1(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field$1(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted = function (key, fallback) {\n      return field$1(key, key, defaulted$1(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field$1(key, key, defaulted$1(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var generate$7 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$1(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each$1(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      var r = {};\n      each(obj, function (v, k) {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap$2 = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll$1 = function (keyvalues) {\n      var r = {};\n      each$1(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude = function (obj, fields) {\n      return exclude$1(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap$2(key, value);\n    };\n    var wrapAll = function (keyvalues) {\n      return wrapAll$1(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$4 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element, simulatedEvent.event.target);\n    };\n\n    var defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    var nu$9 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return __assign(__assign({}, defaultEventHandler), parts);\n    };\n    var all$2 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read$2 = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse$1 = function (handlers) {\n      var can = all$2(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each$1(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can: can,\n        abort: abort,\n        run: run\n      };\n    };\n\n    var constant = constant$1;\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitioncancel = constant('transitioncancel');\n    var transitionend = constant('transitionend');\n    var transitionstart = constant('transitionstart');\n    var selectstart = constant('selectstart');\n\n    var prefixName = function (name) {\n      return constant$1('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus$4 = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute$5 = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight$1 = prefixName('highlight');\n    var dehighlight$1 = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute$5());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive$2 = function (configs) {\n      return wrapAll(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run$1 = function (name, handler) {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run$1(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$9({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run$1(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run$1(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).getOrThunk(function () {\n          var closest = closest$4(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute$1 = runOnName(execute$5());\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$5 = function (element, content) {\n      var owner = owner$4(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$7(container);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element) && !eq(originator, target);\n    };\n    var events$i = derive$2([can(focus$4(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    var unique = 0;\n    var generate$6 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix$1 = constant$1('alloy-id-');\n    var idAttr$1 = constant$1('data-alloy-id');\n\n    var prefix = prefix$1();\n    var idAttr = idAttr$1();\n    var write = function (label, elem) {\n      var id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement$2(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    var generate$5 = function (prefix) {\n      return generate$6(prefix);\n    };\n\n    var make$8 = identity$1;\n\n    var NoContextApi = function (getComp) {\n      var getMessage = function (event) {\n        return 'The component must be in a context to execute: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      };\n      var fail = function (event) {\n        return function () {\n          throw new Error(getMessage(event));\n        };\n      };\n      var warn = function (event) {\n        return function () {\n          console.warn(getMessage(event));\n        };\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    var singleton$1 = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map$2(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$6('alloy-premade');\n    var premade$1 = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$e(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArray([\n          component.getApis(),\n          component\n        ], rest, false));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$8({ readState: constant$1('No State required') });\n      }\n    };\n    var nu$8 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom$1 = function (spec, all) {\n      var schema = map$2(all, function (a) {\n        return optionObjOf(a.name(), [\n          required$1('config'),\n          defaulted('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity$1);\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return constant$1(output);\n        })\n      };\n    };\n    var getBehaviours$3 = function (bData) {\n      return bData.list;\n    };\n    var getData$2 = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each(data, function (detail, key) {\n        each(detail, function (value, indexKey) {\n          var chain = get$e(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$7 = function (s) {\n      return {\n        classes: isUndefined(s.classes) ? [] : s.classes,\n        attributes: isUndefined(s.attributes) ? {} : s.attributes,\n        styles: isUndefined(s.styles) ? {} : s.styles\n      };\n    };\n    var merge = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine$2 = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each$1(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each$1(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read$2(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map$2(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse$1(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var _a$2;\n    var baseBehaviour = 'alloy.base.behaviour';\n    var schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option('value'),\n        option('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith((_a$2 = {}, _a$2[execute$5()] = [\n        'disabling',\n        baseBehaviour,\n        'toggling',\n        'typeaheadevents'\n      ], _a$2[focus$4()] = [\n        baseBehaviour,\n        'focusing',\n        'keying'\n      ], _a$2[systemInit()] = [\n        baseBehaviour,\n        'disabling',\n        'toggling',\n        'representing'\n      ], _a$2[input()] = [\n        baseBehaviour,\n        'representing',\n        'streaming',\n        'invalidating'\n      ], _a$2[detachedFromDom()] = [\n        baseBehaviour,\n        'representing',\n        'item-events',\n        'tooltipping'\n      ], _a$2[mousedown()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[touchstart()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[mouseover()] = [\n        'item-type-events',\n        'tooltipping'\n      ], _a$2[receive()] = [\n        'receiving',\n        'reflecting',\n        'tooltipping'\n      ], _a$2)), anyValue()),\n      option('domModification')\n    ]);\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', schema$z, spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map$2(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$7({});\n      }, nu$7);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read = function (element, attr) {\n      var value = get$d(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$4 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$8(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$8(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$3 = function (element, clazz) {\n      return add$4(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return has(element, clazz);\n      });\n    };\n\n    var get$5 = function (element) {\n      return element.dom.value;\n    };\n    var set$4 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set$5(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$4(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$2 = function (spec) {\n      var behaviours = get$e(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), function (name) {\n        var behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    var generateFrom = function (spec, all) {\n      return generateFrom$1(spec, all);\n    };\n    var generate$4 = function (spec) {\n      var all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build$2 = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton$1);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$4(spec);\n      var bList = getBehaviours$3(bBlob);\n      var bData = getData$2(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind$3(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, pure$2);\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$e(spec, 'components').getOr([]);\n      return map$2(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make$8(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build$2(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external$2({ element: element });\n    };\n    var external$2 = function (spec) {\n      var extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      var uid = extSpec.uid.getOrThunk(function () {\n        return generate$5('external');\n      });\n      writeOnly(extSpec.element, uid);\n      var me = {\n        uid: uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    var uids = generate$5;\n    var isSketchSpec$1 = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var build$1 = function (spec) {\n      return getPremade(spec).getOrThunk(function () {\n        var userSpecWithUid = isSketchSpec$1(spec) ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      });\n    };\n    var premade = premade$1;\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$3(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    var find$1 = function (queryElem) {\n      var dependent = closest$3(queryElem, function (elem) {\n        if (!isElement$2(elem)) {\n          return false;\n        }\n        var id = get$d(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$d(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$6('aria-owns');\n      var link = function (elem) {\n        set$8(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$7(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$1(queryElem).exists(function (owner) {\n        return isPartOf$1(component, owner);\n      });\n    };\n    var isPartOf$1 = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, function (s) {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$e(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find$5(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant$1(ignoreEvent);\n\n    var menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    var itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    var itemSchema$3 = constant$1(objOf(itemFields()));\n\n    var _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return requiredOf('markers', itemSchema$3());\n    };\n    var tieredMenuMarkers = function () {\n      return requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers$1 = function (required) {\n      return requiredObjOf('markers', map$2(required, required$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, required$2());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    };\n    var output$1 = function (name, value) {\n      return customField(name, constant$1(value));\n    };\n    var snapshot = function (name) {\n      return customField(name, identity$1);\n    };\n    var initSize = constant$1(_initSize);\n\n    var nu$6 = function (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit) {\n      if (alwaysFit === void 0) {\n        alwaysFit = false;\n      }\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        placement: placement,\n        restriction: boundsRestriction,\n        label: labelPrefix + '-' + placement,\n        alwaysFit: alwaysFit\n      };\n    };\n\n    var adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata$2 = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast$3 = adt$a.southeast;\n    var southwest$3 = adt$a.southwest;\n    var northeast$3 = adt$a.northeast;\n    var northwest$3 = adt$a.northwest;\n    var south$3 = adt$a.south;\n    var north$3 = adt$a.north;\n    var east$3 = adt$a.east;\n    var west$3 = adt$a.west;\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp$1 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$e(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds$1, restriction, bubbleOffset) {\n      var applyRestriction = function (dir, current) {\n        return restriction[dir].map(function (pos) {\n          var isVerticalAxis = dir === 'top' || dir === 'bottom';\n          var offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n          var comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n          var newPos = comparator(pos, current) + offset;\n          return isVerticalAxis ? clamp$1(newPos, bounds$1.y, bounds$1.bottom) : clamp$1(newPos, bounds$1.x, bounds$1.right);\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds$1.x);\n      var adjustedTop = applyRestriction('top', bounds$1.y);\n      var adjustedRight = applyRestriction('right', bounds$1.right);\n      var adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var labelPrefix$2 = 'layout';\n    var eastX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY$2 = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY$1 = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var north$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    };\n    var south$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    };\n    var east$2 = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    };\n    var west$2 = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    };\n    var all$1 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$2,\n        northwest$2,\n        southeast$2,\n        southwest$2,\n        north$2,\n        south$2\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$2,\n        northeast$2,\n        southwest$2,\n        southeast$2,\n        north$2,\n        south$2\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter$2(channels, function (ch) {\n        return contains$2(message.channels, ch);\n      });\n    };\n    var events$h = function (receiveConfig) {\n      return derive$2([run$1(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each$1(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute$1(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create$8 = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes$1 = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie$1(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: function (info, base) {\n          return lift2(getConfig(info), get$e(active, 'exhibit'), function (behaviourInfo, exhibitor) {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(function () {\n            return nu$7({});\n          });\n        },\n        name: constant$1(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$e(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var create$7 = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$8(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var createModes = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant$1(undefined);\n\n    var Receiving = create$7({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit$6 = function (base, posConfig) {\n      return nu$7({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$3 = function (element) {\n      return element.dom.focus();\n    };\n    var blur$1 = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve$1 = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      var toPx = function (num) {\n        return num + 'px';\n      };\n      return {\n        position: position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    var toOptions = function (position) {\n      return __assign(__assign({}, position), { position: Optional.some(position.position) });\n    };\n    var applyPositionCss = function (element, position) {\n      setOptions(element, toOptions(position));\n    };\n\n    var adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionRect = decision.rect;\n      var decisionX = decisionRect.x - x;\n      var decisionY = decisionRect.y - y;\n      var decisionWidth = decisionRect.width;\n      var decisionHeight = decisionRect.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata$2(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        var decisionRect = decision.rect;\n        return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$2, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var viewport = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds$1 = b();\n          var pos = translate$2(origin, bounds$1.x, bounds$1.y);\n          return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n        });\n      });\n    };\n    var translate$2 = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    adt$9.none;\n    var relative$1 = adt$9.relative;\n    var fixed$1 = adt$9.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var placementAttribute = 'data-alloy-placement';\n    var setPlacement$1 = function (element, placement) {\n      set$8(element, placementAttribute, placement);\n    };\n    var getPlacement = function (element) {\n      return getOpt(element, placementAttribute);\n    };\n    var reset$2 = function (element) {\n      return remove$7(element, placementAttribute);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    var determinePosition = function (box, bounds) {\n      var boundsX = bounds.x, boundsY = bounds.y, boundsRight = bounds.right, boundsBottom = bounds.bottom;\n      var x = box.x, y = box.y, right = box.right, bottom = box.bottom, width = box.width, height = box.height;\n      var xInBounds = x >= boundsX && x <= boundsRight;\n      var yInBounds = y >= boundsY && y <= boundsBottom;\n      var originInBounds = xInBounds && yInBounds;\n      var rightInBounds = right <= boundsRight && right >= boundsX;\n      var bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      var sizeInBounds = rightInBounds && bottomInBounds;\n      var visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      var visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        visibleW: visibleW,\n        visibleH: visibleH\n      };\n    };\n    var calcReposition = function (box, bounds$1) {\n      var boundsX = bounds$1.x, boundsY = bounds$1.y, boundsRight = bounds$1.right, boundsBottom = bounds$1.bottom;\n      var x = box.x, y = box.y, width = box.width, height = box.height;\n      var maxX = Math.max(boundsX, boundsRight - width);\n      var maxY = Math.max(boundsY, boundsBottom - height);\n      var restrictedX = clamp$1(x, boundsX, maxX);\n      var restrictedY = clamp$1(y, boundsY, maxY);\n      var restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      var restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    var calcMaxSizes = function (direction, box, bounds) {\n      var upAvailable = constant$1(box.bottom - bounds.y);\n      var downAvailable = constant$1(bounds.bottom - box.y);\n      var maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant$1(box.right - bounds.x);\n      var eastAvailable = constant$1(bounds.right - box.x);\n      var maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth: maxWidth,\n        maxHeight: maxHeight\n      };\n    };\n    var attempt = function (candidate, width, height, bounds$1) {\n      var bubble = candidate.bubble;\n      var bubbleOffset = bubble.offset;\n      var adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      var newX = candidate.x + bubbleOffset.left;\n      var newY = candidate.y + bubbleOffset.top;\n      var box = bounds(newX, newY, width, height);\n      var _a = determinePosition(box, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, visibleW = _a.visibleW, visibleH = _a.visibleH;\n      var fits = originInBounds && sizeInBounds;\n      var fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      var isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      var _b = calcMaxSizes(candidate.direction, fittedBox, bounds$1), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n      var reposition = {\n        rect: fittedBox,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    var attempts = function (element, candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, visibleW, visibleH, isVisible) {\n        var next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), function (newReposition, newVisibleW, newVisibleH, newIsVisible) {\n          var improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity$1, identity$1);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return singleton(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var api$1 = function () {\n      var subject = destroyable();\n      var run = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { run: run });\n    };\n    var value$1 = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n    var capture = function (element, event, handler) {\n      return capture$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    var timerAttr = 'data-alloy-transition-timer';\n    var isTransitioning$1 = function (element, transition) {\n      return hasAll(element, transition.classes);\n    };\n    var shouldApplyTransitionCss = function (transition, decision, lastPlacement) {\n      return lastPlacement.exists(function (placer) {\n        var mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    var hasChanges = function (position, intermediate) {\n      var round = function (value) {\n        return parseFloat(value).toFixed(3);\n      };\n      return find$4(intermediate, function (value, key) {\n        var newValue = position[key].map(round);\n        var val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    var getTransitionDuration = function (element) {\n      var get = function (name) {\n        var style = get$c(element, name);\n        var times = isString(style) ? style.split(/\\s*,\\s*/) : [];\n        return filter$2(times, isNotEmpty);\n      };\n      var parse = function (value) {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          var num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      var delay = get('transition-delay');\n      var duration = get('transition-duration');\n      return foldl(duration, function (acc, dur, i) {\n        var time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    var setupTransitionListeners = function (element, transition) {\n      var transitionEnd = unbindable();\n      var transitionCancel = unbindable();\n      var timer;\n      var isSourceTransition = function (e) {\n        var _a;\n        var pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      var transitionDone = function (e) {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          var type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      var transitionStarted = function () {\n        transitionEnd.set(bind(element, transitionend(), transitionDone));\n        transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n      };\n      if ('ontransitionstart' in element.dom) {\n        var transitionStart_1 = bind(element, transitionstart(), function (e) {\n          if (isSourceTransition(e)) {\n            transitionStart_1.unbind();\n            transitionStarted();\n          }\n        });\n      } else {\n        transitionStarted();\n      }\n      var duration = getTransitionDuration(element);\n      requestAnimationFrame(function () {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$8(element, timerAttr, timer);\n      });\n    };\n    var startTransitioning = function (element, transition) {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(function (timerId) {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    var applyTransitionCss = function (element, origin, position, transition, decision, lastPlacement) {\n      var shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$7(element, 'position', position.position);\n        var rect = toBox(origin, element);\n        var intermediatePosition_1 = reposition(origin, __assign(__assign({}, decision), { rect: rect }));\n        var intermediateCssOptions = mapToObject(properties, function (prop) {\n          return intermediatePosition_1[prop];\n        });\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$1(p),\n        height: getOuter$2(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position$2 = function (element, decision, options) {\n      var positionCss = reposition(options.origin, decision);\n      options.transition.each(function (transition) {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    var setPlacement = function (element, decision) {\n      setPlacement$1(element, decision.placement);\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    var anchored = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable$1 = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, lastPlacement, getBounds, overrideOptions, transition) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction,\n        lastPlacement: lastPlacement,\n        transition: transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    var nu$5 = function (xOffset, yOffset, classes, insetModifier) {\n      if (insetModifier === void 0) {\n        insetModifier = 1;\n      }\n      var insetXOffset = xOffset * insetModifier;\n      var insetYOffset = yOffset * insetModifier;\n      var getClasses = function (prop) {\n        return get$e(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-xOffset, yOffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(xOffset, yOffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-xOffset / 2, yOffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-xOffset, -yOffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(xOffset, -yOffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-xOffset / 2, -yOffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(xOffset, -yOffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-xOffset, -yOffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        insetNortheast: function () {\n          return make(insetXOffset, insetYOffset, [\n            'top',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetNorthwest: function () {\n          return make(-insetXOffset, insetYOffset, [\n            'top',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetNorth: function () {\n          return make(-insetXOffset / 2, insetYOffset, [\n            'top',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetSoutheast: function () {\n          return make(insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetSouthwest: function () {\n          return make(-insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetSouth: function () {\n          return make(-insetXOffset / 2, -insetYOffset, [\n            'bottom',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetEast: function () {\n          return make(-insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'right',\n            'inset'\n          ]);\n        },\n        insetWest: function () {\n          return make(insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'left',\n            'inset'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$5(0, 0, {});\n    };\n\n    var nu$4 = identity$1;\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$c(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement$2(current) && get$d(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$y = function () {\n      return optionObjOf('layouts', [\n        required$1('onLtr'),\n        required$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$4 = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement$4 = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$4(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$4(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity$1, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity$1, identity$1);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner$4(frame);\n        var compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner$4(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var getBox = function (left, top, width, height) {\n      var point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$4(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$4({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$6 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$6 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity$1, identity$1, identity$1);\n    };\n    var before = adt$6.before;\n    var on$1 = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before,\n      on: on$1,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$1\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    var getBounds$2 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant$1(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText$1, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name$2(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name$2(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all$3(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner$4(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getBounds$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point$1(element, offset);\n      } else if (offset < children$1.length) {\n        return point$1(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText$1(last) ? get$3(last).length : children(last).length;\n        return point$1(last, len);\n      }\n    };\n\n    var descendOnce = function (element, offset) {\n      return isText$1(element) ? point$1(element, offset) : descendOnce$1(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce(sel.start, sel.soffset);\n        var modFinish = descendOnce(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$1 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before$2(sel.start, x);\n          var rect = getFirstRect(win, SimSelection.exact(x, 0, x, 1));\n          remove$5(x);\n          return rect;\n        });\n        return optRect.bind(function (rawRect) {\n          return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement$2(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    var labelPrefix$1 = 'link-layout';\n    var eastX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var all = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1\n      ];\n    };\n\n    var placement = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$4(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    var PositionSchema = [\n      defaulted('useFixed', never),\n      option('getBounds')\n    ];\n    var PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute$3(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee, lastPlace, transition) {\n      var anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, getBounds, anchoring.overrides, transition);\n    };\n    var position$1 = function (component, posConfig, posState, placee, placementSpec) {\n      positionWithin(component, posConfig, posState, placee, placementSpec, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, placee, placementSpec, boxElement) {\n      var boundsBox = boxElement.map(box$1);\n      return positionWithinBounds(component, posConfig, posState, placee, placementSpec, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, placee, placementSpec, bounds) {\n      var placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      var anchorage = placeeDetail.anchor;\n      var element = placee.element;\n      var placeeState = posState.get(placee.uid);\n      preserve$1(function () {\n        set$7(element, 'position', 'fixed');\n        var oldVisibility = getRaw(element, 'visibility');\n        set$7(element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant$1).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          var newState = doPlace(component, origin, anchoring, getBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(function () {\n          remove$6(element, 'visibility');\n        }, function (vis) {\n          set$7(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n    var reset$1 = function (component, pConfig, posState, placee) {\n      var element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (prop) {\n        return remove$6(element, prop);\n      });\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    var init$g = function () {\n      var state = {};\n      var set = function (id, data) {\n        state[id] = data;\n      };\n      var get = function (id) {\n        return get$e(state, id);\n      };\n      var clear = function (id) {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: function () {\n          return state;\n        },\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    var Positioning = create$7({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each$1(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach$1 = function (parent, child) {\n      append$2(parent.element, child.element);\n    };\n    var detachChildren$1 = function (component) {\n      each$1(component.components(), function (childComp) {\n        return remove$5(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren$1(component);\n      var deleted = difference(subs, newChildren);\n      each$1(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach = function (parent, child) {\n      attachWith(parent, child, append$2);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open$1 = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close$1 = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen$1 = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen$1(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState$2 = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$7(sandbox.element, attr);\n      }, function (v) {\n        set$8(sandbox.element, attr, v);\n      });\n      set$7(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$7(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$7(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    var events$g = function (sandboxConfig, sandboxState) {\n      return derive$2([run$1(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close$1(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init$f = function () {\n      var contents = value$1();\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        readState: readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Sandboxing = create$7({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant$1('dismiss.popups');\n    var repositionPopups = constant$1('reposition.popups');\n    var mouseReleased = constant$1('mouse.released');\n\n    var schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([required$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad$5 = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    var events$f = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var memory$1 = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$8({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$e(dataByValue.get(), itemString).orThunk(function () {\n          return get$e(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each$1(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$e(item, 'meta').each(function (meta) {\n            get$e(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$8({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$e = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    var setValue$2 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$2 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(function () {\n        return store.getFallbackEntry(key);\n      });\n    };\n    var onLoad$4 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$1 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$1 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$3 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue,\n        getValue: getValue,\n        onLoad: onLoad$2,\n        onUnload: onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    var Representing = create$7({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map$2(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([customField('dump', identity$1)]));\n    };\n    var get$2 = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, derive$1(original)), data.dump);\n    };\n    var SketchBehaviours = {\n      field: field,\n      augment: augment,\n      get: get$2\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has$2(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$e(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$e(value, 'components').getOr([]);\n        var substituted = bind$3(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity$1);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind$3(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant$1(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single$2 = adt$3.single;\n    var multiple = adt$3.multiple;\n    var placeholder = constant$1(_placeholder);\n\n    var adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted('factory', { sketch: identity$1 });\n    var fSchema = defaulted('schema', []);\n    var fName = required$1('name');\n    var fPname = field$1('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$6(typeSpec.name) + '>';\n    }), anyValue());\n    var fGroupSchema = customField('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted('defaults', constant$1({}));\n    var fOverrides = defaulted('overrides', constant$1({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity$1, identity$1, identity$1, identity$1);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie$1('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$2.required, requiredSpec);\n    var external$1 = convert(adt$2.external, externalSpec);\n    var optional = convert(adt$2.optional, optionalSpec);\n    var group = convert(adt$2.group, groupSpec);\n    var original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each$1(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single$2(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single$2(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map$2(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    var generate$3 = function (owner, parts) {\n      var r = {};\n      each$1(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne$1 = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind$3(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return requiredObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map$2(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components$1 = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, _k) {\n        return constant$1(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll(map$2(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field$1('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite$1 = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$5('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var single = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$3(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name$2(target) === 'input' && get$d(target, 'type') !== 'radio' || name$2(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [required$1('find')];\n\n    var Composing = create$7({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$1 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains$2(nativeDisabled, name$2(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$8(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$7(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$d(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$8(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$8(component.element, 'aria-disabled', 'false');\n    };\n    var disable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$3 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable$1,\n        disable: disable$1,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$3\n    });\n\n    var exhibit$5 = function (base, disableConfig) {\n      return nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$e = function (disableConfig, disableState) {\n      return derive$2([\n        abort(execute$5(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$1)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$7({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    var highlight = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find$5(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta$2 = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex$1(items, function (item) {\n        return has(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$7({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains$2(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose = function (transitions, event) {\n      var transition = find$5(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom$2 = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted('focusManager', dom$2()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains$2([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output$1('handler', me),\n          output$1('state', stateInit),\n          output$1('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run$1(focus$4(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run$1(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$5 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$1(element, sel);\n        }).getOr(element);\n        return get$b(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter$2(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$1(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant$1([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant$1([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$5(customField('cyclic', never));\n\n    var CyclicType = create$5(customField('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    var execute$4 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    var getKeyupRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, function () {\n      return Optional.none();\n    });\n\n    var flatgrid$1 = function () {\n      var dimensions = value$1();\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set({\n          numRows: numRows,\n          numColumns: numColumns\n        });\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$8({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$d = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$1 = useV;\n    var south$1 = useV;\n    var move$1 = useV;\n\n    var isHidden$1 = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden$1(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex$1(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex = function (elements, target) {\n      return findIndex$1(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp$1(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, -1);\n    };\n    var cycleUp$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, -1);\n    };\n    var cycleDown$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, +1);\n    };\n\n    var schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    var focusIn$3 = function (component, gridConfig, _gridState) {\n      descendant(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent$1 = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, gridConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent$1(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove$2 = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape$1 = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1);\n    var moveRight$3 = doMove$2(cycleRight$1);\n    var moveNorth$1 = doMove$2(cycleUp$1);\n    var moveSouth$1 = doMove$2(cycleDown$1);\n    var getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    var getKeyupRules$4 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name$2(candidate) === 'button' && get$d(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true)\n    ];\n    var findCurrent = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, flowConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$2 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$3 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2),\n        rule(inSet(ESCAPE), doEscape)\n      ];\n    };\n    var getKeyupRules$3 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp$1(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp$1(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, -1);\n    };\n    var cycleUp = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, -1);\n    };\n    var cycleDown = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    var focusIn$1 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$1 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map$2(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$1(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft = doMove(cycleLeft, moveLeft$1);\n    var moveRight = doMove(cycleRight, moveRight$1);\n    var moveNorth = doMove(cycleUp, moveUp$1);\n    var moveSouth = doMove(cycleDown, moveDown$1);\n    var getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    var getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    var execute = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn = function (component, menuConfig, _state) {\n      descendant(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    var getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$2 = function (component, replaceConfig, replaceState, data) {\n      preserve$1(function () {\n        var newChildren = map$2(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append$2, appendee);\n    };\n    var prepend = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend$1, prependee);\n    };\n    var remove = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find$5(children, function (child) {\n        return eq(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex$1(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$2,\n        contents: contents\n    });\n\n    var Replacing = create$7({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$d = function (name, eventHandlers) {\n      var events = derive$2(eventHandlers);\n      return create$7({\n        fields: [required$1('enabled')],\n        name: name,\n        active: { events: constant$1(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    var exhibit$4 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    var events$c = function (focusConfig) {\n      return derive$2([run$1(focus$4(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    var Focusing = create$7({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle$2 = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$1 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$1\n    });\n\n    var exhibit$3 = function () {\n      return nu$7({});\n    };\n    var events$b = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      var load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$7({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$a = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute$1(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus$1 = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant$1(hoverEvent);\n    var focus$1 = constant$1(focusEvent);\n\n    var builder$2 = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArray(__spreadArray([], pointerEvents(), true), [\n            run$1(mouseover(), onHover),\n            run$1(focusItem(), Focusing.focus)\n          ], false))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive$2([stopper(focusItem())])\n      };\n    };\n    var schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    var owner$2 = constant$1('item-widget');\n    var parts$h = constant$1([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts$h());\n      var components = components$1(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    var itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$g = constant$1([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return has$2(u, 'uid') ? u : __assign(__assign({}, u), { uid: generate$5('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector')\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus = constant$1('alloy.menu-focus');\n\n    var make$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive$2([\n          run$1(focus$1(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run$1(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    var transpose$1 = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$e(byMenu, finish).bind(function (triggerItem) {\n        return get$e(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$2 = function (menus, expansions) {\n      var items = {};\n      each(menus, function (menuItems, menu) {\n        each$1(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose$1(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return get$e(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$c = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = value$1();\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$4(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter$2(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind$3(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return is$1(primary.get(), menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$e(expansions.get(), itemValue).map(function (menu) {\n          var current = get$e(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$e(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$e(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$e(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$c,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$6 = function (detail, _rawUiSpec) {\n      var submenuParentItems = value$1();\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom$2()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find$5(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$1(detail.data.menus, function (data, _menuName) {\n          return bind$3(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map$2(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each$1(others, function (o) {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter$2(items, function (i) {\n            return get$d(i, 'aria-haspopup') === 'true';\n          });\n          each$1(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(r);\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each(parentItems, function (v, k) {\n          var expanded = contains$2(path, k);\n          set$8(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each$1(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          var value = getItemValue(item);\n          return layeredState.expand(value).bind(function (path) {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(function (menuName) {\n              return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n                var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n                if (!inBody(activeMenu.element)) {\n                  Replacing.append(container, premade(activeMenu));\n                }\n                detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n                if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                  Highlighting.highlightFirst(activeMenu);\n                  return updateMenuPath(container, layeredState, path);\n                } else {\n                  Highlighting.dehighlightAll(activeMenu);\n                  return Optional.some(item);\n                }\n              });\n            });\n          });\n        }\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$1(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive$2([\n        run$1(focus(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute$1(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run$1(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$d(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem$1 = constant$1('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem = function (text) {\n      return {\n        value: generate$6(collapseItem$1()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightImmediately', true),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, placementSpec, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: __assign({\n              type: 'submenu',\n              item: item\n            }, getSubmenuLayouts(triggeringPaths))\n          });\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: __assign({\n                type: 'submenu',\n                item: st.triggeringItem\n              }, submenuLayouts)\n            });\n          });\n        }\n      });\n    };\n    var factory$m = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf$1(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, thing, placementSpec) {\n        showWithin(sandbox, thing, placementSpec, Optional.none());\n      };\n      var showWithin = function (sandbox, thing, placementSpec, boxElement) {\n        showWithinBounds(sandbox, thing, placementSpec, function () {\n          return boxElement.map(function (elem) {\n            return box$1(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, thing, placementSpec, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, placementSpec, menuSpec) {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      var showMenuWithinBounds = function (sandbox, placementSpec, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$m,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var labelPrefix = 'layout-inset';\n    var westEdgeX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor) {\n      return anchor.y;\n    };\n    var southY = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var southwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var southeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var northwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), labelPrefix);\n    };\n    var northeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), labelPrefix);\n    };\n    var north = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    };\n    var south = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    };\n    var east = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    };\n    var west = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    };\n    var lookupPreserveLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    var preserve = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    var lookupFlippedLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    var flip$2 = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$l = function (detail) {\n      var events = events$a(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single({\n      name: 'Button',\n      factory: factory$l,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    var defaultIconName = 'temporary-placeholder';\n    var defaultIcon = function (icons) {\n      return function () {\n        return get$e(icons, defaultIconName).getOr('!not found!');\n      };\n    };\n    var getIconName = function (name, icons) {\n      var lcName = name.toLowerCase();\n      if (global$e.isRtl()) {\n        var rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    var lookupIcon = function (name, icons) {\n      return get$e(icons, getIconName(name, icons));\n    };\n    var get$1 = function (name, iconProvider) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    var getOr = function (name, iconProvider, fallbackIcon) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    var needsRtlTransform = function (iconName) {\n      return global$e.isRtl() ? has$2(rtlTransform, iconName) : false;\n    };\n    var addFocusableBehaviour = function () {\n      return config('add-focusable', [runOnAttached(function (comp) {\n          child(comp.element, 'svg').each(function (svg) {\n            return set$8(svg, 'focusable', 'false');\n          });\n        })]);\n    };\n    var renderIcon$2 = function (spec, iconName, icons, fallbackIcon) {\n      var _a, _b;\n      var rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      var iconHtml = get$e(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1(__spreadArray(__spreadArray([], (_b = spec.behaviours) !== null && _b !== void 0 ? _b : [], true), [addFocusableBehaviour()], false))\n      };\n    };\n    var render$3 = function (iconName, spec, iconProvider, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      return renderIcon$2(spec, iconName, iconProvider(), fallbackIcon);\n    };\n    var renderFirst = function (iconNames, spec, iconProvider) {\n      var icons = iconProvider();\n      var iconName = find$5(iconNames, function (name) {\n        return has$2(icons, getIconName(name, icons));\n      });\n      return renderIcon$2(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$k = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      var notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      var components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single({\n      name: 'Notification',\n      factory: factory$k,\n      configFields: [\n        option('level'),\n        required$1('progress'),\n        required$1('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var sharedBackstage = extras.backstage.shared;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south;\n        case 'tc-tc':\n          return north;\n        case 'tc-bc':\n          return north$2;\n        case 'bc-tc':\n        default:\n          return south$2;\n        }\n      };\n      var reposition = function (notifications) {\n        if (notifications.length > 0) {\n          each$1(notifications, function (notification, index) {\n            if (index === 0) {\n              notification.moveRel(null, 'banner');\n            } else {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {}\n        }, sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$f.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        var getBounds = function () {\n          var contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n          var win$1 = win();\n          var x = clamp$1(win$1.x, contentArea.x, contentArea.right);\n          var y = clamp$1(win$1.y, contentArea.y, contentArea.bottom);\n          var right = Math.max(contentArea.right, win$1.right);\n          var bottom = Math.max(contentArea.bottom, win$1.bottom);\n          return Optional.some(bounds(x, y, right - x, bottom - y));\n        };\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, premade(notification), {\n              anchor: {\n                type: 'makeshift',\n                x: x,\n                y: y\n              }\n            });\n          },\n          moveRel: function (element, rel) {\n            var notificationSpec = premade(notification);\n            var anchorOverrides = { maxHeightFunction: expandable$1() };\n            if (rel !== 'banner' && isNonNullable(element)) {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            } else {\n              var anchor = __assign(__assign({}, sharedBackstage.anchors.banner()), { overrides: anchorOverrides });\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: anchor }, getBounds);\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains$2([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$d(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$2(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect = function (elm) {\n      return closest$1(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup$e = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup$e };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText(node)) {\n        return point(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup$2 = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter$2(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$c.all(map$2(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted('type', 'autocompleteitem'),\n      defaulted('active', false),\n      defaulted('disabled', false),\n      defaulted('meta', {}),\n      requiredString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      requiredString('type'),\n      requiredString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      requiredFunction('fetch'),\n      requiredFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted('type', 'contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionString('label'),\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted('type', 'contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each$1(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register$b = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, identity$1);\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter$2(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$e(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    var chunk = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk$1(items, numColumns);\n        return map$2(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity$1\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each$1(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      requiredString('type'),\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      requiredString('type'),\n      requiredString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$1 = valueThunk(function () {\n      return choose$2('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      requiredString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field$1('value', 'value', defaultedThunk(function () {\n        return generate$6('menuitem-value');\n      }), anyValue()),\n      defaulted('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('label'),\n      requiredArrayOf('items', itemSchema$1),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      requiredString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var baseFields = [\n      requiredString('type'),\n      requiredString('fancytype'),\n      defaultedFunction('onAction', noop)\n    ];\n    var insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    var colorSwatchFields = [defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        optionArrayOf('colors', anyValue())\n      ])].concat(baseFields);\n    var fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      requiredString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      requiredFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex$1(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$6('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$6('tooltip.exclusive');\n    var ShowTooltipEvent = generate$6('tooltip.show');\n    var HideTooltipEvent = generate$6('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$9 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', function (comp) {\n        return {\n          type: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ]),\n            onRtl: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$b = function () {\n      var timer = value$1();\n      var popup = value$1();\n      var clearTimer = function () {\n        timer.on(clearTimeout);\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Tooltipping = create$7({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$a.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$b.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getContentLanguages = function (editor) {\n      return editor.getParam('content_langs', undefined, 'array');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range$2(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter$2(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var getStickyToolbarOffset = function (editor) {\n      return editor.getParam('toolbar_sticky_offset', 0, 'number');\n    };\n    var isDraggableModal$1 = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$1(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a$1;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute$1(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a$1 = {}, _a$1[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a$1);\n\n    var componentRenderPipeline = cat;\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$9.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map$2(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return global$9.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon$1 = function (name, icons, classes) {\n      if (classes === void 0) {\n        classes = [iconClass];\n      }\n      return render$3(name, {\n        tag: 'div',\n        classes: classes\n      }, icons);\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$e.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$e.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return renderIcon$1('checkmark', icons, [checkmarkClass]);\n    };\n    var renderSubmenuCaret = function (icons) {\n      return renderIcon$1('chevron-right', icons, [caretClass]);\n    };\n    var renderDownwardsCaret = function (icons) {\n      return renderIcon$1('chevron-down', icons, [caretClass]);\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (item, providerBackstage, fallbackIcon) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var itemText = item.ariaLabel;\n      var itemValue = item.value;\n      var iconSvg = item.iconContent.map(function (name) {\n        return getOr(name, providerBackstage.icons, fallbackIcon);\n      });\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatches__picker-btn'], false),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatch--remove'], false),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$e.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ]\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      var iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      var renderIcon = function (iconName) {\n        return render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      };\n      var renderEmptyIcon = function () {\n        return Optional.some({ dom: iconSpec });\n      };\n      var leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$e(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                type: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable$1 }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external$2({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$b.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$e.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant$1({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render$2 = function (items, extras) {\n      return map$2(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render$2(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains$2(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each$1(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$f = generate$3(owner$2(), parts$h());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round$1 = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded$1 = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError$1 = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols$2 = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors$1 = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors$2 = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map$2(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var fallbackColor = '#000000';\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return Optional.from(color);\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors$2(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols$2(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, fallbackColor);\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch$1 = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = getCurrentColor(editor, format);\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch$1(getColors$2(editor), hasCustomColors$1(editor)),\n        onAction: function (_splitButtonApi) {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$a = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(fallbackColor);\n      var lastBackColor = Cell(fallbackColor);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map$2(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColorItems(spec, backstage);\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    var getColorItems = function (spec, backstage) {\n      var useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(function () {\n        return getColors$1(backstage.colorinput.getColors(), useCustomColors);\n      }, function (colors) {\n        return colors.concat(getAdditionalColors(useCustomColors));\n      });\n    };\n\n    var cellOverEvent = generate$6('cell-over');\n    var cellExecuteEvent = generate$6('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind$3(cells, function (cellRow) {\n        return map$2(cellRow, premade);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 'x' + row);\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$6('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var emptyLabelText = makeLabelText(0, 0);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(function (c) {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return get$e(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator$3 = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator$3(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator$3(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map$2(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom$2();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$9 = function (editor, sharedBackstage) {\n      var activeAutocompleter = value$1();\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run$1(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.clear();\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register$b(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind$3(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          });\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')), {\n          anchor: {\n            type: 'node',\n            root: SugarElement.fromDom(editor.getBody()),\n            node: Optional.from(ac.element)\n          }\n        });\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup$2(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$9 };\n\n    var closest = function (scope, selector, isRoot) {\n      return closest$1(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = value$1();\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$e(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$2(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$1().browser.isFirefox();\n    };\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'focus', handler);\n      } else {\n        return bind(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'blur', handler);\n      } else {\n        return bind(container, 'focusout', handler);\n      }\n    };\n    var setup$d = function (container, rawSettings) {\n      var settings = __assign({ stopBackspace: true }, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = value$1();\n      var onPaste = bind(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      var onKeydown = bind(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = value$1();\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      var unbind = function () {\n        each$1(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive = function (rawEvent, rawTarget) {\n      var source = get$e(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).bind(function (id) {\n          return get$e(handlers, id);\n        }).map(function (descHandler) {\n          return eventHandler(elem, descHandler);\n        });\n      };\n      var filterByType = function (type) {\n        return get$e(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return get$e(registry, type).bind(function (handlers) {\n          return closest$4(target, function (elem) {\n            return findHandler(handlers, elem);\n          }, isAboveRoot);\n        });\n      };\n      var unregisterId = function (id) {\n        each(registry, function (handlersById, _eventName) {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).getOrThunk(function () {\n          return write('uid-', component.element);\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$e(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$j = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$2(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$d(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$3(target);\n          }, function (_alloyId) {\n            monitorEvent(focus$4(), target, function (logger) {\n              triggerHandler(lookup, focus$4(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText$1(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText$1(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each$1(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$l = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$e = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$i = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$6(detail.prefix);\n            ps.label().each(function (label) {\n              set$8(label.element, 'for', id);\n              set$8(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$6(detail.prefix);\n              set$8(descriptor.element, 'id', descriptorId);\n              set$8(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite({\n      name: 'FormField',\n      configFields: schema$l(),\n      partFields: parts$e(),\n      factory: factory$i,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$2 = function (base, tabConfig) {\n      return nu$7({\n        attributes: wrapAll([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$7({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel$2 = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$6('form-component-change');\n    var formCloseEvent = generate$6('form-close');\n    var formCancelEvent = generate$6('form-cancel');\n    var formActionEvent = generate$6('form-action');\n    var formSubmitEvent = generate$6('form-submit');\n    var formBlockEvent = generate$6('form-block');\n    var formUnblockEvent = generate$6('form-unblock');\n    var formTabChangeEvent = generate$6('form-tabchange');\n    var formResizeEvent = generate$6('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$1(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$d(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map$2(items, function (item) {\n          var itemText = global$e.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$7.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        var html = map$2(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set$5(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run$1(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(function (comp) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity$1 },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$8(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$k = constant$1([\n      option('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$5(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element);\n              if (current !== data) {\n                set$4(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$h = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single({\n      name: 'Input',\n      configFields: schema$k(),\n      factory: factory$h\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module));\n    var Promise$1 = module.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$1(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$5 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$5(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$5(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$5(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$5(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$2 = function (baseFn) {\n      return make$5(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make$5(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$2,\n      pure: pure\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name = name$2(elem);\n      return contains$2(ariaElements, name);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    var events$8 = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive$2([run$1(validatorInfo.onEvent, function (component) {\n            run(component, invalidConfig, invalidState).get(identity$1);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$7({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    var init$a = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$e(coupled, name).getOrThunk(function () {\n            var builder = get$e(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Coupling = create$7({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant$1('sink');\n    var partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var type = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$5(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, menu, { anchor: anchor });\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, submenu, {\n                anchor: {\n                  type: 'submenu',\n                  item: item\n                }\n              });\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, primaryMenu, { anchor: anchor });\n              each$1(submenuTriggers, function (st) {\n                Positioning.position(sink, st.triggeredMenu, {\n                  anchor: {\n                    type: 'submenu',\n                    item: st.triggeringItem\n                  }\n                });\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$a(hotspot.element);\n      if (useMinWidth) {\n        set$7(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$6(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox$1 = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel$1({ isExtraPart: never })), receivingChannel({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$j = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$d = constant$1([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$g = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$g,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$1 = function () {\n      return nu$7({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$7 = function () {\n      return derive$2([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    var Unselecting = create$7({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$6('color-input-change');\n    var colorSwatchChangeEvent = generate$6('color-swatch-change');\n    var colorPickerCancelEvent = generate$6('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$7(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$2,\n              southeast$2,\n              south$2\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$2,\n              southwest$2,\n              south$2\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$7(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive$2([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [customField('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant$1(_sliderChangeEvent);\n    var isTouchEvent$2 = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange$3 = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue$2 = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$2(xValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(min));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(max));\n    };\n    var moveBy$2 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$2(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$a(thumb.element) / 2;\n      set$7(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1);\n    var onRight$2 = handleMovement$2(1);\n    var onUp$2 = Optional.none;\n    var onDown$2 = Optional.none;\n    var edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      var yValue = findValueOfOffset(spectrum, detail, value.top);\n      var val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    var moveBy = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var setToMax = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$a(thumb.element) / 2;\n      var thumbYRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$7(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft = handleMovement(-1, false);\n    var onRight = handleMovement(1, false);\n    var onUp = handleMovement(-1, true);\n    var onDown = handleMovement(1, true);\n    var edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch$2 = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), onDragStart),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var fieldsUpdate = generate$6('rgb-hex-update');\n    var sliderUpdate = generate$6('slider-update');\n    var paletteUpdate = generate$6('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$1 = 'form';\n    var schema$i = [field('formBehaviours', [Representing])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field: field,\n          record: constant$1(record)\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    var toResult = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$6('valid-input');\n    var invalidInput = generate$6('invalid-input');\n    var validatingInput = generate$6('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$7(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run$1(validInput, onValidInput),\n                run$1(invalidInput, onInvalidInput),\n                run$1(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each$1(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento$1 = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child$2(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento$1,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return has$2(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = value$1();\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = value$1();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$6.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.on(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(value);\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted('preprocess', identity$1),\n      defaulted('postprocess', identity$1)\n    ]);\n    var memento = function (mem, rawProcessors) {\n      var ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$4);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$7, set$5);\n    };\n    var memory = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$5.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each$1(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run$1('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragover', stopper),\n              run$1('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run$1(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$6('alloy-fake-before-tabstop');\n    var afterObject = generate$6('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$1().browser.isIE() || detect$1().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$8(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$8(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$3 = function (width, height) {\n      return resize$3(document.createElement('canvas'), width, height);\n    };\n    var clone = function (canvas) {\n      var tCanvas = create$3(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize$3 = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth$1 = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight$1 = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$3(getWidth$1(image), getHeight$1(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$2 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant$1(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant$1(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$2(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$2(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert$1 = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness$1 = complexAdjustableColorFilter(adjustBrightness);\n    var contrast$1 = complexAdjustableColorFilter(adjustContrast);\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen$1 = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma$1 = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth$1(image);\n      var sH = getHeight$1(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth$1(image);\n        var sH = getHeight$1(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$3(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate$1 = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$3(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip$1 = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$3(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$3(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$2 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert = function (ir) {\n      return invert$1(ir);\n    };\n    var sharpen = function (ir) {\n      return sharpen$1(ir);\n    };\n    var gamma = function (ir, value) {\n      return gamma$1(ir, value);\n    };\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorize$1(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness = function (ir, adjust) {\n      return brightness$1(ir, adjust);\n    };\n    var contrast = function (ir, adjust) {\n      return contrast$1(ir, adjust);\n    };\n    var flip = function (ir, axis) {\n      return flip$1(ir, axis);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return crop$1(ir, x, y, w, h);\n    };\n    var resize$1 = function (ir, w, h) {\n      return resize$2(ir, w, h);\n    };\n    var rotate = function (ir, angle) {\n      return rotate$1(ir, angle);\n    };\n\n    var renderIcon = function (iconName, iconsProvider, behaviours) {\n      return render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-tbtn__icon-wrap'\n        ],\n        behaviours: behaviours\n      }, iconsProvider);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, []);\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, [Replacing.config({})]);\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a;\n    var internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute$1(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a = {}, _a[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a);\n\n    var updateMenuText = generate$6('update-menu-text');\n    var updateMenuIcon = generate$6('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [prefix + '__select-chevron']\n      }, sharedBackstage.providers.icons);\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map$2(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArray(__spreadArray([], spec.dropdownBehaviours, true), [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ], false)),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator$1 = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has$2(item, 'getSubmenuItems');\n    };\n    var separator$2 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$1(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$1(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator$1(item)) {\n        return item;\n      } else {\n        var itemValue = get$e(item, 'value').getOrThunk(function () {\n          return generate$6('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$6('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$8(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-tbtn--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$3(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map$2(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], !spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], true), icon.isSome() ? ['tox-button--icon'] : [], true), spec.borderless ? ['tox-button--naked'] : [], true), extraClasses, true);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$f = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$f,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return has$2(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$6('ratio-event');\n      var makeIcon = function (iconName) {\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-lock-icon__' + iconName\n          ]\n        }, providersBackstage.icons);\n      };\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run$1(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run$1(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant$1(generate$6('undo'));\n    var redo = constant$1(generate$6('redo'));\n    var zoom = constant$1(generate$6('zoom'));\n    var back = constant$1(generate$6('back'));\n    var apply = constant$1(generate$6('apply'));\n    var swap = constant$1(generate$6('swap'));\n    var transform$1 = constant$1(generate$6('transform'));\n    var tempTransform = constant$1(generate$6('temp-transform'));\n    var transformApply = constant$1(generate$6('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform$1,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant$1('save-state');\n    var disable = constant$1('disable');\n    var enable = constant$1('enable');\n    var external = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable,\n      enable: enable\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$1(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip, 'h');\n      var verticalFlip = makeValueTransform(flip, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate, -90);\n      var clockwiseRotate = makeValueTransform(rotate, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant$1({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run$1(external.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run$1(external.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen);\n      var invertTransform = Optional.some(invert);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var isTouchEvent$1 = function (e) {\n      return isNonNullable(e.changedTouches);\n    };\n    var updateWithTouchData = function (e) {\n      if (isTouchEvent$1(e)) {\n        var keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (var i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var _a, _b, _c;\n      var eventOverlay;\n      var handleEvents = [];\n      var overlayEvents = [];\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var root = (_b = settings.root) !== null && _b !== void 0 ? _b : doc;\n      var sugarDoc = SugarElement.fromDom(doc);\n      var downButton;\n      var startX;\n      var startY;\n      var handleElement = SugarElement.fromDom(root.getElementById((_c = settings.handle) !== null && _c !== void 0 ? _c : id));\n      var start = function (e) {\n        var rawEvent = e.raw;\n        var docSize = getDocumentSize(doc);\n        updateWithTouchData(rawEvent);\n        e.prevent();\n        downButton = rawEvent.button;\n        startX = rawEvent.screenX;\n        startY = rawEvent.screenY;\n        var cursor = get$c(handleElement, 'cursor');\n        eventOverlay = SugarElement.fromTag('div', doc);\n        setAll(eventOverlay, {\n          'position': 'absolute',\n          'top': '0',\n          'left': '0',\n          'width': docSize.width + 'px',\n          'height': docSize.height + 'px',\n          'z-index': 2147483647 + '',\n          'opacity': '0.0001',\n          cursor: cursor\n        });\n        append$2(getBody(sugarDoc), eventOverlay);\n        overlayEvents.push(bind(sugarDoc, 'mousemove', drag), bind(sugarDoc, 'touchmove', drag), bind(sugarDoc, 'mouseup', stop), bind(sugarDoc, 'touchend', stop));\n        settings.start(rawEvent);\n      };\n      var drag = function (e) {\n        var rawEvent = e.raw;\n        updateWithTouchData(rawEvent);\n        if (rawEvent.button !== downButton) {\n          return stop(e);\n        }\n        rawEvent.deltaX = rawEvent.screenX - startX;\n        rawEvent.deltaY = rawEvent.screenY - startY;\n        e.prevent();\n        settings.drag(rawEvent);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e.raw);\n        each$1(overlayEvents, function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        remove$5(eventOverlay);\n        if (settings.stop) {\n          settings.stop(e.raw);\n        }\n      };\n      var destroy = function () {\n        each$1(overlayEvents.concat(handleEvents), function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        handleEvents = [];\n        if (isNonNullable(eventOverlay)) {\n          remove$5(eventOverlay);\n        }\n      };\n      handleEvents.push(bind(handleElement, 'mousedown', start), bind(handleElement, 'touchstart', start));\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$1 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var events = [];\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var container = SugarElement.fromDom(containerElm);\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x = startRect.x + deltaX * handle.deltaX;\n        var y = startRect.y + deltaY * handle.deltaY;\n        var w = Math.max(20, startRect.w + deltaX * handle.deltaW);\n        var h = Math.max(20, startRect.h + deltaY * handle.deltaH);\n        var rect = currentRect = global$4.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            root: getRootNode(container).dom,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        var cropContainer = SugarElement.fromTag('div');\n        setAll$1(cropContainer, {\n          id: id,\n          'class': prefix + 'croprect-container',\n          'role': 'grid',\n          'aria-dropeffect': 'execute'\n        });\n        append$2(container, cropContainer);\n        each$1(blockers, function (blocker) {\n          descendant(container, '#' + id).each(function (blockerElm) {\n            var cropBlocker = SugarElement.fromTag('div');\n            setAll$1(cropBlocker, {\n              'id': id + '-' + blocker,\n              'class': prefix + 'croprect-block',\n              'data-mce-bogus': 'all'\n            });\n            set$7(cropBlocker, 'display', 'none');\n            append$2(blockerElm, cropBlocker);\n          });\n        });\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id).each(function (handleElm) {\n            var cropHandle = SugarElement.fromTag('div');\n            setAll$1(cropHandle, {\n              'id': id + '-' + handle.name,\n              'aria-label': handle.label,\n              'aria-grabbed': 'false',\n              'data-mce-bogus': 'all',\n              'role': 'gridcell',\n              'tabindex': '-1',\n              'title': handle.label\n            });\n            add$1(cropHandle, [\n              prefix + 'croprect-handle',\n              prefix + 'croprect-handle-' + handle.name\n            ]);\n            set$7(cropHandle, 'display', 'none');\n            append$2(handleElm, cropHandle);\n          });\n        });\n        dragHelpers = map$2(handles, createDragHelper);\n        repaint(currentRect);\n        var handleFocus = function (e) {\n          set$8(e.target, 'aria-grabbed', e.raw.type === 'focus' ? 'true' : 'false');\n        };\n        var handleKeydown = function (e) {\n          var activeHandle;\n          each$1(handles, function (handle) {\n            if (get$d(e.target, 'id') === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.raw.keyCode) {\n          case global$2.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$2.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$2.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$2.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$2.ENTER:\n          case global$2.SPACEBAR:\n            e.prevent();\n            action();\n            break;\n          }\n        };\n        events.push(bind(container, 'focusin', handleFocus), bind(container, 'focusout', handleFocus), bind(container, 'keydown', handleKeydown));\n      };\n      var toggleVisibility = function (state) {\n        var selectors = __spreadArray(__spreadArray([], map$2(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }), true), map$2(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        }), true).join(',');\n        var elems = descendants(container, selectors);\n        if (state) {\n          each$1(elems, function (elm) {\n            return remove$6(elm, 'display');\n          });\n        } else {\n          each$1(elems, function (elm) {\n            return set$7(elm, 'display', 'none');\n          });\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, newRect) {\n          descendant(container, '#' + id + '-' + name).each(function (elm) {\n            setAll(elm, {\n              left: newRect.x + 'px',\n              top: newRect.y + 'px',\n              width: Math.max(0, newRect.w) + 'px',\n              height: Math.max(0, newRect.h) + 'px'\n            });\n          });\n        };\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id + '-' + handle.name).each(function (elm) {\n            setAll(elm, {\n              left: rect.w * handle.xMul + rect.x + 'px',\n              top: rect.h * handle.yMul + rect.y + 'px'\n            });\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        each$1(dragHelpers, function (helper) {\n          return helper.destroy();\n        });\n        dragHelpers = [];\n        each$1(events, function (e) {\n          return e.unbind();\n        });\n        events = [];\n      };\n      render();\n      var instance = __assign(__assign({}, global$3), {\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      });\n      return instance;\n    };\n    var CropRect = { create: create$1 };\n\n    var loadImage = function (image) {\n      return new global$c(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = api$1();\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll(bg.element, css);\n          });\n          cropRect.run(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$8(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          if (anyInSystem.getSystem().isConnected()) {\n            memContainer.getOpt(anyInSystem).map(function (panel) {\n              var aImg = external$2({ element: img });\n              Replacing.replaceAt(panel, 1, Optional.some(aImg));\n              var lastViewRect = viewRectState.get();\n              var viewRect = {\n                x: 0,\n                y: 0,\n                w: img.dom.naturalWidth,\n                h: img.dom.naturalHeight\n              };\n              viewRectState.set(viewRect);\n              var rect = global$4.inflate(viewRect, -20, -20);\n              rectState.set(rect);\n              if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n                zoomFit(panel, img);\n              }\n              repaintImg(panel, img);\n            });\n          }\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [\n                runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(cRect);\n                  });\n                }),\n                runOnDetached(function () {\n                  cropRect.clear();\n                })\n              ])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = value$1();\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().getOrThunk(blobState.get);\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(newTempState);\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$5.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.on(destroyState);\n        tempState.clear();\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(newState);\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url);\n        }).then(function () {\n          updateButtonUndoStates(anyInSystem);\n          swap();\n          unblock(anyInSystem);\n        }).catch(function (err) {\n          console.log(err);\n          if (anyInSystem.getSystem().isConnected()) {\n            unblock(anyInSystem);\n          }\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run$1(internal.undo(), undo),\n            run$1(internal.redo(), redo),\n            run$1(internal.zoom(), zoom),\n            run$1(internal.back(), back),\n            run$1(internal.apply(), apply),\n            run$1(internal.transform(), transform),\n            run$1(internal.tempTransform(), tempTransform),\n            run$1(internal.transformApply(), transformApply),\n            run$1(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has$2(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map$2(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant$1(noop),\n              getApi: constant$1({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$d(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$8(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map$2(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$e = function (detail, _spec) {\n      var options = map$2(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find$5(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$4(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$e\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map$2(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map$2(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map$2(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map$2(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant$1({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant$1({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$6 = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run$1(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$6\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$9 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$9\n    });\n\n    var setup$c = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$7({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$5(el);\n      var node = el.dom;\n      if (get$d(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    var make$3 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind$3(menus, function (menu) {\n              return filter$2(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map$2(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$4(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute$1(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run$1(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$g = constant$1([\n      option('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$k()).concat(sandboxFields()));\n    var parts$b = constant$1([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$1 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$1(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$1,\n      wrap: wrap,\n      pure: value,\n      value: value,\n      error: error,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$1 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map$2(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter$2(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map$2(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$6('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$8(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run$1(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run$1(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run$1(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return render$3(icon, {\n          tag: 'div',\n          classes: [\n            'tox-icon',\n            'tox-control-wrap__status-icon-' + name\n          ],\n          attributes: __assign({\n            'title': providersBackstage.translate(label),\n            'aria-live': 'polite'\n          }, errId.fold(function () {\n            return {};\n          }, function (id) {\n            return { id: id };\n          }))\n        }, providersBackstage.icons);\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$6('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$1(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                },\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity$1 },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$2 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$e(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$2(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$2(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$2(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$2(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$2(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$2(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$2(function (spec, backstage) {\n        return renderLabel(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$2(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$2(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$2(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$2(renderColorPicker),\n      dropzone: make$2(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$2(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$2(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$2(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$2(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$2(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagetools: make$2(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$2(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$2(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$e(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubbleSize = 12;\n      var overrides = { maxHeightFunction: expandable$1() };\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [northeast];\n            },\n            onLtr: function () {\n              return [northwest];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [southeast$2];\n            },\n            onLtr: function () {\n              return [southwest$2];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north];\n            },\n            onLtr: function () {\n              return [north];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$2];\n            },\n            onLtr: function () {\n              return [south$2];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          type: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor$1 = function (bodyElement) {\n      return function (element) {\n        return {\n          type: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors = function (editor) {\n      return function () {\n        return hasCustomColors$1(editor);\n      };\n    };\n    var getColors = function (editor) {\n      return function () {\n        return getColors$2(editor);\n      };\n    };\n    var getColorCols = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors(editor),\n        getColors: getColors(editor),\n        getColorCols: getColorCols(editor)\n      };\n    };\n\n    var isDraggableModal = function (editor) {\n      return function () {\n        return isDraggableModal$1(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has$2(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has$2(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has$2(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has$2(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each$1(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$8 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$6(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map$2(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), { getStyleItems: constant$1(newItems) });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains$2(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$8 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind$3(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$8(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind$3(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$8(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind$3(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim = global$5.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map$2(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$4(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$8.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$8.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return get$e(history, fileType).getOr([]);\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = get$e(history, fileType).getOr([]);\n      var itemsWithoutUrl = filter$2(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$5.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$7 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$e.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$8(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var setup$b = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var doc = getDocument();\n      var onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      var onTouchmove = bind(doc, 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind(doc, 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      var onMouseup = bind(doc, 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onContentMousedown = function () {\n        each$1(editor.editorManager.get(), function (loopEditor) {\n          if (editor !== loopEditor) {\n            loopEditor.fire('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      var onDismissPopups = function (event) {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$a = AlloyParts;\n    var partType = PartType;\n\n    var schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$9 = constant$1([itemsPart]);\n    var name = constant$1('CustomList');\n\n    var factory$d = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each$1(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each$1(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$d,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$c = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var setup$a = noop;\n    var isDocked$2 = never;\n    var getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append$2(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute$3).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPos().map(function (pos) {\n        return bounds(pos.bounds.x, pos.bounds.y, get$a(elem), get$b(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$c(elem, 'position') || 'static',\n        bounds: box\n      });\n    };\n    var revertToOriginal = function (elem, box, state) {\n      return state.getInitialPos().bind(function (position) {\n        state.clearInitialPos();\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box$1).getOrThunk(function () {\n            return box$1(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$e(position.style, 'left').map(function (_left) {\n            return box.x - offsetBox_1.x;\n          }), get$e(position.style, 'top').map(function (_top) {\n            return box.y - offsetBox_1.y;\n          }), get$e(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box.right;\n          }), get$e(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box = box$1(elem);\n      if (!isVisibleForModes(state.getModes(), box, viewport)) {\n        storePrior(elem, box, state);\n        var winBox = win();\n        var left = box.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config, state) {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, state, position) {\n      var isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      var method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, state, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$5 = function (dockInfo, dockState) {\n      return derive$2([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has(component.element, contextInfo.transitionClass)) {\n              remove$1(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run$1(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run$1(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$6 = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = value$1();\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$6\n    });\n\n    var Docking = create$7({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner$4(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$2(markerElement);\n      var markerHeight = get$b(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute$3(containerHeader);\n      var editorHeaderHeight = get$b(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains$2(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$2(elm) + (parseInt(get$c(elm, 'margin-top'), 10) || 0) + (parseInt(get$c(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$a(parentElem);\n          set$7(elm, 'width', parentWidth + 'px');\n          set$7(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner$4(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm);\n      }).each(function () {\n        return focus$3(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$9 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours = function (editor, sharedBackstage) {\n      var focusedElm = value$1();\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArray([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$2(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box = box$1(SugarElement.fromDom(container));\n              var boxHeight = box.height - headerHeight;\n              var topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds(box.x, topBound, box.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: function (comp) {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          lazyViewport: function (comp) {\n            var win$1 = win();\n            var offset = getStickyToolbarOffset(editor);\n            var top = win$1.y + (isDockedMode(comp, 'top') ? offset : 0);\n            var height = win$1.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n            return bounds(win$1.x, top, win$1.width, height);\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours, true);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredOf('items', oneOf([\n        arrOfObj([\n          requiredString('name'),\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArray([requiredString('type')], baseMenuButtonFields, true));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      requiredString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted('columns', 1),\n      requiredFunction('onAction'),\n      requiredFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var factory$b = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map$2(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), function (comp, se) {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$b,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$7(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$7(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$3 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$4 = function (slideConfig, slideState) {\n      return derive$2([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$4\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', function (elem) {\n            return get$a(elem) + 'px';\n          })\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', function (elem) {\n            return get$b(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$5 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$8({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Sliding = create$7({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var owner = 'container';\n    var schema$d = [field('slotBehaviours', [])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot: slot,\n          record: constant$1(record)\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    var make$1 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each$1(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$d(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$7(element, 'display', 'none');\n          set$8(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$8 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each$1(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map$2(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find$5(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find$5(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$6('FixSizeEvent');\n    var autoSize = generate$6('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$a(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run$1(fixSize, function (comp, se) {\n              set$7(comp.element, 'width', se.event.width);\n            }),\n            run$1(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var block = function (component, config, state, getBusySpec) {\n      set$8(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$4 = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Blocking = create$7({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$7(elem) };\n      return __assign({\n        tag: name$2(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var getBusySpec$1 = function (providerBackstage) {\n      return function (_root, _behaviours) {\n        return {\n          dom: {\n            tag: 'div',\n            attributes: {\n              'aria-label': providerBackstage.translate('Loading...'),\n              'tabindex': '0'\n            },\n            classes: ['tox-throbber__busy-spinner']\n          },\n          components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n        };\n      };\n    };\n    var focusBusyComponent = function (throbber) {\n      return Composing.getCurrent(throbber).each(function (comp) {\n        return focus$3(comp.element);\n      });\n    };\n    var toggleEditorTabIndex = function (editor, state) {\n      var tabIndexAttr = 'tabindex';\n      var dataTabIndexAttr = 'data-mce-' + tabIndexAttr;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(function (iframe) {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(function (tabIndex) {\n            return set$8(iframe, dataTabIndexAttr, tabIndex);\n          });\n          set$8(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(function (tabIndex) {\n            set$8(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    var toggleThrobber = function (editor, comp, state, providerBackstage) {\n      var element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        var throbberFocus = Composing.getCurrent(comp).exists(function (busyComp) {\n          return hasFocus(busyComp.element);\n        });\n        Blocking.unblock(comp);\n        set$7(element, 'display', 'none');\n        set$8(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Blocking.config({ focus: false }),\n          Composing.config({\n            find: function (comp) {\n              return head(comp.components());\n            }\n          })\n        ]),\n        components: []\n      };\n    };\n    var isFocusEvent = function (event) {\n      return event.type === 'focusin';\n    };\n    var isPasteBinTarget = function (event) {\n      if (isFocusEvent(event)) {\n        var node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$2).exists(function (targetElm) {\n          return has(targetElm, 'mce-pastebin');\n        });\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = value$1();\n      var stealFocus = function (e) {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', function () {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', function (e) {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.on(global$f.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$f.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    var generate$1 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant$1(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$1(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter$2(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map$2(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups$1 = function (toolbar, storedGroups) {\n      var bGroups = map$2(storedGroups, function (g) {\n        return premade(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh$2 = function (toolbar, detail, setOverflow) {\n      var builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$7(primary.element, 'visibility', 'hidden');\n      var groups = builtGroups.concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      var availableWidth = get$a(primary.element);\n      var overflows = partition(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$a(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$c()));\n    var parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var expandable = constant$1(function (element, available) {\n      setMax(element, Math.floor(available));\n    });\n\n    var schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y()\n    ]);\n    var parts$6 = constant$1([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts: layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    var setGroups = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    var parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$9\n    });\n\n    var buildGroups = function (comps) {\n      return map$2(comps, function (g) {\n        return premade(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh$2(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$8 = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$2,\n              southeast$2\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$2,\n              southwest$2\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$2,\n              northeast$2\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$2,\n              northwest$2\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$8,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    var parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh$2(toolbar, detail, function (groups) {\n          var builtGroups = map$2(groups, function (g) {\n            return premade(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$7 = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$7,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$2(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$2(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var factory$6 = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$a.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$6('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    var partToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    var partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    var partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    var partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    var partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map$2(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map$2(ts, function (g) {\n            return map$2(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind$3(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter$2(menubar, function (menuName) {\n        var isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$e(registry.menus, menuName).exists(function (menu) {\n            return has$2(menu, 'items');\n          });\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      var menus = map$2(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError = function (editor, err) {\n      return function () {\n        return fireSkinLoadError$1(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$c(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$b.DOM.styleSheetLoader);\n      } else {\n        return global$c.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$c.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          boundCallback.clear();\n        };\n      };\n    };\n    var onSetupEvent = function (editor, event, f) {\n      return function (api) {\n        var handleEvent = function () {\n          return f(api);\n        };\n        var init = function () {\n          f(api);\n          editor.on(event, handleEvent);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          editor.off(event, handleEvent);\n        };\n      };\n    };\n    var onActionToggleFormat$1 = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n    var onActionExecCommand = function (editor, command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind$3(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind$3(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map$2(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant$1(comp) };\n      };\n      var onSetup = onSetupEvent(editor, 'NodeChange', function (api) {\n        var comp = api.getComponent();\n        spec.updateText(comp);\n      });\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map$2(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec$4 = function (editor) {\n      var getMatchingValue = function () {\n        return find$5(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return Optional.none;\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(constant$1('left'), function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find$5(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$4(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$3 = function (editor) {\n      var systemFont = 'System Font';\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find$5(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          return someIf(isSystemFontStack(font), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(constant$1(font), function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$e(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$e(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find$5(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant$1(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(constant$1(size), function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        text: Optional.some('12pt'),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map$2(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find$5(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$1 = function (editor) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec = function (editor, dataset) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind$3(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var events$3 = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map$2(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive$2([\n        run$1(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var getState = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$3 = function () {\n      var cell = Cell(Optional.none());\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: cell.get,\n        set: cell.set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$3\n    });\n\n    var Reflecting = create$7({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$5 = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$6('aria');\n            set$8(descriptor.element, 'id', descriptorId);\n            set$8(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$a(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$6('focus-button');\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(iconName, providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run$1(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(iconName, providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$6('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$8(comp.element, 'aria-pressed', state);\n            descendant(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$1('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$e(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map$2(defaultToolbar, function (group) {\n        var items = filter$2(group.items, function (subItem) {\n          return has$2(buttons, subItem) || has$2(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter$2(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has$2(t, 'name') && has$2(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$e(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$e(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$e(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map$2(toolbarGroups, function (group) {\n        var items = bind$3(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter$2(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$1();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents$1 = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$7(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents$1(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$b.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(constant$1(0), function (tbar) {\n          return tbar.components().length > 1 ? get$b(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$b(container.element) - offset;\n          var targetBounds = box$1(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$b(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$8(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$c(body(), 'margin-left')).getOr(0);\n          return get$a(body()) - absolute$3(targetElm).left + bodyMargin;\n        });\n        set$7(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box$1(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$b(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$7(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$7(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$7(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$f.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      var delayedRender = function () {\n        return global$f.setEditorTimeout(editor, render, 0);\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', delayedRender);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          delayedRender();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute = function (memInput, original) {\n      return run$1(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var generateOne = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate = function (memInput, buttons, providersBackstage) {\n      var mementos = map$2(buttons, function (button) {\n        return record(generateOne(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map$2(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$6('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var isVerticalOverlap = function (a, b, threshold) {\n      if (threshold === void 0) {\n        threshold = 0.01;\n      }\n      return b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    };\n    var getRangeRect = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        var elm = isText$1(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$2).map(function (e) {\n          return e.dom.getBoundingClientRect();\n        }).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    var getSelectionBounds = function (editor) {\n      var rng = editor.selection.getRng();\n      var rect = getRangeRect(rng);\n      if (editor.inline) {\n        var scroll_1 = get$9();\n        return bounds(scroll_1.left + rect.left, scroll_1.top + rect.top, rect.width, rect.height);\n      } else {\n        var bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    var getAnchorElementBounds = function (editor, lastElement) {\n      return lastElement.filter(inBody).map(absolute$2).getOrThunk(function () {\n        return getSelectionBounds(editor);\n      });\n    };\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds, margin) {\n      var x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      var right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x: x,\n        width: right - x\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant(container, '.tox-editor-header').getOr(container);\n      var headerBox = box$1(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage, toolbarType, margin) {\n      if (margin === void 0) {\n        margin = 0;\n      }\n      var viewportBounds = getBounds$3(window);\n      var contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds, margin), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin), y = _b.y, bottom = _b.bottom;\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    var isEntireElementSelected = function (editor, elem) {\n      var rng = editor.selection.getRng();\n      var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    var preservePosition = function (elem, position, f) {\n      var currentPosition = getRaw(elem, 'position');\n      set$7(elem, 'position', position);\n      var result = f(elem);\n      currentPosition.each(function (pos) {\n        return set$7(elem, 'position', pos);\n      });\n      return result;\n    };\n    var shouldUseInsetLayouts = function (position) {\n      return position === 'node';\n    };\n    var determineInsetLayout = function (editor, contextbar, elem, data, bounds) {\n      var selectionBounds = getSelectionBounds(editor);\n      var isSameAnchorElement = data.lastElement().exists(function (prev) {\n        return eq(elem, prev);\n      });\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), function () {\n          var isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar));\n          return isOverlapping && !data.isReposition() ? flip$2 : preserve;\n        });\n      } else {\n        var yBounds = data.getMode() === 'fixed' ? bounds.y + get$9().top : bounds.y;\n        var contextbarHeight = get$b(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    var getAnchorSpec$2 = function (editor, mobile, data, position) {\n      var smartInsetLayout = function (elem) {\n        return function (anchor, element, bubbles, placee, bounds) {\n          var layout = determineInsetLayout(editor, placee, elem, data, bounds);\n          var newAnchor = __assign(__assign({}, anchor), {\n            y: bounds.y,\n            height: bounds.height\n          });\n          return __assign(__assign({}, layout(newAnchor, element, bubbles, placee, bounds)), { alwaysFit: true });\n        };\n      };\n      var getInsetLayouts = function (elem) {\n        return shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      };\n      var desktopAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northeast$2,\n            southeast$2,\n            northwest$2,\n            southwest$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northwest$2,\n            southwest$2,\n            northeast$2,\n            southeast$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      var mobileAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            south$2,\n            southeast$2,\n            southwest$2,\n            northeast$2,\n            northwest$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            south$2,\n            southwest$2,\n            southeast$2,\n            northwest$2,\n            northeast$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    var getAnchorLayout = function (editor, position, isTouch, data) {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$2];\n            },\n            onRtl: function () {\n              return [west$2];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter$2(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition$3(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter$2(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map$2(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find$5(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter$2(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, function (ancestorElem) {\n          if (isElement$2(ancestorElem)) {\n            var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n            var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars: toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each$1(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$6('forward-slide');\n    var backSlideEvent = generate$6('backward-slide');\n    var changeSlideEvent = generate$6('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$a(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$a(elem);\n              set$7(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$f.setTimeout(function () {\n                set$7(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, function (comp, _se) {\n              last$2(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last$2(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var transitionClass = 'tox-pop--transition';\n    var register$7 = function (editor, registryContextToolbars, sink, extras) {\n      var backstage = extras.backstage;\n      var sharedBackstage = backstage.shared;\n      var isTouch = detect$1().deviceType.isTouch;\n      var lastElement = value$1();\n      var lastTrigger = value$1();\n      var lastContextPosition = value$1();\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        var position = lastContextPosition.get().getOr('node');\n        var margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      var canLaunchToolbar = function () {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      var isSameLaunchElement = function (elem) {\n        return is$1(lift2(elem, lastElement.get(), eq), true);\n      };\n      var shouldContextToolbarHide = function () {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          var contextToolbarBounds = getBounds();\n          var anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds);\n        }\n      };\n      var close = function () {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        if (InlineView.isOpen(contextbar)) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$7(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextFormGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map$2(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        var anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: function () {\n            return is$1(lastTrigger.get(), 0);\n          },\n          getMode: function () {\n            return Positioning.getMode(sink);\n          }\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      var launchContext = function (toolbarApi, elem) {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var position = toolbarApi[0].position;\n        var anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor: anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, function () {\n          return Optional.some(getBounds());\n        });\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$7(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = last(function () {\n        if (!editor.hasFocus() || editor.removed) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          var scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, function (info) {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', function () {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, function (e) {\n          var scopes = getScopes();\n          get$e(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', function (_e) {\n          global$f.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    var register$6 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var registerController = function (editor, spec) {\n      var getMenuItems = function () {\n        var options = spec.getOptions(editor);\n        var initial = spec.getCurrent(editor).map(spec.hash);\n        var current = value$1();\n        return map$2(options, function (value) {\n          return {\n            type: 'togglemenuitem',\n            text: spec.display(value),\n            onSetup: function (api) {\n              var setActive = function (active) {\n                if (active) {\n                  current.on(function (oldApi) {\n                    return oldApi.setActive(false);\n                  });\n                  current.set(api);\n                }\n                api.setActive(active);\n              };\n              setActive(is$1(initial, spec.hash(value)));\n              var unbindWatcher = spec.watcher(editor, value, setActive);\n              return function () {\n                current.clear();\n                unbindWatcher();\n              };\n            },\n            onAction: function () {\n              return spec.setCurrent(editor, value);\n            }\n          };\n        });\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: function (callback) {\n          return callback(getMenuItems());\n        },\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    var lineHeightSpec = {\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: function (input) {\n        return normalise(input, [\n          'fixed',\n          'relative',\n          'empty'\n        ]).getOr(input);\n      },\n      display: identity$1,\n      watcher: function (editor, value, callback) {\n        return editor.formatter.formatChanged('lineheight', callback, false, { value: value }).unbind;\n      },\n      getCurrent: function (editor) {\n        return Optional.from(editor.queryCommandValue('LineHeight'));\n      },\n      setCurrent: function (editor, value) {\n        return editor.execCommand('LineHeight', false, value);\n      }\n    };\n    var languageSpec = function (editor) {\n      var settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(function (settings) {\n        return {\n          name: 'language',\n          text: 'Language',\n          icon: 'language',\n          getOptions: constant$1(settings),\n          hash: function (input) {\n            return isUndefined(input.customCode) ? input.code : input.code + '/' + input.customCode;\n          },\n          display: function (input) {\n            return input.title;\n          },\n          watcher: function (editor, value, callback) {\n            return editor.formatter.formatChanged('lang', callback, false, {\n              value: value.code,\n              customValue: value.customCode\n            }).unbind;\n          },\n          getCurrent: function (editor) {\n            var node = SugarElement.fromDom(editor.selection.getNode());\n            return closest$4(node, function (n) {\n              return Optional.some(n).filter(isElement$2).bind(function (ele) {\n                var codeOpt = getOpt(ele, 'lang');\n                return codeOpt.map(function (code) {\n                  var customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n                  return {\n                    code: code,\n                    customCode: customCode,\n                    title: ''\n                  };\n                });\n              });\n            });\n          },\n          setCurrent: function (editor, lang) {\n            return editor.execCommand('Lang', false, lang);\n          },\n          onToolbarSetup: function (api) {\n            var unbinder = unbindable();\n            api.setActive(editor.formatter.match('lang', {}, undefined, true));\n            unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n            return unbinder.clear;\n          }\n        };\n      });\n    };\n    var register$5 = function (editor) {\n      registerController(editor, lineHeightSpec);\n      languageSpec(editor).each(function (spec) {\n        return registerController(editor, spec);\n      });\n    };\n\n    var register$4 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var onSetupOutdentState = function (editor) {\n      return onSetupEvent(editor, 'NodeChange', function (api) {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    var register$3 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var onActionToggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: onActionToggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$5.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$2 = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var onSetupUndoRedoState = function (editor, type) {\n      return onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function (api) {\n        api.setDisabled(editor.mode.isReadOnly() || !editor.undoManager[type]());\n      });\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var register$1 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    var onSetupVisualAidState = function (editor) {\n      return onSetupEvent(editor, 'VisualAid', function (api) {\n        api.setActive(editor.hasVisual);\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var register = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    var setup$6 = function (editor, backstage) {\n      register$6(editor);\n      register$2(editor);\n      register$4(editor, backstage);\n      register$1(editor);\n      register$a(editor);\n      register(editor);\n      register$3(editor);\n      register$5(editor);\n    };\n\n    var nu = function (x, y) {\n      return {\n        type: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$b.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor = function (editor) {\n      return {\n        type: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n    var getAnchorSpec$1 = function (editor, e, anchorType) {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2,\n          north,\n          south,\n          northeast,\n          southeast,\n          northwest,\n          southwest\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2,\n          north,\n          south,\n          northwest,\n          southwest,\n          northeast,\n          southeast\n        ];\n      }\n    };\n    var bubbleSize = 12;\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$f.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var getAnchorSpec = function (editor, e, anchorType) {\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      var bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return __assign({\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        }\n      }, anchorSpec);\n    };\n    var show = function (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) {\n      var anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection'));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var detection = detect$1();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && anchorType !== 'node') {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter$2(patchPipeConfig(defaultItems), function (item) {\n          return has$2(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last$2(xs).filter(function (item) {\n        return !isSeparator(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$e(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var getAnchorType = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      var anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        var target = getSelectedElement(editor, e);\n        var selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    var setup$5 = function (editor, lazySink, backstage) {\n      var detection = detect$1();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var anchorType = getAnchorType(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform([\n        add(origin),\n        subtract(scroll)\n      ]), transform([subtract(scroll)]), transform([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform([]), transform([subtract(origin)]), transform([\n        add(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    var offset = adt.offset;\n    var absolute = adt.absolute;\n    var fixed = adt.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$d(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$8(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$8(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed$1) {\n        return fixed(fixed$1.left + delta.left, fixed$1.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo$1 = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo$1(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$7(root, 'z-index', zIndex);\n        });\n        remove$7(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$8(root, initialAttribute, zindex);\n        });\n        set$7(root, 'z-index', get$c(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    var schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity$1),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute$3(target);\n        return absolute(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp$1(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp$1(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), function () {\n        var fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$2(comp.element),\n        width: getOuter$1(comp.element)\n      };\n    };\n    var move = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive$2(__spreadArray([run$1(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState), true));\n      };\n    };\n\n    var init$2 = function (dragApi) {\n      return derive$2([\n        run$1(mousedown(), dragApi.forceDrop),\n        run$1(mouseup(), dragApi.drop),\n        run$1(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run$1(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$2 = function (dragConfig, dragState, updateStartState) {\n      return [run$1(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$5 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$2) })], false);\n\n    var init$1 = function (dragApi) {\n      return derive$2([\n        run$1(touchstart(), dragApi.forceDrop),\n        run$1(touchend(), dragApi.drop),\n        run$1(touchcancel(), dragApi.drop),\n        run$1(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    var events$1 = function (dragConfig, dragState, updateStartState) {\n      var blockerSingleton = value$1();\n      var stopBlocking = function (component) {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop = function () {\n            return stopBlocking(component);\n          };\n          var dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: function (event) {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$1(dragApi));\n          blockerSingleton.set(blocker);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    var schema$4 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$1) })], false);\n\n    var events = function (dragConfig, dragState, updateStartState) {\n      return __spreadArray(__spreadArray([], events$2(dragConfig, dragState, updateStartState), true), events$1(dragConfig, dragState, updateStartState), true);\n    };\n    var schema$3 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events) })], false);\n\n    var mouse = schema$5;\n    var touch = schema$4;\n    var mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$4 = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = value$1();\n      var finishCell = value$1();\n      var getTopLeftSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map$2(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map$2(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$7(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$1().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var isHidden = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map$2(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$b(container), get$a(container));\n      each(dimensions, function (val, dim) {\n        return set$7(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: { title: providersBackstage.translate('Resize') },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$e.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$3 = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$1();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$e.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$7(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq(body(), uiContainer) && get$c(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$7(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$e.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$b(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$7(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$7(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$7(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$6(editor, backstage);\n        setup$5(editor, lazySink, backstage);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$1(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$7(editor, contextToolbars, sink, { backstage: backstage });\n        setup$4(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$d(describedElement, 'id')).fold(function () {\n        var id = generate$6('dialog-describe');\n        set$8(describeElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$6('dialog-label');\n        set$8(labelElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$2 = constant$1([\n      required$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity$1 };\n    var parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = value$1();\n      var showDialog = function (dialog) {\n        dialogComp.set(dialog);\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.clear();\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$6('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArray(__spreadArray([], baseFooterButtonFields, true), [requiredString('text')], false);\n    var normalFooterButtonFields = __spreadArray([requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields, true);\n    var menuFooterButtonFields = __spreadArray([\n      requiredStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields, true);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      requiredString('type'),\n      requiredString('text'),\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      requiredString('icon'),\n      defaulted('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      requiredString('type'),\n      requiredString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      requiredString('type'),\n      requiredString('name'),\n      requiredString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      requiredString('type'),\n      requiredString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj([\n      requiredString('value'),\n      requiredString('text'),\n      requiredString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      requiredString('type'),\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([requiredOf('currentState', objOf([\n        required$1('blob'),\n        requiredString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      requiredString('text'),\n      requiredString('value')\n    ];\n    var listBoxNestedItemFields = [\n      requiredString('text'),\n      requiredArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        requiredString('text'),\n        requiredString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    var tableFields = [\n      requiredString('type'),\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      requiredString('value'),\n      defaulted('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field$1('items', 'items', required$2(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema = valueThunk(function () {\n      return choose$2('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      requiredString('type'),\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('tab-name');\n      }), string),\n      requiredString('title'),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var tabPanelFields = [\n      requiredString('type'),\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      requiredArrayOf('buttons', dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArray([requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields, true));\n    var urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter$2(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind$3(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [requiredOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map$2(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, identity$1);\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$3 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$a(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$6('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue()),\n        option('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    var schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$1 = constant$1([tabsPart]);\n\n    var factory$2 = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    var factory$1 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    var schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    var factory = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find$5(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$8(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find$5(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory: factory,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map$2(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$c(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$b(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$a(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$b(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$c(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$c(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$b(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$7(tabview, 'height', height + 'px');\n      if (!detect$1().browser.isIE()) {\n        set$7(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$7(tabview, 'height', '0');\n            set$7(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = value$1();\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$7(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$f.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run$1(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run$1(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$7(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(newHeight);\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$3);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map$2(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map$2(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$6('update-dialog');\n    var titleChannel = generate$6('update-title');\n    var bodyChannel = generate$6('update-body');\n    var footerChannel = generate$6('update-footer');\n    var bodySendMessageChannel = generate$6('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$9.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArray([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray(), true),\n        parts: {\n          blocker: {\n            dom: fromHtml('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArray([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$2(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours, true)),\n        eventOrder: __assign((_a = {}, _a[execute$5()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon']\n          }, providersBackstage.icons)],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog$1(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArray([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours, true),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map$2(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map$2(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run$1(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run$1(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })], false);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ], false);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup = function (compInSystem, footerButtons, buttonName) {\n      return find$5(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition$3(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map$2(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map$2(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData$1 = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData$1(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, function (v, k) {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: constant$1(dialog),\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$6('dialog-label');\n      var dialogContentId = generate$6('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute$5()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name$2(elem) !== 'button' || get$d(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: constant$1(dialog),\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$1(internalDialog.url, { base_uri: new global$1(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = unbindable();\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$1(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$2 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$1 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run$1(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$2(extras);\n      var confirmDialog = setup$1(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData(internalInitialData, dataValidator);\n          var inlineDialog = value$1();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArray([config('window-manager-inline-events', [run$1(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop), true)),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, premade(dialogUi.dialog), { anchor: anchor }, Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$g.add('silver', function (editor) {\n        var _a = setup$3(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","import Axios from '../config/axios';\nimport _ from 'lodash';\nimport uuid from 'uuid';\n\nconst defaultDescription = 'Image description';\n\nexport function handleImageUpload(blobInfo, success, failure, progress) {\n  const config = {\n    onUploadProgress: function onUploadProgress(event) {\n      progress(Math.round(event.loaded / event.total * 100));\n    }\n  };\n  let formData = new FormData();\n  formData.append('image', blobInfo.blob(), blobInfo.filename());\n  formData.append('name', blobInfo.name());\n  Axios.post('/image/', formData, config).then((response) => {\n    success(response.data.location);\n  }, (result) => failure(result, {remove: true}));\n}\n\nfunction firstInaccessibleImage(editor) {\n  let images = editor.getDoc().getElementsByTagName(\"IMG\");\n  for(let ii= 0; ii < images.length; ii++) {\n    let image = images[ii];\n    if (!image.alt) {\n      return image;\n    }\n  }\n  return null;\n}\n\nexport function checkAllyShip(editor) {\n  let tinymceEditor = editor;\n  editor.ui.registry.addToggleButton('checkAlly', {\n    text: 'Check Accessibility',\n    classes: \"a11y-check\",\n    onSetup: function(api) {\n      function handleChange() {\n        let inaccessible = !!firstInaccessibleImage(editor);\n        if (inaccessible) {\n          api.setActive(inaccessible);\n          api.setDisabled(false);\n        } else {\n          api.setActive(false);\n          api.setDisabled(true);\n        }\n      }\n      const dirtyWatcher = tinymceEditor.on('Dirty', handleChange);\n      const changeWatcher = tinymceEditor.on('change', handleChange);\n      return function() {\n        tinymceEditor.off('Dirty', dirtyWatcher);\n        tinymceEditor.off('change', changeWatcher);\n      };\n\n    },\n    onAction: function () {\n      let image = firstInaccessibleImage(editor);\n      if(image) {\n        tinymceEditor.execCommand('mceSelectNode', false, image);\n      }\n    }});\n}\n\nexport function imageAltContextForm(editor) {\n  function isImage (node) {\n    return node.nodeName.toLowerCase() === 'img';\n  }\n\n  editor.ui.registry.addContextForm('image-alt', {\n    launch: {\n      type: 'contextformtogglebutton',\n      icon: 'accessibility-check'\n    },\n    label: 'description',\n    predicate: isImage,\n    position: 'node',\n    initValue: function (arg) {\n      return editor.selection.getNode().alt || defaultDescription;\n    },\n    commands: [\n      {\n        type: 'contextformtogglebutton',\n        tooltip: 'Save',\n        icon: 'save',\n        primary: true,\n        onAction: function (formApi) {\n          var value = formApi.getValue();\n          if (value !== defaultDescription) {\n            editor.selection.getNode().alt = value;\n            editor.setDirty(false);\n            editor.setDirty(true);\n          }\n          formApi.hide();\n        }\n      },\n      {\n        type: 'contextformtogglebutton',\n        icon: 'image',\n        tooltip: 'More image options',\n        active: true,\n        onAction: function (formApi) {\n          formApi.hide();\n          editor.execCommand('mceImage');\n        }\n      }\n    ]\n  });\n}\n\n\nexport function installFootnotes(editor) {\n  function _isFootnoteRef(node) {\n    return node.classList.contains('footnote-ref');\n  }\n\n  function _isFootnoteBody(node) {\n    return node.classList.contains('footnote-label') || node.classList.contains('footnote-body');\n  }\n\n  function isFootnote(node) {\n    return node.classList.contains('footnote');\n  }\n\n\n  function getFootnoteNodePair(id) {\n    let refNode = editor.dom.get(`footnote-${id}-ref`);\n    let bodyNode = editor.dom.get(`footnote-${id}`);\n    return { refNode, bodyNode };\n  }\n\n  function footnoteIntegrity() {\n    // On nodechanges, search for every footnote, and make sure it's paired up properly to check for deletions.\n    let candidates = editor.dom.$('.footnote').filter((_,e) => !e.classList.contains('footnote-footer'));\n    // Association lists to maintain order\n    let refs = [];\n    let bodies = [];\n    for(let ii = 0; ii < candidates.length; ii++) {\n      let candidate = candidates[ii];\n      let id = getFootnoteId(candidate);\n      if(candidate.classList.contains('footnote-ref')) {\n        let mark = candidate.innerText;\n        refs.push({id,candidate,mark});\n      } else if (candidate.classList.contains('footnote-body')) {\n        let label = candidate.getElementsByClassName('footnote-label');\n        let mark;\n        if (!label || label.length == 0) {\n          if (candidate.innerText.trim() !== \"\") {\n            mark = '';\n            bodies.push({id,candidate,mark});\n          }\n        } else {\n          mark = label[0].innerText;\n          bodies.push({id,candidate,mark});\n        }\n\n      }\n    }\n\n    let refsById = _.chain(refs).groupBy('id').mapValues(x => x[0]).value();\n    let bodiesById = _.chain(bodies).groupBy('id').mapValues(x => x[0]).value();\n    let orphanedRefs = _.differenceBy(refs, bodies, 'id');\n    let orphanedBodies = _.differenceBy(bodies, refs, 'id');\n\n    // Delete the other half of orphaned Refs.\n    orphanedRefs.forEach(function({id, candidate}) {\n      editor.dom.remove(candidate);\n      _.unset(refsById, id);\n    });\n    orphanedBodies.forEach(function({id, candidate}) {\n      editor.dom.remove(candidate);\n      _.unset(bodiesById, id);\n    });\n\n    // Adjust marks if necessary\n    _.values(refsById).forEach(function({id, mark, candidate}) {\n      let bodyMark = bodiesById[id].mark;\n      if (mark !== bodyMark) {\n        let bodyDom = bodiesById[id].candidate;\n        let labelDom = bodyDom.getElementsByClassName('footnote-label');\n        if(! labelDom || labelDom.length == 0) {\n          if (bodyDom.firstChild) {\n            labelDom = editor.dom.createFragment(`<span class=\"footnote-label\" data-extra-export-offset=\"2\">${mark}</span>`);\n            bodyDom.firstChild.prepend(labelDom);\n          }\n        } else {\n          labelDom[0].innerText = mark;\n        }\n        // let dataMark = bodyDom.attributes['data-mark'];\n        // dataMark.value = mark;\n        // bodyDom.attributes.setNamedItem(dataMark);\n      }\n    });\n\n    // Clean up orphaned labels\n    let labelsDom = editor.dom.$('.footnote-label');\n    let labels = [];\n    for(let ii=0; ii < labelsDom.length; ii++) {\n      labels.push(labelsDom[ii]);\n    }\n    labels.forEach(label => {\n      let parent = label;\n      while (parent) {\n        if (parent.classList.contains('footnote-footer')) {\n          return;\n        }\n        parent = parent.parentElement;\n      }\n      editor.dom.remove(label);\n    });\n\n    // Ensure footnotes have at least one space\n    // So that the cursor doesn't jump to the start of a label\n    labelsDom = editor.dom.$('.footnote-label');\n    labels = [];\n    for(let ii=0; ii < labelsDom.length; ii++) {\n      labels.push(labelsDom[ii]);\n    }\n    labels.forEach(label => {\n      let parentText = label.parentElement.innerText;\n      if (parentText.trim() == label.innerText) {\n        let space = document.createTextNode(\" \");\n        label.parentElement.appendChild(space);\n        editor.selection.setCursorLocation(label.parentElement, parentText.length);\n      }\n    });\n\n    // Make sure selection isn't inside of label\n    if (editor.selection.getStart() == editor.selection.getEnd() && editor.selection.getStart().classList.contains('footnote-label')) {\n      let label = editor.selection.getStart();\n      editor.selection.setCursorLocation(label.parentElement, label.innerText.length);\n    }\n\n    // Move footer to bottom of page\n    let footer = editor.dom.$('.footnote-footer');\n    if(footer.length === 1) {\n      footer = footer[0];\n      if (footer !== footer.parentElement.lastElementChild) {\n        footer.parentElement.appendChild(footer);\n      }\n    }\n  }\n\n  function getFooter() {\n    let footnoteDiv = editor.dom.$(\".footnote-footer\");\n    if (footnoteDiv.length == 1) {\n      return footnoteDiv[0];\n    }\n    if(footnoteDiv.length > 1) {\n      console.error(\"Multiple footers present.\");\n      return null;\n    }\n\n    let footer = editor.dom.add(editor.getBody(), 'div', {class: 'footnote footnote-footer'}, '');\n    return footer;\n  }\n\n  function createFootnote(data) {\n    data.id = uuid();\n    let refHTML = `<span class=\"footnote footnote-ref\" data-custom-style=\"Footnote Reference\" id=\"footnote-${data.id}-ref\">${data.mark}</span>`;\n    let bodyNode = editor.dom.createFragment(`<div class=\"footnote footnote-body\" id=\"footnote-${data.id}\"><p><span class=\"footnote-label\" data-extra-export-offset=\"2\" data-custom-style=\"Footnote Text\" contenteditable=\"false\">${data.mark}</span>${data.footnote}</p></div>`);\n\n    let footer = getFooter();\n    footer.appendChild(bodyNode);\n    editor.execCommand(\"mceInsertContent\", false, refHTML);\n  }\n\n  function updateFootnote(data) {\n    let {refNode, bodyNode} = getFootnoteNodePair(data.id);\n    refNode.innerText = data.mark;\n    let bodyContent = editor.dom.createFragment(`<p><span class=\"footnote-label\" data-extra-export-offset=\"2\" data-custom-style=\"Footnote Text\" contenteditable=\"false\">${data.mark}</span>${data.footnote}</p>`);\n    while(bodyNode.firstChild) {bodyNode.firstChild.remove();}\n    bodyNode.appendChild(bodyContent);\n  }\n\n  function getFootnoteData(id) {\n    let {refNode, bodyNode} = getFootnoteNodePair(id);\n    let mark = refNode.innerText;\n    let redundantMark = bodyNode.firstChild.firstChild.innerText;\n    let footnote = bodyNode.innerText.substr(redundantMark.length).trim();\n    return {mark, footnote, id};\n  }\n\n  function getFootnoteId(node) {\n    let htmlID = node.id || node.parentElement.id;\n    if(htmlID) {\n      return htmlID.substr(9,36);\n    }\n    return null;\n  }\n\n  function openDialog() {\n    let currentNode = editor.selection.getNode();\n    let isEditingNode = isFootnote(currentNode);\n    let nextFootnote = editor.dom.$(\".footnote-ref\").length + 1;\n    let currentData = {mark: \"\"+nextFootnote, footnote: \"\"};\n\n    if(isEditingNode) {\n      let id = getFootnoteId(currentNode);\n      currentData = getFootnoteData(id);\n    }\n    editor.windowManager.open({\n      title: 'Footnote',\n      size: 'normal',\n      body: {\n        type: 'panel',\n        items : [\n          {\n            label: 'Mark',\n            type: 'input',\n            name: 'mark'\n          },\n          {\n            label: 'Footnote',\n            type:'textarea',\n            name: 'footnote',\n            multiline: true,\n            minWidth: 520,\n            minHeight: 100,\n          }\n        ],\n      },\n      buttons: [\n        {\n          type: 'cancel',\n          name: 'cancel',\n          text: 'Cancel'\n        },\n        {\n          type: 'submit',\n          name: 'save',\n          text: 'Save',\n          primary: true\n        },\n        {\n          type: 'custom',\n          name: 'delete',\n          text: 'Delete'\n        }\n      ],\n      initialData: currentData,\n      onSubmit: function (dialog) {\n        let data = dialog.getData();\n        if (isEditingNode) {\n          data.id = currentData.id;\n          updateFootnote(data);\n        } else {\n          createFootnote(data);\n        }\n        dialog.close();\n      },\n      onCancel: function(dialog) {\n        dialog.close();\n      },\n      onAction: function(dialog, details) {\n        if (details && details.name == \"delete\") {\n          let {refNode, bodyNode} = getFootnoteNodePair(currentData.id);\n          refNode.remove();\n          bodyNode.remove();\n        }\n        dialog.close();\n      }\n    });\n  }\n\n  var Dialog = { open: openDialog };\n\n  editor.ui.registry.addToggleButton('footnote', {\n    text: 'Footnote',\n    tooltip : 'Footnote',\n    onAction: function () {\n      return editor.execCommand('openFootnote');\n    }\n  });\n  editor.ui.registry.addMenuItem('footnote', {\n    text: 'Footnote',\n    onAction: function () {\n      return editor.execCommand('openFootnote');\n    }\n  });\n  editor.addCommand('openFootnote', function () {\n    Dialog.open(editor);\n  });\n\n  editor.on(\"NodeChange\", function(e) {\n    footnoteIntegrity();\n  });\n}\n\n\n\nexport function getInitConfig(selector, enhanced, code) {\n\n  const semanticStyles = 'img[alt=\"\"] {outline: 4px solid red;}.footnote-ref {font-size: 16px;vertical-align: super;}.footnote-body {margin-left: 2rem;}.footnote-label {float:left;margin-left:-1rem;} .footnote-label::after{content: \".\";} .footnote-footer {border-top: 1px solid black;clear:both;}.image-center-large{width:80%;object-fit:contain;margin:0auto;display:block;}.image-center-medium{width:50%;object-fit:contain;margin:0 auto;display:block;}.image-left-medium{width:50%;object-fit:contain;margin:0 2rem;float:left;display:block;}.image-right-medium{width:50%;object-fit:contain;margin:0 2rem;float:right;display:block;}';\n\n  let plugins = ['link', 'lists', 'image', 'table', 'paste'];\n  // toolbar options: https://www.tiny.cloud/docs/advanced/editor-control-identifiers/#toolbarcontrols\n\n  let toolbar = 'undo redo removeformat | styleselect | h1 h2 | bold italic underline | numlist bullist indent outdent | table blockquote link image removeformat';\n  if (enhanced) {\n    toolbar += ' media footnote | checkAlly';\n    plugins.push('media');\n  }\n  if (code){\n    plugins.push('code');\n    toolbar += ' | code';\n  }\n\n  let extend_valid_elements = [['div', ['class', 'title', 'style', 'tabindex', 'id', 'class', 'data-custom-style']],\n                               ['span', ['class', 'title', 'style', 'tabindex', 'id', 'class', 'data-custom-style'],\n                                ['img', ['class', 'alt', 'title', 'id', 'data-custom-style']]]]\n      .map(x => `${x[0]}[${x[1].join('|')}]`)\n      .join(',');\n\n  let image_class_list = [{title: 'Large centered', value: 'image-center-large'},\n                          {title: 'Center aligned', value: 'image-center-medium'},\n                          {title: 'Left aligned', value: 'image-left-medium'},\n                          {title: 'Right aligned', value: 'image-right-medium'}\n                         ];\n  let config = {\n    height:'25vh',\n    plugins: plugins,\n    skin_url: '/static/tinymce_skin',\n    content_style: semanticStyles,\n    menubar: false,\n    branding: false,\n    toolbar: toolbar,\n    image_uploadtab: enhanced,\n    images_upload_handler: handleImageUpload,\n    images_upload_credentials: true,\n    image_dimensions: false,\n    image_class_list: image_class_list,\n    automatic_uploads: true,\n    contextmenu_never_use_native: false,\n    contextmenu:false,\n    paste_auto_cleanup_on_paste : true,\n    paste_remove_styles: true,\n    paste_remove_styles_if_webkit: true,\n    paste_strip_class_attributes: \"all\",\n    // image URLs\n    relative_urls: false,\n    convert_urls: false,\n    remove_script_host : false,\n    media_dimensions: false,\n    extended_valid_elements: extend_valid_elements,\n    setup: (editor) => {\n      if (enhanced) {\n        installFootnotes(editor);\n        checkAllyShip(editor);\n        imageAltContextForm(editor);\n      }\n    }\n  };\n\n  if (selector) {\n    config.selector = selector;\n  }\n  return config;\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$1 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var get$1 = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$1(xs, 0);\n    };\n    var last = function (xs) {\n      return get$1(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$2(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$2(0, 0);\n    };\n    var nu$2 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$2,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$1(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$1(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$1 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var ELEMENT = 1;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is$2;\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var keys = Object.keys;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType(ELEMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone$1 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n\n    var before$1 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n\n    var before = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$1(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone$1(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before$1(original, nu);\n      var children$1 = children(original);\n      append(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var matchNodeName = function (name) {\n      return function (node) {\n        return node && node.nodeName.toLowerCase() === name;\n      };\n    };\n    var matchNodeNames = function (regex) {\n      return function (node) {\n        return node && regex.test(node.nodeName);\n      };\n    };\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = matchNodeNames(/^(OL|UL|DL)$/);\n    var isOlUlNode = matchNodeNames(/^(OL|UL)$/);\n    var isOlNode = matchNodeName('ol');\n    var isListItemNode = matchNodeNames(/^(LI|DT|DD)$/);\n    var isDlItemNode = matchNodeNames(/^(DT|DD)$/);\n    var isTableCellNode = matchNodeNames(/^(TH|TD)$/);\n    var isBr = matchNodeName('br');\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      return dom.isBlock(node.nextSibling) && !isBr(node.previousSibling);\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var blockName = getForcedRootBlock(editor);\n      var node, textBlock, hasContentNode;\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === blockName.toUpperCase()) {\n          dom.setAttribs(textBlock, getForcedRootBlockAttrs(editor));\n        }\n        if (!isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!blockName) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var DOM$2 = global$3.DOM;\n    var splitList = function (editor, list, li) {\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$2.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$2.remove(targetNode);\n      };\n      var bookmarks = DOM$2.select('span[data-mce-type=\"bookmark\"]', list);\n      var newBlock = createTextBlock(editor, li);\n      var tmpRng = DOM$2.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(list);\n      var fragment = tmpRng.extractContents();\n      for (var node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$2.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$2.insertAfter(fragment, list);\n      }\n      DOM$2.insertAfter(newBlock, list);\n      if (isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM$2.remove(li);\n      if (isEmpty(editor.dom, list)) {\n        DOM$2.remove(list);\n      }\n    };\n\n    var isDescriptionDetail = isTag('dd');\n    var isDescriptionTerm = isTag('dt');\n    var outdentDlItem = function (editor, item) {\n      if (isDescriptionDetail(item)) {\n        mutate(item, 'dt');\n      } else if (isDescriptionTerm(item)) {\n        parent(item).each(function (dl) {\n          return splitList(editor, dl.dom, item.dom);\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (isDescriptionTerm(item)) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each$1(dlItems, indentDlItem);\n      } else {\n        each$1(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$6.getNode(container, offset);\n      if (isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor, node) {\n      var selectionStart = node || editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return filter$1(parentList.querySelectorAll('ol,ul,dl'), isListNode);\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return filter$1(selectedBlocks, function (elm) {\n          return isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$2.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$1.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return filter$1(findParentListItemsNodes(editor, selectedBlocks), isListItemNode);\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter$1(getSelectedListItems(editor), isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      return parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter$1(editor.selection.getSelectedBlocks(), isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$1.unique(listRoots);\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$1(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n\n    var joinSegment = function (parent, child) {\n      append$1(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: SugarElement.fromTag(listType, scope),\n        item: SugarElement.fromTag('li', scope)\n      };\n      append$1(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = SugarElement.fromTag('li', scope);\n      setAll(item, attr);\n      append(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append$1(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).exists(isList);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).exists(isList);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          dirty: false,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone$1(li),\n          listAttributes: clone$1(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n      entry.dirty = true;\n    };\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = __assign({}, source.listAttributes);\n    };\n    var cleanListProperties = function (entry) {\n      entry.listAttributes = filter(entry.listAttributes, function (_value, key) {\n        return key !== 'start';\n      });\n    };\n    var closestSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      var matches = function (entry) {\n        return entry.depth === depth && !entry.dirty;\n      };\n      var until = function (entry) {\n        return entry.depth < depth;\n      };\n      return findUntil(reverse(entries.slice(0, start)), matches, until).orThunk(function () {\n        return findUntil(entries.slice(start + 1), matches, until);\n      });\n    };\n    var normalizeEntries = function (entries) {\n      each$1(entries, function (entry, i) {\n        closestSiblingEntry(entries, i).fold(function () {\n          if (entry.dirty) {\n            cleanListProperties(entry);\n          }\n        }, function (matchingEntry) {\n          return cloneListProperties(entry, matchingEntry);\n        });\n      });\n      return entries;\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return map(normalizedEntries, function (entry) {\n        var content = fromElements(entry.content);\n        return SugarElement.fromDom(createTextBlock(editor, content.dom));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return composeList(editor.contentDocument, normalizedEntries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).exists(isIndented);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each$1(filter$1(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(getSelectedListItems(editor), SugarElement.fromDom);\n      return lift2(find$1(selectedListItems, not(hasFirstChildList)), find$1(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each$1(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each$1(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom);\n        });\n        before(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(getSelectedListRoots(editor), SugarElement.fromDom);\n      var dlItems = map(getSelectedDlItems(editor), SugarElement.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$3.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var container = rng[start ? 'startContainer' : 'endContainer'];\n        var offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          var offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      var restoreEndPoint = function (start) {\n        var node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        var container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        var offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return normalizeRange(rng);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n    var listState = function (editor, listName, activate) {\n      var nodeChangeHandler = function (e) {\n        var inList = findUntil(e.parents, isListNode, isTableCellNode).filter(function (list) {\n          return list.nodeName === listName && !isCustomList(list);\n        }).isSome();\n        activate(inList);\n      };\n      var parents = editor.dom.getParents(editor.selection.getNode());\n      nodeChangeHandler({ parents: parents });\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$2.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$2.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$2.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [];\n      var dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$2.each(siblings, function (node) {\n        if (isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || isBr(node)) {\n          if (isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global.isBookmarkNode(node)) {\n          if (isListNode(nextSibling) || isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      var rng = editor.selection.getRng();\n      var listItemName = 'LI';\n      var root = getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      var bookmark = createBookmark(rng);\n      var selectedTextBlocks = getSelectedTextBlocks(editor, rng, root);\n      global$2.each(selectedTextBlocks, function (block) {\n        var listBlock;\n        var sibling = block.previousSibling;\n        var parent = block.parentNode;\n        if (!isListItemNode(parent)) {\n          if (sibling && isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n            listBlock = sibling;\n            block = dom.rename(block, listItemName);\n            sibling.appendChild(block);\n          } else {\n            listBlock = dom.create(listName);\n            block.parentNode.insertBefore(listBlock, block);\n            listBlock.appendChild(block);\n            block = dom.rename(block, listItemName);\n          }\n          removeStyles(dom, block, [\n            'margin',\n            'margin-right',\n            'margin-bottom',\n            'margin-left',\n            'margin-top',\n            'padding',\n            'padding-right',\n            'padding-bottom',\n            'padding-left',\n            'padding-top'\n          ]);\n          updateListWithDetails(dom, listBlock, detail);\n          mergeWithAdjacentLists(editor.dom, listBlock);\n        }\n      });\n      editor.selection.setRng(resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList$1 = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      var parentIsList = isListNode(parentList);\n      if (parentIsList && parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        applyList(editor, listName, detail);\n        var bookmark = createBookmark(editor.selection.getRng());\n        var allLists = parentIsList ? __spreadArray([parentList], lists, true) : lists;\n        global$2.each(allLists, function (elm) {\n          updateList$1(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = createBookmark(editor.selection.getRng());\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(resolveBookmark(bookmark));\n          applyList(editor, listName, detail);\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, _detail) {\n      var parentList = getParentList(editor);\n      var selectedSubLists = getSelectedSubLists(editor);\n      var detail = isObject(_detail) ? _detail : {};\n      if (selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n\n    var DOM = global$3.DOM;\n    var normalizeList = function (dom, list) {\n      var parentNode = list.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === list) {\n        var sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(list);\n          if (isEmpty(dom, parentNode)) {\n            DOM.remove(parentNode);\n          }\n        } else {\n          DOM.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (isListNode(parentNode)) {\n        var sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(list);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      var lists = global$2.grep(dom.select('ol,ul', element));\n      global$2.each(lists, function (list) {\n        normalizeList(dom, list);\n      });\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$6.getNode(node, offset);\n      }\n      var walker = new global$5(node, root);\n      if (isForward) {\n        if (isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node;\n      var targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var listNode;\n      var ul = fromElm.parentNode;\n      if (!isChildOfBody(dom, fromElm) || !isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      var node = toElm.lastChild;\n      if (node && isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains$1 = contains(SugarElement.fromDom(toElm), SugarElement.fromDom(fromElm));\n      var nestedLists = contains$1 ? dom.getParents(fromElm, isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each$1(nestedLists, function (list) {\n        if (isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi, 0);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && isEmpty(dom, ul)) {\n          return true;\n        }\n        var rng_1 = normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup$1 = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$4.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$4.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          backspaceDelete(editor, isForward);\n        }\n      };\n    };\n\n    var updateList = function (editor, update) {\n      var parentList = getParentList(editor);\n      editor.undoManager.transact(function () {\n        if (isObject(update.styles)) {\n          editor.dom.setStyles(parentList, update.styles);\n        }\n        if (isObject(update.attrs)) {\n          each(update.attrs, function (v, k) {\n            return editor.dom.setAttrib(parentList, k, v);\n          });\n        }\n      });\n    };\n\n    var parseAlphabeticBase26 = function (str) {\n      var chars = reverse(trim(str).split(''));\n      var values = map(chars, function (char, i) {\n        var charValue = char.toUpperCase().charCodeAt(0) - 'A'.charCodeAt(0) + 1;\n        return Math.pow(26, i) * charValue;\n      });\n      return foldl(values, function (sum, v) {\n        return sum + v;\n      }, 0);\n    };\n    var composeAlphabeticBase26 = function (value) {\n      value--;\n      if (value < 0) {\n        return '';\n      } else {\n        var remainder = value % 26;\n        var quotient = Math.floor(value / 26);\n        var rest = composeAlphabeticBase26(quotient);\n        var char = String.fromCharCode('A'.charCodeAt(0) + remainder);\n        return rest + char;\n      }\n    };\n    var isUppercase = function (str) {\n      return /^[A-Z]+$/.test(str);\n    };\n    var isLowercase = function (str) {\n      return /^[a-z]+$/.test(str);\n    };\n    var isNumeric = function (str) {\n      return /^[0-9]+$/.test(str);\n    };\n    var deduceListType = function (start) {\n      if (isNumeric(start)) {\n        return 2;\n      } else if (isUppercase(start)) {\n        return 0;\n      } else if (isLowercase(start)) {\n        return 1;\n      } else if (isEmpty$1(start)) {\n        return 3;\n      } else {\n        return 4;\n      }\n    };\n    var parseStartValue = function (start) {\n      switch (deduceListType(start)) {\n      case 2:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: start\n        });\n      case 0:\n        return Optional.some({\n          listStyleType: Optional.some('upper-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 1:\n        return Optional.some({\n          listStyleType: Optional.some('lower-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 3:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: ''\n        });\n      case 4:\n        return Optional.none();\n      }\n    };\n    var parseDetail = function (detail) {\n      var start = parseInt(detail.start, 10);\n      if (is(detail.listStyleType, 'upper-alpha')) {\n        return composeAlphabeticBase26(start);\n      } else if (is(detail.listStyleType, 'lower-alpha')) {\n        return composeAlphabeticBase26(start).toLowerCase();\n      } else {\n        return detail.start;\n      }\n    };\n\n    var open = function (editor) {\n      var currentList = getParentList(editor);\n      if (!isOlNode(currentList)) {\n        return;\n      }\n      editor.windowManager.open({\n        title: 'List Properties',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'input',\n              name: 'start',\n              label: 'Start list at number',\n              inputMode: 'numeric'\n            }]\n        },\n        initialData: {\n          start: parseDetail({\n            start: editor.dom.getAttrib(currentList, 'start', '1'),\n            listStyleType: Optional.some(editor.dom.getStyle(currentList, 'list-style-type'))\n          })\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var data = api.getData();\n          parseStartValue(data.start).each(function (detail) {\n            editor.execCommand('mceListUpdate', false, {\n              attrs: { start: detail.start === '1' ? '' : detail.start },\n              styles: { 'list-style-type': detail.listStyleType.getOr('') }\n            });\n          });\n          api.close();\n        }\n      });\n    };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = getParentList(editor);\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var registerDialog = function (editor) {\n      editor.addCommand('mceListProps', function () {\n        open(editor);\n      });\n    };\n    var register$2 = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      registerDialog(editor);\n      editor.addCommand('mceListUpdate', function (ui, detail) {\n        if (isObject(detail)) {\n          updateList(editor, detail);\n        }\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$4.TAB || global$4.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup = function (editor) {\n      if (shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      setup$1(editor);\n    };\n\n    var register$1 = function (editor) {\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!editor.hasPlugin('advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'OL', api.setActive);\n          }\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'UL', api.setActive);\n          }\n        });\n      }\n    };\n\n    var register = function (editor) {\n      var listProperties = {\n        text: 'List properties...',\n        icon: 'ordered-list',\n        onAction: function () {\n          return editor.execCommand('mceListProps');\n        },\n        onSetup: function (api) {\n          return listState(editor, 'OL', function (active) {\n            return api.setDisabled(!active);\n          });\n        }\n      };\n      editor.ui.registry.addMenuItem('listprops', listProperties);\n      editor.ui.registry.addContextMenu('lists', {\n        update: function (node) {\n          var parentList = getParentList(editor, node);\n          return isOlNode(parentList) ? ['listprops'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global$7.add('lists', function (editor) {\n        if (editor.hasPlugin('rtc', true) === false) {\n          setup(editor);\n          register$2(editor);\n        } else {\n          registerDialog(editor);\n        }\n        register$1(editor);\n        register(editor);\n        return get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativePush = Array.prototype.push;\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var getScripts = function (editor) {\n      return editor.getParam('media_scripts');\n    };\n    var getAudioTemplateCallback = function (editor) {\n      return editor.getParam('audio_template_callback');\n    };\n    var getVideoTemplateCallback = function (editor) {\n      return editor.getParam('video_template_callback');\n    };\n    var hasLiveEmbeds = function (editor) {\n      return editor.getParam('media_live_embeds', true);\n    };\n    var shouldFilterHtml = function (editor) {\n      return editor.getParam('media_filter_html', true);\n    };\n    var getUrlResolver = function (editor) {\n      return editor.getParam('media_url_resolver');\n    };\n    var hasAltSource = function (editor) {\n      return editor.getParam('media_alt_source', true);\n    };\n    var hasPoster = function (editor) {\n      return editor.getParam('media_poster', true);\n    };\n    var hasDimensions = function (editor) {\n      return editor.getParam('media_dimensions', true);\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.SaxParser');\n\n    var getVideoScriptMatch = function (prefixes, src) {\n      if (prefixes) {\n        for (var i = 0; i < prefixes.length; i++) {\n          if (src.indexOf(prefixes[i].filter) !== -1) {\n            return prefixes[i];\n          }\n        }\n      }\n    };\n\n    var DOM$1 = global$7.DOM;\n    var trimPx = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var getEphoxEmbedData = function (attrs) {\n      var style = attrs.map.style;\n      var styles = style ? DOM$1.parseStyle(style) : {};\n      return {\n        type: 'ephox-embed-iri',\n        source: attrs.map['data-ephox-embed-iri'],\n        altsource: '',\n        poster: '',\n        width: get$1(styles, 'max-width').map(trimPx).getOr(''),\n        height: get$1(styles, 'max-height').map(trimPx).getOr('')\n      };\n    };\n    var htmlToData = function (prefixes, html) {\n      var isEphoxEmbed = Cell(false);\n      var data = {};\n      global$6({\n        validate: false,\n        allow_conditional_comments: true,\n        start: function (name, attrs) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            data = getEphoxEmbedData(attrs);\n          } else {\n            if (!data.source && name === 'param') {\n              data.source = attrs.map.movie;\n            }\n            if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {\n              if (!data.type) {\n                data.type = name;\n              }\n              data = global$8.extend(attrs.map, data);\n            }\n            if (name === 'script') {\n              var videoScript = getVideoScriptMatch(prefixes, attrs.map.src);\n              if (!videoScript) {\n                return;\n              }\n              data = {\n                type: 'script',\n                source: attrs.map.src,\n                width: String(videoScript.width),\n                height: String(videoScript.height)\n              };\n            }\n            if (name === 'source') {\n              if (!data.source) {\n                data.source = attrs.map.src;\n              } else if (!data.altsource) {\n                data.altsource = attrs.map.src;\n              }\n            }\n            if (name === 'img' && !data.poster) {\n              data.poster = attrs.map.src;\n            }\n          }\n        }\n      }).parse(html);\n      data.source = data.source || data.src || data.data;\n      data.altsource = data.altsource || '';\n      data.poster = data.poster || '';\n      return data;\n    };\n\n    var guess = function (url) {\n      var mimes = {\n        mp3: 'audio/mpeg',\n        m4a: 'audio/x-m4a',\n        wav: 'audio/wav',\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        swf: 'application/x-shockwave-flash'\n      };\n      var fileEnd = url.toLowerCase().split('.').pop();\n      var mime = mimes[fileEnd];\n      return mime ? mime : '';\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.Writer');\n\n    var DOM = global$7.DOM;\n    var addPx = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var setAttributes = function (attrs, updatedAttrs) {\n      each(updatedAttrs, function (val, name) {\n        var value = '' + val;\n        if (attrs.map[name]) {\n          var i = attrs.length;\n          while (i--) {\n            var attr = attrs[i];\n            if (attr.name === name) {\n              if (value) {\n                attrs.map[name] = value;\n                attr.value = value;\n              } else {\n                delete attrs.map[name];\n                attrs.splice(i, 1);\n              }\n            }\n          }\n        } else if (value) {\n          attrs.push({\n            name: name,\n            value: value\n          });\n          attrs.map[name] = value;\n        }\n      });\n    };\n    var updateEphoxEmbed = function (data, attrs) {\n      var style = attrs.map.style;\n      var styleMap = style ? DOM.parseStyle(style) : {};\n      styleMap['max-width'] = addPx(data.width);\n      styleMap['max-height'] = addPx(data.height);\n      setAttributes(attrs, { style: DOM.serializeStyle(styleMap) });\n    };\n    var sources = [\n      'source',\n      'altsource'\n    ];\n    var updateHtml = function (html, data, updateAll) {\n      var writer = global$4();\n      var isEphoxEmbed = Cell(false);\n      var sourceCount = 0;\n      var hasImage;\n      global$6({\n        validate: false,\n        allow_conditional_comments: true,\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            updateEphoxEmbed(data, attrs);\n          } else {\n            switch (name) {\n            case 'video':\n            case 'object':\n            case 'embed':\n            case 'img':\n            case 'iframe':\n              if (data.height !== undefined && data.width !== undefined) {\n                setAttributes(attrs, {\n                  width: data.width,\n                  height: data.height\n                });\n              }\n              break;\n            }\n            if (updateAll) {\n              switch (name) {\n              case 'video':\n                setAttributes(attrs, {\n                  poster: data.poster,\n                  src: ''\n                });\n                if (data.altsource) {\n                  setAttributes(attrs, { src: '' });\n                }\n                break;\n              case 'iframe':\n                setAttributes(attrs, { src: data.source });\n                break;\n              case 'source':\n                if (sourceCount < 2) {\n                  setAttributes(attrs, {\n                    src: data[sources[sourceCount]],\n                    type: data[sources[sourceCount] + 'mime']\n                  });\n                  if (!data[sources[sourceCount]]) {\n                    return;\n                  }\n                }\n                sourceCount++;\n                break;\n              case 'img':\n                if (!data.poster) {\n                  return;\n                }\n                hasImage = true;\n                break;\n              }\n            }\n          }\n          writer.start(name, attrs, empty);\n        },\n        end: function (name) {\n          if (!isEphoxEmbed.get()) {\n            if (name === 'video' && updateAll) {\n              for (var index = 0; index < 2; index++) {\n                if (data[sources[index]]) {\n                  var attrs = [];\n                  attrs.map = {};\n                  if (sourceCount <= index) {\n                    setAttributes(attrs, {\n                      src: data[sources[index]],\n                      type: data[sources[index] + 'mime']\n                    });\n                    writer.start('source', attrs, true);\n                  }\n                }\n              }\n            }\n            if (data.poster && name === 'object' && updateAll && !hasImage) {\n              var imgAttrs = [];\n              imgAttrs.map = {};\n              setAttributes(imgAttrs, {\n                src: data.poster,\n                width: data.width,\n                height: data.height\n              });\n              writer.start('img', imgAttrs, true);\n            }\n          }\n          writer.end(name);\n        }\n      }, global$5({})).parse(html);\n      return writer.getContent();\n    };\n\n    var urlPatterns = [\n      {\n        regex: /youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: 'www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: 'www.youtube.com/embed/$2?$4',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: 'www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: 'player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/(.*)\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: 'player.vimeo.com/video/$2?title=0&amp;byline=0',\n        allowFullscreen: true\n      },\n      {\n        regex: /maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: 'maps.google.com/maps/ms?msid=$2&output=embed\"',\n        allowFullscreen: false\n      },\n      {\n        regex: /dailymotion\\.com\\/video\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: 'www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /dai\\.ly\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: 'www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      }\n    ];\n    var getProtocol = function (url) {\n      var protocolMatches = url.match(/^(https?:\\/\\/|www\\.)(.+)$/i);\n      if (protocolMatches && protocolMatches.length > 1) {\n        return protocolMatches[1] === 'www.' ? 'https://' : protocolMatches[1];\n      } else {\n        return 'https://';\n      }\n    };\n    var getUrl = function (pattern, url) {\n      var protocol = getProtocol(url);\n      var match = pattern.regex.exec(url);\n      var newUrl = protocol + pattern.url;\n      var _loop_1 = function (i) {\n        newUrl = newUrl.replace('$' + i, function () {\n          return match[i] ? match[i] : '';\n        });\n      };\n      for (var i = 0; i < match.length; i++) {\n        _loop_1(i);\n      }\n      return newUrl.replace(/\\?$/, '');\n    };\n    var matchPattern = function (url) {\n      var patterns = urlPatterns.filter(function (pattern) {\n        return pattern.regex.test(url);\n      });\n      if (patterns.length > 0) {\n        return global$8.extend({}, patterns[0], { url: getUrl(patterns[0], url) });\n      } else {\n        return null;\n      }\n    };\n\n    var getIframeHtml = function (data) {\n      var allowFullscreen = data.allowfullscreen ? ' allowFullscreen=\"1\"' : '';\n      return '<iframe src=\"' + data.source + '\" width=\"' + data.width + '\" height=\"' + data.height + '\"' + allowFullscreen + '></iframe>';\n    };\n    var getFlashHtml = function (data) {\n      var html = '<object data=\"' + data.source + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" type=\"application/x-shockwave-flash\">';\n      if (data.poster) {\n        html += '<img src=\"' + data.poster + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" />';\n      }\n      html += '</object>';\n      return html;\n    };\n    var getAudioHtml = function (data, audioTemplateCallback) {\n      if (audioTemplateCallback) {\n        return audioTemplateCallback(data);\n      } else {\n        return '<audio controls=\"controls\" src=\"' + data.source + '\">' + (data.altsource ? '\\n<source src=\"' + data.altsource + '\"' + (data.altsourcemime ? ' type=\"' + data.altsourcemime + '\"' : '') + ' />\\n' : '') + '</audio>';\n      }\n    };\n    var getVideoHtml = function (data, videoTemplateCallback) {\n      if (videoTemplateCallback) {\n        return videoTemplateCallback(data);\n      } else {\n        return '<video width=\"' + data.width + '\" height=\"' + data.height + '\"' + (data.poster ? ' poster=\"' + data.poster + '\"' : '') + ' controls=\"controls\">\\n' + '<source src=\"' + data.source + '\"' + (data.sourcemime ? ' type=\"' + data.sourcemime + '\"' : '') + ' />\\n' + (data.altsource ? '<source src=\"' + data.altsource + '\"' + (data.altsourcemime ? ' type=\"' + data.altsourcemime + '\"' : '') + ' />\\n' : '') + '</video>';\n      }\n    };\n    var getScriptHtml = function (data) {\n      return '<script src=\"' + data.source + '\"></script>';\n    };\n    var dataToHtml = function (editor, dataIn) {\n      var data = global$8.extend({}, dataIn);\n      if (!data.source) {\n        global$8.extend(data, htmlToData(getScripts(editor), data.embed));\n        if (!data.source) {\n          return '';\n        }\n      }\n      if (!data.altsource) {\n        data.altsource = '';\n      }\n      if (!data.poster) {\n        data.poster = '';\n      }\n      data.source = editor.convertURL(data.source, 'source');\n      data.altsource = editor.convertURL(data.altsource, 'source');\n      data.sourcemime = guess(data.source);\n      data.altsourcemime = guess(data.altsource);\n      data.poster = editor.convertURL(data.poster, 'poster');\n      var pattern = matchPattern(data.source);\n      if (pattern) {\n        data.source = pattern.url;\n        data.type = pattern.type;\n        data.allowfullscreen = pattern.allowFullscreen;\n        data.width = data.width || String(pattern.w);\n        data.height = data.height || String(pattern.h);\n      }\n      if (data.embed) {\n        return updateHtml(data.embed, data, true);\n      } else {\n        var videoScript = getVideoScriptMatch(getScripts(editor), data.source);\n        if (videoScript) {\n          data.type = 'script';\n          data.width = String(videoScript.width);\n          data.height = String(videoScript.height);\n        }\n        var audioTemplateCallback = getAudioTemplateCallback(editor);\n        var videoTemplateCallback = getVideoTemplateCallback(editor);\n        data.width = data.width || '300';\n        data.height = data.height || '150';\n        global$8.each(data, function (value, key) {\n          data[key] = editor.dom.encode('' + value);\n        });\n        if (data.type === 'iframe') {\n          return getIframeHtml(data);\n        } else if (data.sourcemime === 'application/x-shockwave-flash') {\n          return getFlashHtml(data);\n        } else if (data.sourcemime.indexOf('audio') !== -1) {\n          return getAudioHtml(data, audioTemplateCallback);\n        } else if (data.type === 'script') {\n          return getScriptHtml(data);\n        } else {\n          return getVideoHtml(data, videoTemplateCallback);\n        }\n      }\n    };\n\n    var isMediaElement = function (element) {\n      return element.hasAttribute('data-mce-object') || element.hasAttribute('data-ephox-embed-iri');\n    };\n    var setup$2 = function (editor) {\n      editor.on('click keyup touchend', function () {\n        var selectedNode = editor.selection.getNode();\n        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {\n          if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {\n            selectedNode.setAttribute('data-mce-selected', '2');\n          }\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        var objectType = e.target.getAttribute('data-mce-object');\n        if (objectType === 'script') {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var target = e.target;\n        if (target.getAttribute('data-mce-object')) {\n          var html = target.getAttribute('data-mce-html');\n          if (html) {\n            html = unescape(html);\n            target.setAttribute('data-mce-html', escape(updateHtml(html, {\n              width: String(e.width),\n              height: String(e.height)\n            })));\n          }\n        }\n      });\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var cache = {};\n    var embedPromise = function (data, dataToHtml, handler) {\n      return new global$3(function (res, rej) {\n        var wrappedResolve = function (response) {\n          if (response.html) {\n            cache[data.source] = response;\n          }\n          return res({\n            url: data.source,\n            html: response.html ? response.html : dataToHtml(data)\n          });\n        };\n        if (cache[data.source]) {\n          wrappedResolve(cache[data.source]);\n        } else {\n          handler({ url: data.source }, wrappedResolve, rej);\n        }\n      });\n    };\n    var defaultPromise = function (data, dataToHtml) {\n      return global$3.resolve({\n        html: dataToHtml(data),\n        url: data.source\n      });\n    };\n    var loadedData = function (editor) {\n      return function (data) {\n        return dataToHtml(editor, data);\n      };\n    };\n    var getEmbedHtml = function (editor, data) {\n      var embedHandler = getUrlResolver(editor);\n      return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));\n    };\n    var isCached = function (url) {\n      return has(cache, url);\n    };\n\n    var extractMeta = function (sourceInput, data) {\n      return get$1(data, sourceInput).bind(function (mainData) {\n        return get$1(mainData, 'meta');\n      });\n    };\n    var getValue = function (data, metaData, sourceInput) {\n      return function (prop) {\n        var _a;\n        var getFromData = function () {\n          return get$1(data, prop);\n        };\n        var getFromMetaData = function () {\n          return get$1(metaData, prop);\n        };\n        var getNonEmptyValue = function (c) {\n          return get$1(c, 'value').bind(function (v) {\n            return v.length > 0 ? Optional.some(v) : Optional.none();\n          });\n        };\n        var getFromValueFirst = function () {\n          return getFromData().bind(function (child) {\n            return isObject(child) ? getNonEmptyValue(child).orThunk(getFromMetaData) : getFromMetaData().orThunk(function () {\n              return Optional.from(child);\n            });\n          });\n        };\n        var getFromMetaFirst = function () {\n          return getFromMetaData().orThunk(function () {\n            return getFromData().bind(function (child) {\n              return isObject(child) ? getNonEmptyValue(child) : Optional.from(child);\n            });\n          });\n        };\n        return _a = {}, _a[prop] = (prop === sourceInput ? getFromValueFirst() : getFromMetaFirst()).getOr(''), _a;\n      };\n    };\n    var getDimensions = function (data, metaData) {\n      var dimensions = {};\n      get$1(data, 'dimensions').each(function (dims) {\n        each$1([\n          'width',\n          'height'\n        ], function (prop) {\n          get$1(metaData, prop).orThunk(function () {\n            return get$1(dims, prop);\n          }).each(function (value) {\n            return dimensions[prop] = value;\n          });\n        });\n      });\n      return dimensions;\n    };\n    var unwrap = function (data, sourceInput) {\n      var metaData = sourceInput ? extractMeta(sourceInput, data).getOr({}) : {};\n      var get = getValue(data, metaData, sourceInput);\n      return __assign(__assign(__assign(__assign(__assign({}, get('source')), get('altsource')), get('poster')), get('embed')), getDimensions(data, metaData));\n    };\n    var wrap = function (data) {\n      var wrapped = __assign(__assign({}, data), {\n        source: { value: get$1(data, 'source').getOr('') },\n        altsource: { value: get$1(data, 'altsource').getOr('') },\n        poster: { value: get$1(data, 'poster').getOr('') }\n      });\n      each$1([\n        'width',\n        'height'\n      ], function (prop) {\n        get$1(data, prop).each(function (value) {\n          var dimensions = wrapped.dimensions || {};\n          dimensions[prop] = value;\n          wrapped.dimensions = dimensions;\n        });\n      });\n      return wrapped;\n    };\n    var handleError = function (editor) {\n      return function (error) {\n        var errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';\n        editor.notificationManager.open({\n          type: 'error',\n          text: errorMessage\n        });\n      };\n    };\n    var snippetToData = function (editor, embedSnippet) {\n      return htmlToData(getScripts(editor), embedSnippet);\n    };\n    var getEditorData = function (editor) {\n      var element = editor.selection.getNode();\n      var snippet = isMediaElement(element) ? editor.serializer.serialize(element, { selection: true }) : '';\n      return __assign({ embed: snippet }, htmlToData(getScripts(editor), snippet));\n    };\n    var addEmbedHtml = function (api, editor) {\n      return function (response) {\n        if (isString(response.url) && response.url.trim().length > 0) {\n          var html = response.html;\n          var snippetData = snippetToData(editor, html);\n          var nuData = __assign(__assign({}, snippetData), {\n            source: response.url,\n            embed: html\n          });\n          api.setData(wrap(nuData));\n        }\n      };\n    };\n    var selectPlaceholder = function (editor, beforeObjects) {\n      var afterObjects = editor.dom.select('*[data-mce-object]');\n      for (var i = 0; i < beforeObjects.length; i++) {\n        for (var y = afterObjects.length - 1; y >= 0; y--) {\n          if (beforeObjects[i] === afterObjects[y]) {\n            afterObjects.splice(y, 1);\n          }\n        }\n      }\n      editor.selection.select(afterObjects[0]);\n    };\n    var handleInsert = function (editor, html) {\n      var beforeObjects = editor.dom.select('*[data-mce-object]');\n      editor.insertContent(html);\n      selectPlaceholder(editor, beforeObjects);\n      editor.nodeChanged();\n    };\n    var submitForm = function (prevData, newData, editor) {\n      newData.embed = updateHtml(newData.embed, newData);\n      if (newData.embed && (prevData.source === newData.source || isCached(newData.source))) {\n        handleInsert(editor, newData.embed);\n      } else {\n        getEmbedHtml(editor, newData).then(function (response) {\n          handleInsert(editor, response.html);\n        }).catch(handleError(editor));\n      }\n    };\n    var showDialog = function (editor) {\n      var editorData = getEditorData(editor);\n      var currentData = Cell(editorData);\n      var initialData = wrap(editorData);\n      var handleSource = function (prevData, api) {\n        var serviceData = unwrap(api.getData(), 'source');\n        if (prevData.source !== serviceData.source) {\n          addEmbedHtml(win, editor)({\n            url: serviceData.source,\n            html: ''\n          });\n          getEmbedHtml(editor, serviceData).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n        }\n      };\n      var handleEmbed = function (api) {\n        var data = unwrap(api.getData());\n        var dataFromEmbed = snippetToData(editor, data.embed);\n        api.setData(wrap(dataFromEmbed));\n      };\n      var handleUpdate = function (api, sourceInput) {\n        var data = unwrap(api.getData(), sourceInput);\n        var embed = dataToHtml(editor, data);\n        api.setData(wrap(__assign(__assign({}, data), { embed: embed })));\n      };\n      var mediaInput = [{\n          name: 'source',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Source'\n        }];\n      var sizeInput = !hasDimensions(editor) ? [] : [{\n          type: 'sizeinput',\n          name: 'dimensions',\n          label: 'Constrain proportions',\n          constrain: true\n        }];\n      var generalTab = {\n        title: 'General',\n        name: 'general',\n        items: flatten([\n          mediaInput,\n          sizeInput\n        ])\n      };\n      var embedTextarea = {\n        type: 'textarea',\n        name: 'embed',\n        label: 'Paste your embed code below:'\n      };\n      var embedTab = {\n        title: 'Embed',\n        items: [embedTextarea]\n      };\n      var advancedFormItems = [];\n      if (hasAltSource(editor)) {\n        advancedFormItems.push({\n          name: 'altsource',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Alternative source URL'\n        });\n      }\n      if (hasPoster(editor)) {\n        advancedFormItems.push({\n          name: 'poster',\n          type: 'urlinput',\n          filetype: 'image',\n          label: 'Media poster (Image URL)'\n        });\n      }\n      var advancedTab = {\n        title: 'Advanced',\n        name: 'advanced',\n        items: advancedFormItems\n      };\n      var tabs = [\n        generalTab,\n        embedTab\n      ];\n      if (advancedFormItems.length > 0) {\n        tabs.push(advancedTab);\n      }\n      var body = {\n        type: 'tabpanel',\n        tabs: tabs\n      };\n      var win = editor.windowManager.open({\n        title: 'Insert/Edit Media',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var serviceData = unwrap(api.getData());\n          submitForm(currentData.get(), serviceData, editor);\n          api.close();\n        },\n        onChange: function (api, detail) {\n          switch (detail.name) {\n          case 'source':\n            handleSource(currentData.get(), api);\n            break;\n          case 'embed':\n            handleEmbed(api);\n            break;\n          case 'dimensions':\n          case 'altsource':\n          case 'poster':\n            handleUpdate(api, detail.name);\n            break;\n          }\n          currentData.set(unwrap(api.getData()));\n        },\n        initialData: initialData\n      });\n    };\n\n    var get = function (editor) {\n      var showDialog$1 = function () {\n        showDialog(editor);\n      };\n      return { showDialog: showDialog$1 };\n    };\n\n    var register$1 = function (editor) {\n      var showDialog$1 = function () {\n        showDialog(editor);\n      };\n      editor.addCommand('mceMedia', showDialog$1);\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var sanitize = function (editor, html) {\n      if (shouldFilterHtml(editor) === false) {\n        return html;\n      }\n      var writer = global$4();\n      var blocked;\n      global$6({\n        validate: false,\n        allow_conditional_comments: false,\n        comment: function (text) {\n          if (!blocked) {\n            writer.comment(text);\n          }\n        },\n        cdata: function (text) {\n          if (!blocked) {\n            writer.cdata(text);\n          }\n        },\n        text: function (text, raw) {\n          if (!blocked) {\n            writer.text(text, raw);\n          }\n        },\n        start: function (name, attrs, empty) {\n          blocked = true;\n          if (name === 'script' || name === 'noscript' || name === 'svg') {\n            return;\n          }\n          for (var i = attrs.length - 1; i >= 0; i--) {\n            var attrName = attrs[i].name;\n            if (attrName.indexOf('on') === 0) {\n              delete attrs.map[attrName];\n              attrs.splice(i, 1);\n            }\n            if (attrName === 'style') {\n              attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\n            }\n          }\n          writer.start(name, attrs, empty);\n          blocked = false;\n        },\n        end: function (name) {\n          if (blocked) {\n            return;\n          }\n          writer.end(name);\n        }\n      }, global$5({})).parse(html);\n      return writer.getContent();\n    };\n\n    var isLiveEmbedNode = function (node) {\n      var name = node.name;\n      return name === 'iframe' || name === 'video' || name === 'audio';\n    };\n    var getDimension = function (node, styles, dimension, defaultValue) {\n      if (defaultValue === void 0) {\n        defaultValue = null;\n      }\n      var value = node.attr(dimension);\n      if (isNonNullable(value)) {\n        return value;\n      } else if (!has(styles, dimension)) {\n        return defaultValue;\n      } else {\n        return null;\n      }\n    };\n    var setDimensions = function (node, previewNode, styles) {\n      var useDefaults = previewNode.name === 'img' || node.name === 'video';\n      var defaultWidth = useDefaults ? '300' : null;\n      var fallbackHeight = node.name === 'audio' ? '30' : '150';\n      var defaultHeight = useDefaults ? fallbackHeight : null;\n      previewNode.attr({\n        width: getDimension(node, styles, 'width', defaultWidth),\n        height: getDimension(node, styles, 'height', defaultHeight)\n      });\n    };\n    var appendNodeContent = function (editor, nodeName, previewNode, html) {\n      var newNode = global({\n        forced_root_block: false,\n        validate: false\n      }, editor.schema).parse(html, { context: nodeName });\n      while (newNode.firstChild) {\n        previewNode.append(newNode.firstChild);\n      }\n    };\n    var createPlaceholderNode = function (editor, node) {\n      var name = node.name;\n      var placeHolder = new global$2('img', 1);\n      placeHolder.shortEnded = true;\n      retainAttributesAndInnerHtml(editor, node, placeHolder);\n      setDimensions(node, placeHolder, {});\n      placeHolder.attr({\n        'style': node.attr('style'),\n        'src': global$1.transparentSrc,\n        'data-mce-object': name,\n        'class': 'mce-object mce-object-' + name\n      });\n      return placeHolder;\n    };\n    var createPreviewNode = function (editor, node) {\n      var name = node.name;\n      var previewWrapper = new global$2('span', 1);\n      previewWrapper.attr({\n        'contentEditable': 'false',\n        'style': node.attr('style'),\n        'data-mce-object': name,\n        'class': 'mce-preview-object mce-object-' + name\n      });\n      retainAttributesAndInnerHtml(editor, node, previewWrapper);\n      var styles = editor.dom.parseStyle(node.attr('style'));\n      var previewNode = new global$2(name, 1);\n      setDimensions(node, previewNode, styles);\n      previewNode.attr({\n        src: node.attr('src'),\n        style: node.attr('style'),\n        class: node.attr('class')\n      });\n      if (name === 'iframe') {\n        previewNode.attr({\n          allowfullscreen: node.attr('allowfullscreen'),\n          frameborder: '0'\n        });\n      } else {\n        var attrs = [\n          'controls',\n          'crossorigin',\n          'currentTime',\n          'loop',\n          'muted',\n          'poster',\n          'preload'\n        ];\n        each$1(attrs, function (attrName) {\n          previewNode.attr(attrName, node.attr(attrName));\n        });\n        var sanitizedHtml = previewWrapper.attr('data-mce-html');\n        if (isNonNullable(sanitizedHtml)) {\n          appendNodeContent(editor, name, previewNode, unescape(sanitizedHtml));\n        }\n      }\n      var shimNode = new global$2('span', 1);\n      shimNode.attr('class', 'mce-shim');\n      previewWrapper.append(previewNode);\n      previewWrapper.append(shimNode);\n      return previewWrapper;\n    };\n    var retainAttributesAndInnerHtml = function (editor, sourceNode, targetNode) {\n      var attribs = sourceNode.attributes;\n      var ai = attribs.length;\n      while (ai--) {\n        var attrName = attribs[ai].name;\n        var attrValue = attribs[ai].value;\n        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style') {\n          if (attrName === 'data' || attrName === 'src') {\n            attrValue = editor.convertURL(attrValue, attrName);\n          }\n          targetNode.attr('data-mce-p-' + attrName, attrValue);\n        }\n      }\n      var innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\n      if (innerHtml) {\n        targetNode.attr('data-mce-html', escape(sanitize(editor, innerHtml)));\n        targetNode.firstChild = null;\n      }\n    };\n    var isPageEmbedWrapper = function (node) {\n      var nodeClass = node.attr('class');\n      return nodeClass && /\\btiny-pageembed\\b/.test(nodeClass);\n    };\n    var isWithinEmbedWrapper = function (node) {\n      while (node = node.parent) {\n        if (node.attr('data-ephox-embed-iri') || isPageEmbedWrapper(node)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var placeHolderConverter = function (editor) {\n      return function (nodes) {\n        var i = nodes.length;\n        var node;\n        var videoScript;\n        while (i--) {\n          node = nodes[i];\n          if (!node.parent) {\n            continue;\n          }\n          if (node.parent.attr('data-mce-object')) {\n            continue;\n          }\n          if (node.name === 'script') {\n            videoScript = getVideoScriptMatch(getScripts(editor), node.attr('src'));\n            if (!videoScript) {\n              continue;\n            }\n          }\n          if (videoScript) {\n            if (videoScript.width) {\n              node.attr('width', videoScript.width.toString());\n            }\n            if (videoScript.height) {\n              node.attr('height', videoScript.height.toString());\n            }\n          }\n          if (isLiveEmbedNode(node) && hasLiveEmbeds(editor) && global$1.ceFalse) {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPreviewNode(editor, node));\n            }\n          } else {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPlaceholderNode(editor, node));\n            }\n          }\n        }\n      };\n    };\n\n    var setup$1 = function (editor) {\n      editor.on('preInit', function () {\n        var specialElements = editor.schema.getSpecialElements();\n        global$8.each('video audio iframe object'.split(' '), function (name) {\n          specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n        });\n        var boolAttrs = editor.schema.getBoolAttrs();\n        global$8.each('webkitallowfullscreen mozallowfullscreen allowfullscreen'.split(' '), function (name) {\n          boolAttrs[name] = {};\n        });\n        editor.parser.addNodeFilter('iframe,video,audio,object,embed,script', placeHolderConverter(editor));\n        editor.serializer.addAttributeFilter('data-mce-object', function (nodes, name) {\n          var i = nodes.length;\n          var node;\n          var realElm;\n          var ai;\n          var attribs;\n          var innerHtml;\n          var innerNode;\n          var realElmName;\n          var className;\n          while (i--) {\n            node = nodes[i];\n            if (!node.parent) {\n              continue;\n            }\n            realElmName = node.attr(name);\n            realElm = new global$2(realElmName, 1);\n            if (realElmName !== 'audio' && realElmName !== 'script') {\n              className = node.attr('class');\n              if (className && className.indexOf('mce-preview-object') !== -1) {\n                realElm.attr({\n                  width: node.firstChild.attr('width'),\n                  height: node.firstChild.attr('height')\n                });\n              } else {\n                realElm.attr({\n                  width: node.attr('width'),\n                  height: node.attr('height')\n                });\n              }\n            }\n            realElm.attr({ style: node.attr('style') });\n            attribs = node.attributes;\n            ai = attribs.length;\n            while (ai--) {\n              var attrName = attribs[ai].name;\n              if (attrName.indexOf('data-mce-p-') === 0) {\n                realElm.attr(attrName.substr(11), attribs[ai].value);\n              }\n            }\n            if (realElmName === 'script') {\n              realElm.attr('type', 'text/javascript');\n            }\n            innerHtml = node.attr('data-mce-html');\n            if (innerHtml) {\n              innerNode = new global$2('#text', 3);\n              innerNode.raw = true;\n              innerNode.value = sanitize(editor, unescape(innerHtml));\n              realElm.append(innerNode);\n            }\n            node.replace(realElm);\n          }\n        });\n      });\n      editor.on('SetContent', function () {\n        editor.$('span.mce-preview-object').each(function (index, elm) {\n          var $elm = editor.$(elm);\n          if ($elm.find('span.mce-shim').length === 0) {\n            $elm.append('<span class=\"mce-shim\"></span>');\n          }\n        });\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('ResolveName', function (e) {\n        var name;\n        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {\n          e.name = name;\n        }\n      });\n    };\n\n    var register = function (editor) {\n      var onAction = function () {\n        return editor.execCommand('mceMedia');\n      };\n      editor.ui.registry.addToggleButton('media', {\n        tooltip: 'Insert/edit media',\n        icon: 'embed',\n        onAction: onAction,\n        onSetup: function (buttonApi) {\n          var selection = editor.selection;\n          buttonApi.setActive(isMediaElement(selection.getNode()));\n          return selection.selectorChangedWithUnbind('img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]', buttonApi.setActive).unbind;\n        }\n      });\n      editor.ui.registry.addMenuItem('media', {\n        icon: 'embed',\n        text: 'Media...',\n        onAction: onAction\n      });\n    };\n\n    function Plugin () {\n      global$9.add('media', function (editor) {\n        register$1(editor);\n        register(editor);\n        setup(editor);\n        setup$1(editor);\n        setup$2(editor);\n        return get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"media\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/media')\n//   ES2015:\n//     import 'tinymce/plugins/media'\nrequire('./plugin.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getNonEditableClass = function (editor) {\n      return editor.getParam('noneditable_noneditable_class', 'mceNonEditable');\n    };\n    var getEditableClass = function (editor) {\n      return editor.getParam('noneditable_editable_class', 'mceEditable');\n    };\n    var getNonEditableRegExps = function (editor) {\n      var nonEditableRegExps = editor.getParam('noneditable_regexp', []);\n      if (nonEditableRegExps && nonEditableRegExps.constructor === RegExp) {\n        return [nonEditableRegExps];\n      } else {\n        return nonEditableRegExps;\n      }\n    };\n\n    var hasClass = function (checkClassName) {\n      return function (node) {\n        return (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n      };\n    };\n    var replaceMatchWithSpan = function (editor, content, cls) {\n      return function (match) {\n        var args = arguments, index = args[args.length - 2];\n        var prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          var findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            var tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    var convertRegExpsToNonEditable = function (editor, nonEditableRegExps, e) {\n      var i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    var setup = function (editor) {\n      var contentEditableAttrName = 'contenteditable';\n      var editClass = ' ' + global.trim(getEditableClass(editor)) + ' ';\n      var nonEditClass = ' ' + global.trim(getNonEditableClass(editor)) + ' ';\n      var hasEditClass = hasClass(editClass);\n      var hasNonEditClass = hasClass(nonEditClass);\n      var nonEditableRegExps = getNonEditableRegExps(editor);\n      editor.on('PreInit', function () {\n        if (nonEditableRegExps.length > 0) {\n          editor.on('BeforeSetContent', function (e) {\n            convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n          });\n        }\n        editor.parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (hasEditClass(node)) {\n              node.attr(contentEditableAttrName, 'true');\n            } else if (hasNonEditClass(node)) {\n              node.attr(contentEditableAttrName, 'false');\n            }\n          }\n        });\n        editor.serializer.addAttributeFilter(contentEditableAttrName, function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (!hasEditClass(node) && !hasNonEditClass(node)) {\n              continue;\n            }\n            if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n              node.name = '#text';\n              node.type = 3;\n              node.raw = true;\n              node.value = node.attr('data-mce-content');\n            } else {\n              node.attr(contentEditableAttrName, null);\n            }\n          }\n        });\n      });\n    };\n\n    function Plugin () {\n      global$1.add('noneditable', function (editor) {\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (editor.hasPlugin('powerpaste', true)) {\n        if (typeof window.console !== 'undefined' && window.console.log) {\n          window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    var get = function (clipboard) {\n      return { clipboard: clipboard };\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isArray = isType('array');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var repeat = function (s, count) {\n      return count <= 0 ? '' : new Array(count + 1).join(s);\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var getValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var getAllowHtmlDataUrls = function (editor) {\n      return editor.getParam('allow_html_data_urls', false, 'boolean');\n    };\n    var getPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false, 'boolean');\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter');\n    };\n    var getImagesReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename');\n    };\n    var getForcedRootBlock = function (editor) {\n      return editor.getParam('forced_root_block');\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs');\n    };\n    var getTabSpaces = function (editor) {\n      return editor.getParam('paste_tab_spaces', 4, 'number');\n    };\n    var getAllowedImageFileTypes = function (editor) {\n      var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n      return global$6.explode(editor.getParam('images_file_types', defaultImageFileTypes, 'string'));\n    };\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var internalHtmlMime = constant(internalMimeType);\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (var key in rootAttrs) {\n          if (has(rootAttrs, key)) {\n            attrs.push(key + '=\"' + global$5.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$6.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$6.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var nbsp = '\\xA0';\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var isRegExp = function (val) {\n      return val.constructor === RegExp;\n    };\n    var filter = function (content, items) {\n      global$6.each(items, function (v) {\n        if (isRegExp(v)) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    };\n    var innerText = function (html) {\n      var schema = global$1();\n      var domParser = global$4({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$6.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      var walk = function (node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      };\n      html = filter(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    };\n    var trimHtml = function (html) {\n      var trimSpaces = function (all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      };\n      html = filter(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    };\n    var createIdGenerator = function (prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    };\n    var getImageMimeType = function (ext) {\n      var lowerExt = ext.toLowerCase();\n      var mimeOverrides = {\n        jpg: 'jpeg',\n        jpe: 'jpeg',\n        jfi: 'jpeg',\n        jif: 'jpeg',\n        jfif: 'jpeg',\n        pjpeg: 'jpeg',\n        pjp: 'jpeg',\n        svg: 'svg+xml'\n      };\n      return global$6.hasOwn(mimeOverrides, lowerExt) ? 'image/' + mimeOverrides[lowerExt] : 'image/' + lowerExt;\n    };\n\n    var isWordContent = function (content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    };\n    var isNumericList = function (text) {\n      var found = false;\n      var patterns = [\n        /^[IVXLMCD]+\\.[ \\u00a0]/,\n        /^[ivxlmcd]+\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$6.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    };\n    var isBulletList = function (text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    };\n    var convertFakeListsToProperLists = function (node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      var getText = function (node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      };\n      var trimListStart = function (node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      };\n      var removeIgnoredNodes = function (node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      };\n      var convertParagraphToLi = function (paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$2(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      };\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    };\n    var filterStyles = function (editor, validStyles, node, styleValue) {\n      var outputStyles = {};\n      var styles = editor.dom.parseStyle(styleValue);\n      global$6.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          var matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$2('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$2('i', 1));\n      }\n      var outputStyle = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyle) {\n        return outputStyle;\n      }\n      return null;\n    };\n    var filterWordContent = function (editor, content) {\n      var validStyles;\n      var retainStyleProperties = getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$6.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          nbsp\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join(nbsp) : '';\n          }\n        ]\n      ]);\n      var validElements = getWordValidElements(editor);\n      var schema = global$1({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$6.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$4({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$3({ validate: getValidate(editor) }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess$1 = function (editor, content) {\n      return shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n\n    var preProcess = function (editor, html) {\n      var parser = global$4({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$6.each(nodes, function (node) {\n          node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$3({ validate: getValidate(editor) }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = isWordContent(html);\n      var content = isWordHtml ? preProcess$1(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n\n    var pasteHtml$1 = function (editor, html) {\n      editor.insertContent(html, {\n        merge: shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (editor, url) {\n      return isAbsoluteUrl(url) && exists(getAllowedImageFileTypes(editor), function (type) {\n        return endsWith(url.toLowerCase(), '.' + type.toLowerCase());\n      });\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(editor, html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$6.each([\n        linkSelection,\n        insertImage,\n        pasteHtml$1\n      ], function (action) {\n        return action(editor, html, pasteHtml$1) !== true;\n      });\n    };\n    var insertContent = function (editor, html, pasteAsText) {\n      if (pasteAsText || isSmartPasteEnabled(editor) === false) {\n        pasteHtml$1(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (editor, text) {\n      var tabSpace = repeat(' ', getTabSpaces(editor));\n      var normalizedText = text.replace(/\\t/g, tabSpace);\n      var result = foldl(normalizedText, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === normalizedText.length - 1 || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var doPaste = function (editor, content, internal, pasteAsText) {\n      var args = process(editor, content, internal);\n      if (args.cancelled === false) {\n        insertContent(editor, args.content, pasteAsText);\n      }\n    };\n    var pasteHtml = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false);\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(editor, encodedText);\n      var html = convert(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      return getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return {\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        };\n      } else {\n        return {\n          type: null,\n          data: null\n        };\n      }\n    };\n    var isValidDataUriImage = function (editor, imgElm) {\n      var filter = getImagesDataImgFilter(editor);\n      return filter ? filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);\n      return isNonNullable(m) ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var _a = parseDataUri(imageItem.uri), base64 = _a.data, type = _a.type;\n      var id = uniqueId();\n      var file = imageItem.blob;\n      var img = new Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0;\n        var existingBlobInfo = blobCache.getByData(base64, type);\n        if (!existingBlobInfo) {\n          var useFileName = getImagesReuseFilename(editor) && isNonNullable(file.name);\n          var name_1 = useFileName ? extractFilename(editor, file.name) : id;\n          var filename = useFileName ? file.name : undefined;\n          blobInfo = blobCache.create(id, file, base64, name_1, filename);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var isDataTransferItem = function (item) {\n      return isNonNullable(item.getAsFile);\n    };\n    var readFilesAsDataUris = function (items) {\n      return global$8.all(map(items, function (item) {\n        return new global$8(function (resolve) {\n          var blob = isDataTransferItem(item) ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      }));\n    };\n    var isImage = function (editor) {\n      var allowedExtensions = getAllowedImageFileTypes(editor);\n      return function (file) {\n        return startsWith(file.type, 'image/') && exists(allowedExtensions, function (extension) {\n          return getImageMimeType(extension) === file.type;\n        });\n      };\n    };\n    var getImagesFromDataTransfer = function (editor, dataTransfer) {\n      var items = dataTransfer.items ? bind(from(dataTransfer.items), function (item) {\n        return item.kind === 'file' ? [item.getAsFile()] : [];\n      }) : [];\n      var files = dataTransfer.files ? from(dataTransfer.files) : [];\n      return filter$1(items.length > 0 ? items : files, isImage(editor));\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (getPasteDataImages(editor) && dataTransfer) {\n        var images = getImagesFromDataTransfer(editor, dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readFilesAsDataUris(images).then(function (fileResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(fileResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$7.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePressed = value();\n      var keyboardPastePlainTextState;\n      editor.on('keyup', keyboardPastePressed.clear);\n      editor.on('keydown', function (e) {\n        var removePasteBinOnKeyUp = function (e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        };\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$a.webkit && navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          keyboardPastePressed.set(true);\n          if (global$a.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      var insertClipboardContent = function (editor, clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = trimHtml(content);\n        pasteBin.remove();\n        var isPlainTextHtml = internal === false && isPlainText(content);\n        var isAbsoluteUrl$1 = isAbsoluteUrl(content);\n        if (!content.length || isPlainTextHtml && !isAbsoluteUrl$1) {\n          plainTextMode = true;\n        }\n        if (plainTextMode || isAbsoluteUrl$1) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml(editor, content, internal);\n        }\n      };\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyboardPaste = keyboardPasteEvent.isSet() || keyboardPastePressed.isSet();\n        if (isKeyboardPaste) {\n          keyboardPasteEvent.clear();\n        }\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyboardPaste) {\n          e.preventDefault();\n        }\n        if (global$a.ie && (!isKeyboardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(editor, clipboardContent, isKeyboardPaste, plainTextMode, internal);\n        } else {\n          global$9.setEditorTimeout(editor, function () {\n            insertClipboardContent(editor, clipboardContent, isKeyboardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$a.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!getPasteDataImages(editor) && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!getAllowHtmlDataUrls(editor) && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$a.ie && editor.inline ? document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (_e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      lastRngCell.set(editor.selection.getRng());\n      var pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$a.ie || global$a.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      var pasteBinClones = global$6.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      var pasteBinElm = pasteBinClones.shift();\n      global$6.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      var dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (var i = dirtyWrappers.length - 1; i >= 0; i--) {\n        var cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: lastRng.get,\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n\n    var register$2 = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$a.iOS === false && typeof (clipboardData === null || clipboardData === void 0 ? void 0 : clipboardData.setData) === 'function';\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$9.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            if (global$a.browser.isChrome() || global$a.browser.isFirefox()) {\n              var rng_1 = editor.selection.getRng();\n              global$9.setEditorTimeout(editor, function () {\n                editor.selection.setRng(rng_1);\n                editor.execCommand('Delete');\n              }, 0);\n            } else {\n              editor.execCommand('Delete');\n            }\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup$2 = function (editor, clipboard, draggingInternallyState) {\n      if (shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        var dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$9.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (_e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n\n    var addPreProcessFilter = function (editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    };\n    var addPostProcessFilter = function (editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    };\n    var removeExplorerBrElementsAfterBlocks = function (editor, html) {\n      if (!isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$6.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    };\n    var removeWebKitStyles = function (editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = getWebkitStyles(editor);\n      var webKitStyles;\n      if (shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          var outputStyle = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyle) {\n            return before + ' style=\"' + outputStyle + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    };\n    var removeUnderlineAndFontInAnchor = function (editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    };\n    var setup = function (editor) {\n      if (global$a.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$a.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register = function (editor, clipboard) {\n      var onAction = function () {\n        return editor.execCommand('mceTogglePlainTextPaste');\n      };\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: onAction,\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction: onAction,\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n\n    function Plugin () {\n      global$b.add('paste', function (editor) {\n        if (hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          setup(editor);\n          register(editor, clipboard);\n          register$2(editor, clipboard);\n          setup$1(editor);\n          register$1(editor);\n          setup$2(editor, clipboard, draggingInternallyState);\n          return get(clipboard);\n        }\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$2 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$2(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$2(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none$2 = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none$2,\n        each: noop,\n        bind: none$2,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none$2();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none$2,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$1 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map$1 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$2 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$2(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$1 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten$1 = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$2 = function (xs, f) {\n      return flatten$1(map$1(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort$1 = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$d = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$d(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$d(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$2(group(1), group(2));\n    };\n    var detect$6 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$2(0, 0);\n    };\n    var nu$2 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$2,\n      detect: detect$6,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$1(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$5 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$1(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$5(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$5(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$1 = function (s) {\n      return !isNotEmpty(s);\n    };\n    var toFloat = function (value) {\n      var num = parseFloat(value);\n      return isNaN(num) ? Optional.none() : Optional.some(num);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$4 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$4 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$1(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$1(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$1(node);\n    };\n    var fromDom$1 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$1);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$1,\n      fromPoint: fromPoint$1\n    };\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$1 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$1(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is$2;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var size = function (obj) {\n      return keys(obj).length;\n    };\n    var get$c = function (obj, key) {\n      return has$1(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$1 = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$1(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains$2(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column, isLocked) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column,\n        isLocked: isLocked\n      };\n    };\n    var rowdetail = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetailnew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var elementnew = function (element, isNew, isLocked) {\n      return {\n        element: element,\n        isNew: isNew,\n        isLocked: isLocked\n      };\n    };\n    var rowcells = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n    var colgroup = function (element, columns) {\n      return {\n        element: element,\n        columns: columns\n      };\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type$1 = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type$1(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type$1(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType(ELEMENT);\n    var isText = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentElement = function (element) {\n      return Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children$3 = function (element) {\n      return map$1(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$3 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$3(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body$1 = function () {\n      return getBody$1(SugarElement.fromDom(document));\n    };\n    var getBody$1 = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors$4 = function (scope, predicate, isRoot) {\n      return filter$2(parents(scope, isRoot), predicate);\n    };\n    var children$2 = function (scope, predicate) {\n      return filter$2(children$3(scope), predicate);\n    };\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$2(children$3(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$3 = function (scope, selector, isRoot) {\n      return ancestors$4(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var children$1 = function (scope, selector) {\n      return children$2(scope, function (e) {\n        return is$2(e, selector);\n      });\n    };\n    var descendants = function (scope, selector) {\n      return all$1(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$2 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, predicate, isRoot);\n    };\n    var child$2 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$1(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var child$1 = function (scope, selector) {\n      return child$2(scope, function (e) {\n        return is$2(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$2 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, attrs) {\n      each$1(attrs, function (v, k) {\n        v.fold(function () {\n          remove$7(element, k);\n        }, function (value) {\n          rawSet(element.dom, k, value);\n        });\n      });\n    };\n    var get$b = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$b(element, key));\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$2 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n    var flatten = function (oot) {\n      return oot.bind(identity);\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$a = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw$2 = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is(getOpt(element, 'style').map(trim), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var copy$2 = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cellOrCol) {\n      if (isTag('col')(cellOrCol)) {\n        return getAttrValue(cellOrCol, 'span', 1) > 1;\n      } else {\n        return getSpan(cellOrCol, 'colspan') > 1;\n      }\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$a(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind$2(children$3(scope), function (x) {\n        if (is$2(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains$2(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is$2(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells$1 = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns$1 = function (ancestor) {\n      if (is$2(ancestor, 'colgroup')) {\n        return children$1(ancestor, 'col');\n      } else {\n        return bind$2(columnGroups(ancestor), function (columnGroup) {\n          return children$1(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows$1 = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$1(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map$1(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells = map$1(columns$1(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdetail(row, cells, 'colgroup');\n        } else {\n          var cells = map$1(cells$1(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdetail(row, cells, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable$1 = function (table) {\n      var rows = rows$1(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArray(__spreadArray([], columnGroups$1, true), rows, true);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var addCells = function (gridRow, index, cells) {\n      var existingCells = gridRow.cells;\n      var before = existingCells.slice(0, index);\n      var after = existingCells.slice(index);\n      var newCells = before.concat(cells).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var addCell = function (gridRow, index, cell) {\n      return addCells(gridRow, index, [cell]);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(gridRow.element, cells, gridRow.section, gridRow.isNew);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map$1(cells, f);\n      return rowcells(gridRow.element, r, gridRow.section, gridRow.isNew);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n    var clone$1 = function (gridRow, cloneRow, cloneCell) {\n      var newCells = map$1(gridRow.cells, cloneCell);\n      return rowcells(cloneRow(gridRow.element), newCells, gridRow.section, true);\n    };\n\n    var LOCKED_COL_ATTR = 'data-snooker-locked-cols';\n    var getLockedColumnsFromTable = function (table) {\n      return getOpt(table, LOCKED_COL_ATTR).bind(function (lockedColStr) {\n        return Optional.from(lockedColStr.match(/\\d+/g));\n      }).map(function (lockedCols) {\n        return mapToObject(lockedCols, always);\n      });\n    };\n    var getLockedColumnsFromGrid = function (grid) {\n      var locked = foldl(extractGridDetails(grid).rows, function (acc, row) {\n        each$2(row.cells, function (cell, idx) {\n          if (cell.isLocked) {\n            acc[idx] = true;\n          }\n        });\n        return acc;\n      }, {});\n      var lockedArr = mapToArray(locked, function (_val, key) {\n        return parseInt(key, 10);\n      });\n      return sort$1(lockedArr);\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      return Optional.from(warehouse.access[key(row, column)]);\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind$2(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter$2(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each$2(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range$1(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate$1 = function (list) {\n      var access = {};\n      var cells = [];\n      var tableOpt = head(list).map(function (rowData) {\n        return rowData.element;\n      }).bind(table);\n      var lockedColumns = tableOpt.bind(getLockedColumnsFromTable).getOr({});\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      var _a = partition(list, function (rowData) {\n          return rowData.section === 'colgroup';\n        }), colgroupRows = _a.pass, rows = _a.fail;\n      each$2(rows, function (rowData) {\n        var currentRow = [];\n        each$2(rowData.cells, function (rowCell) {\n          var start = 0;\n          while (access[key(rowCount, start)] !== undefined) {\n            start++;\n          }\n          var isLocked = hasNonNullableKey(lockedColumns, start.toString());\n          var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);\n          for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n            for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n              var rowPosition = rowCount + occupiedRowPosition;\n              var columnPosition = start + occupiedColumnPosition;\n              var newpos = key(rowPosition, columnPosition);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, columnPosition + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        maxRows++;\n        cells.push(rowdetail(rowData.element, currentRow, rowData.section));\n        rowCount++;\n      });\n      var _b = last$2(colgroupRows).map(function (rowData) {\n          var columns = generateColumns(rowData);\n          var colgroup$1 = colgroup(rowData.element, values(columns));\n          return {\n            colgroups: [colgroup$1],\n            columns: columns\n          };\n        }).getOrThunk(function () {\n          return {\n            colgroups: [],\n            columns: {}\n          };\n        }), columns = _b.columns, colgroups = _b.colgroups;\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns,\n        colgroups: colgroups\n      };\n    };\n    var fromTable = function (table) {\n      var list = fromTable$1(table);\n      return generate$1(list);\n    };\n    var justCells = function (warehouse) {\n      return bind$2(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable,\n      generate: generate$1,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox$1 = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy$1 = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts$1 = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map$1(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy$1(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts$1(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts$1(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox$1(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$5 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$3(parent, index).fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var wrap = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$2(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var after$4 = function (marker, elements) {\n      each$2(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after$5(e, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$2(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$2(children$3(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children = children$3(wrapper);\n      if (children.length > 0) {\n        before$3(wrapper, children);\n      }\n      remove$5(wrapper);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$9 = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n    var set = function (element, value) {\n      return api$2.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains$2(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains$2([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$b(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone$2(source);\n        setAll$1(destination, as);\n      };\n      var isSpecial = function (element) {\n        var tag = name(element);\n        return contains$2([\n          'script',\n          'noscript',\n          'iframe',\n          'noframes',\n          'noembed',\n          'title',\n          'style',\n          'textarea',\n          'xmp'\n        ], tag);\n      };\n      var getLanguage = function (element) {\n        return isElement(element) ? getOpt(element, 'lang') : Optional.none();\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor$2,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants,\n          predicate: descendants$1\n        }),\n        styles: constant({\n          get: get$a,\n          getRaw: getRaw$2,\n          set: set$1,\n          remove: remove$6\n        }),\n        attrs: constant({\n          get: get$b,\n          set: set$2,\n          remove: remove$7,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before$4,\n          after: after$5,\n          afterAll: after$4,\n          append: append$1,\n          appendAll: append,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$5\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children$3,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          isSpecial: isSpecial,\n          getLanguage: getLanguage,\n          getText: get$9,\n          setText: set,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find$1(pruned1, function (x) {\n        return exists(pruned2, eq(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne$1 = oneAll;\n    var ancestors$1 = ancestors$2;\n\n    var universe$3 = DomUniverse();\n    var sharedOne = function (look, elements) {\n      return sharedOne$1(universe$3, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors = function (start, finish, isRoot) {\n      return ancestors$1(universe$3, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains(startTable, finishTable)) {\n              var ancestorCells = ancestors$3(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains(finishTable, startTable)) {\n              var ancestorCells = ancestors$3(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$3(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$3(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve$1 = function (container, selector) {\n      var sels = descendants(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find$1(boxes, function (box) {\n        return is$2(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant(container, firstSelectedSelector).bind(function (first) {\n        return descendant(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve = function (container, selector) {\n      return retrieve$1(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$2(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var type = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata$2 = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type.none;\n    var multiple = type.multiple;\n    var single = type.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().fold(none$1, single);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone$2(original);\n      setAll$1(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children$3(deep(original));\n      append(nu, cloneChildren);\n      return nu;\n    };\n    var mutate$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before$4(original, nu);\n      var children = children$3(original);\n      append(nu, children);\n      remove$5(original);\n      return nu;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$a(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$a(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      return toFloat(px).getOr(fallback);\n    };\n    var getProp = function (element, name, fallback) {\n      return toNumber(get$a(element, name), fallback);\n    };\n    var getBoxSizing = function (element) {\n      return get$a(element, 'box-sizing');\n    };\n    var calcContentBoxSize = function (element, size, upper, lower) {\n      var paddingUpper = getProp(element, 'padding-' + upper, 0);\n      var paddingLower = getProp(element, 'padding-' + lower, 0);\n      var borderUpper = getProp(element, 'border-' + upper + '-width', 0);\n      var borderLower = getProp(element, 'border-' + lower + '-width', 0);\n      return size - paddingUpper - paddingLower - borderUpper - borderLower;\n    };\n    var getCalculatedHeight = function (element, boxSizing) {\n      var dom = element.dom;\n      var height = dom.getBoundingClientRect().height || dom.offsetHeight;\n      return boxSizing === 'border-box' ? height : calcContentBoxSize(element, height, 'top', 'bottom');\n    };\n    var getCalculatedWidth = function (element, boxSizing) {\n      var dom = element.dom;\n      var width = dom.getBoundingClientRect().width || dom.offsetWidth;\n      return boxSizing === 'border-box' ? width : calcContentBoxSize(element, width, 'left', 'right');\n    };\n    var getHeight$1 = function (element) {\n      return needManualCalc() ? getCalculatedHeight(element, getBoxSizing(element)) : getProp(element, 'height', element.dom.offsetHeight);\n    };\n    var getWidth = function (element) {\n      return needManualCalc() ? getCalculatedWidth(element, getBoxSizing(element)) : getProp(element, 'width', element.dom.offsetWidth);\n    };\n    var getInnerWidth = function (element) {\n      return getCalculatedWidth(element, 'content-box');\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var getInner = getInnerWidth;\n    var getRuntime$1 = getWidth;\n\n    var columns = function (warehouse, isValidCell) {\n      if (isValidCell === void 0) {\n        isValidCell = always;\n      }\n      var grid = warehouse.grid;\n      var cols = range$1(grid.columns, identity);\n      var rowsArr = range$1(grid.rows, identity);\n      return map$1(cols, function (col) {\n        var getBlock = function () {\n          return bind$2(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isValid = function (detail) {\n          return detail.colspan === 1 && isValidCell(detail.element);\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isValid, getFallback);\n      });\n    };\n    var decide = function (getBlock, isValid, getFallback) {\n      var inBlock = getBlock();\n      var validInBlock = find$1(inBlock, isValid);\n      var detailOption = validInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range$1(grid.rows, identity);\n      var cols = range$1(grid.columns, identity);\n      return map$1(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind$2(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$a(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var getRuntime = getHeight$1;\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter$2(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop$1 = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop$1(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop$1(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map$1(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop$1\n    };\n    var ltr$1 = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl$1 = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$2 = onDirection(ltr$1, rtl$1);\n    var width = {\n      delta: function (amount, table) {\n        return detect$2(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$2(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$2(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var isCol$2 = isTag('col');\n    var getPercentSize = function (elm, outerGetter, innerGetter) {\n      var relativeParent = parentElement(elm).getOrThunk(function () {\n        return getBody$1(owner(elm));\n      });\n      return outerGetter(elm) / innerGetter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRuntime(cell) + 'px';\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseFloat(value);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$7(cell);\n      }\n      return normalizePixelSize(value, cell, get$7, setHeight);\n    };\n    var get$6 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRaw$1 = function (element, prop) {\n      return getRaw$2(element, prop).orThunk(function () {\n        return getOpt(element, prop).map(function (val) {\n          return val + 'px';\n        });\n      });\n    };\n    var getRawWidth$1 = function (element) {\n      return getRaw$1(element, 'width');\n    };\n    var getRawHeight = function (element) {\n      return getRaw$1(element, 'height');\n    };\n    var getPercentageWidth = function (cell) {\n      return getPercentSize(cell, get$8, getInner);\n    };\n    var getPixelWidth$1 = function (cell) {\n      return isCol$2(cell) ? get$8(cell) : getRuntime$1(cell);\n    };\n    var getHeight = function (cell) {\n      return get$6(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth$1(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$8(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$8, getInner) + '%';\n    };\n    var isPercentSizing$1 = function (table) {\n      return getRawWidth$1(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing$1 = function (table) {\n      return getRawWidth$1(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing$1 = function (table) {\n      return getRawWidth$1(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n\n    var isCol$1 = isTag('col');\n    var getRawW = function (cell) {\n      return getRawWidth$1(cell).getOrThunk(function () {\n        return getPixelWidth$1(cell) + 'px';\n      });\n    };\n    var getRawH = function (cell) {\n      return getRawHeight(cell).getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var justCols = function (warehouse) {\n      return map$1(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var isValidColumn = function (cell) {\n      var browser = detect$3().browser;\n      var supportsColWidths = browser.isChrome() || browser.isFirefox();\n      return isCol$1(cell) ? supportsColWidths : true;\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback) {\n      var columnCells = columns(warehouse);\n      var columns$1 = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map$1(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map$1(columns$1, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$8(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      });\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth$1, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      });\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows$1 = rows(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map$1(direction.positions(rows$1, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map$1(rows$1, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var widthLookup = function (table, getter) {\n      return function () {\n        if (inBody(table)) {\n          return getter(table);\n        } else {\n          return parseFloat(getRaw$2(table, 'width').getOr('0'));\n        }\n      };\n    };\n    var noneSize = function (table) {\n      var getWidth = widthLookup(table, get$8);\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (table) {\n      var getFloatWidth = widthLookup(table, function (elem) {\n        return parseFloat(getPercentTableWidth(elem));\n      });\n      var getWidth = widthLookup(table, get$8);\n      var getCellDelta = function (delta) {\n        return delta / getWidth() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / getWidth() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = getFloatWidth();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getFloatWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (table) {\n      var getWidth = widthLookup(table, get$8);\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(element);\n      } else {\n        return pixelSize(element);\n      }\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth$1(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol, allCells, selectedCells) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol,\n        allCells: allCells,\n        selectedCells: selectedCells\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      var allCells = [];\n      var selectedCells = [];\n      each$1(house.access, function (detail) {\n        allCells.push(detail);\n        if (isSelected(detail)) {\n          selectedCells.push(detail);\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append$1(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append$1 : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (replica, stats, house, widthDelta) {\n      each$1(house.columns, function (col) {\n        if (col.column < stats.minCol || col.column > stats.maxCol) {\n          remove$5(col.element);\n        }\n      });\n      var emptyRows = filter$2(firstLayer(replica, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each$2(emptyRows, remove$5);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each$2(firstLayer(replica, 'th,td'), function (cell) {\n          remove$7(cell, 'rowspan');\n          remove$7(cell, 'colspan');\n        });\n      }\n      remove$7(replica, LOCKED_COL_ATTR);\n      remove$7(replica, 'data-snooker-col-series');\n      var tableSize = TableSize.getTableSize(replica);\n      tableSize.adjustTableWidth(widthDelta);\n    };\n    var getTableWidthDelta = function (table, warehouse, tableSize, stats) {\n      if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {\n        return 0;\n      }\n      var colWidths = getPixelWidths(warehouse, table, tableSize);\n      var allColsWidth = foldl(colWidths, function (acc, width) {\n        return acc + width;\n      }, 0);\n      var selectedColsWidth = foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), function (acc, width) {\n        return acc + width;\n      }, 0);\n      var newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();\n      var delta = newWidth - tableSize.pixelWidth();\n      return tableSize.getCellDelta(delta);\n    };\n    var extract$1 = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is$2(detail.element, selectedSelector);\n      };\n      var replica = deep(table);\n      var list = fromTable$1(replica);\n      var tableSize = TableSize.getTableSize(table);\n      var replicaHouse = Warehouse.generate(list);\n      var replicaStats = findSelectedStats(replicaHouse, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(replica, 'th,td', function (cell) {\n        return is$2(cell, selector);\n      });\n      each$2(unselectedCells, remove$5);\n      fillInGaps(list, replicaHouse, replicaStats, isSelected);\n      var house = Warehouse.fromTable(table);\n      var widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);\n      clean(replica, replicaStats, replicaHouse, widthDelta);\n      return replica;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children$3(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant$1(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children = children$3(element);\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function (doc) {\n      return function () {\n        var td = SugarElement.fromTag('td', doc.dom);\n        append$1(td, SugarElement.fromTag('br', doc.dom));\n        return td;\n      };\n    };\n    var createCol = function (doc) {\n      return function () {\n        return SugarElement.fromTag('col', doc.dom);\n      };\n    };\n    var createColgroup = function (doc) {\n      return function () {\n        return SugarElement.fromTag('colgroup', doc.dom);\n      };\n    };\n    var createRow$1 = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var replace$1 = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove$7(replica, k);\n        } else {\n          set$2(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$3(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove$7(clonedFormat, 'contenteditable');\n          append$1(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains$2(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set$2(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy$2(prev.element, clone);\n        remove$6(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$6(clone, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var td = SugarElement.fromTag(name(prev.element), doc.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append$1(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup(doc),\n        row: createRow$1(doc),\n        cell: newCell,\n        replace: replace$1,\n        colGap: createCol(doc),\n        gap: createCell(doc)\n      };\n    };\n    var paste$1 = function (doc) {\n      return {\n        col: createCol(doc),\n        colgroup: createColgroup(doc),\n        row: createRow$1(doc),\n        cell: createCell(doc),\n        replace: pasteReplace,\n        colGap: createCol(doc),\n        gap: createCell(doc)\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children$3(SugarElement.fromDom(div));\n    };\n    var fromDom = function (nodes) {\n      return map$1(nodes, SugarElement.fromDom);\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove$7(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove$7(element, 'data-mce-style');\n      };\n      each$2(cells$1(table), removeStyleAttribute);\n      each$2(columns$1(table), removeStyleAttribute);\n      each$2(rows$1(table), removeStyleAttribute);\n    };\n    var getRawWidth = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage$1 = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n    var getSelectionEnd = function (editor) {\n      return SugarElement.fromDom(editor.selection.getEnd());\n    };\n\n    var selection = function (selections) {\n      return cata$2(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata$2(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var getSelectionCellFallback = function (element) {\n      return table(element).bind(function (table) {\n        return retrieve(table, ephemera.firstSelectedSelector);\n      }).fold(constant(element), function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionFromSelector = function (selector) {\n      return function (initCell, isRoot) {\n        var cellName = name(initCell);\n        var cell = cellName === 'col' || cellName === 'colgroup' ? getSelectionCellFallback(initCell) : initCell;\n        return closest$1(cell, selector, isRoot);\n      };\n    };\n    var getSelectionCellOrCaption = getSelectionFromSelector('th,td,caption');\n    var getSelectionCell = getSelectionFromSelector('th,td');\n    var getCellsFromSelection = function (selections) {\n      return selection(selections);\n    };\n    var getRowsFromSelection = function (selected, selector) {\n      var cellOpt = getSelectionCell(selected);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows$1(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter$2(rows, function (row) {\n          return exists(fromDom(row.dom.cells), function (rowCell) {\n            return get$b(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var replica = extract$1(table, attributeSelector);\n        removeDataStyle(replica);\n        return [replica];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map$1(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map$1(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata$2(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var selectedCells = getCellsFromSelection(selections);\n          head(selectedCells).each(function (cell) {\n            table(cell).each(function (table) {\n              var elements = filter$2(fromHtml(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = isTag('table');\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste$1(doc);\n                var targets = paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function () {\n                  editor.focus();\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt$7);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map$1(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map$1(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map$1(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map$1(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map$1(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each$2(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map$1(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map$1(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each$2(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each$2(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustAndRedistributeWidths$1 = function (_table, list, details, tableSize, resizeBehaviour) {\n      var warehouse = Warehouse.generate(list);\n      var sizes = tableSize.getWidths(warehouse, tableSize);\n      var tablePixelWidth = tableSize.pixelWidth();\n      var _a = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative), newSizes = _a.newSizes, delta = _a.delta;\n      recalculateAndApply(warehouse, newSizes, tableSize);\n      tableSize.adjustTableWidth(delta);\n    };\n    var adjustWidthTo = function (_table, list, _info, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map$1(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map$1(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, isRelative) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, totalWidth, pixelDelta, isRelative) {\n        if (isRelative) {\n          var tableWidth = totalWidth + pixelDelta;\n          var ratio_1 = tableWidth / totalWidth;\n          var newSizes = map$1(sizes, function (size) {\n            return size / ratio_1;\n          });\n          return {\n            delta: ratio_1 * 100 - 100,\n            newSizes: newSizes\n          };\n        } else {\n          return {\n            delta: pixelDelta,\n            newSizes: sizes\n          };\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, isRelative) {\n        if (isRelative) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map$1(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, _totalWidth, _pixelDelta, _isRelative) {\n        return {\n          delta: 0,\n          newSizes: sizes\n        };\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body\n    };\n\n    var adt$6 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$6.invalid(value);\n    };\n    var from = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$6.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$6.pixels, value);\n      }\n      return adt$6.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$6), { from: from });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map$1(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map$1(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range$1(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute$1 = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add$3 = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add$3(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each$2(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each$2(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each$2(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each$2(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute = function (table, optWidth, optHeight) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$8(table);\n        var oldWidths = getRawWidths(warehouse, table);\n        var nuWidths = redistribute$1(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$7(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute$1(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing = isPercentSizing$1;\n    var isPixelSizing = isPixelSizing$1;\n    var isNoneSizing = isNoneSizing$1;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter$2(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each$2(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each$2(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$4 = function (typeDefs) {\n      var registry = map(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each$2(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find$1(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains$2(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter$2(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter$2(keys, function (key) {\n        return !contains$2(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var InDrag = function () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create$4({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    };\n\n    var NoDrag = function () {\n      var events = create$4({ move: Event(['info']) });\n      return {\n        onEvent: noop,\n        reset: noop,\n        events: events.registry\n      };\n    };\n\n    var Movement = function () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create$4({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle$2 = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle$2(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var read = function (element, attr) {\n      var value = get$b(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$2 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$2(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$2(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$5 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add$2(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$5(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles$1 = css('ephox-dragster');\n    var resolve$1 = styles$1.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve$1('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set$2(div, 'role', 'presentation');\n      setAll(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add(div, resolve$1('blocker'));\n      add(div, settings.layerClass);\n      var element = constant(div);\n      var destroy = function () {\n        remove$5(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append$1(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$5(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var closest = function (target) {\n      return closest$1(target, '[contenteditable]');\n    };\n    var isEditable$1 = function (element, assumeEditable) {\n      if (assumeEditable === void 0) {\n        assumeEditable = false;\n      }\n      if (!detect$3().browser.isIE() && inBody(element)) {\n        return element.dom.isContentEditable;\n      } else {\n        return closest(element).fold(constant(assumeEditable), function (editable) {\n          return getRaw(editable) === 'true';\n        });\n      }\n    };\n    var getRaw = function (element) {\n      return element.dom.contentEditable;\n    };\n\n    var styles = css('ephox-snooker');\n    var resolve = styles.resolve;\n\n    var Mutation = function () {\n      var events = create$4({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create$4({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll$1(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll$1(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve('resizer-bar');\n    var resizeRowBar = resolve('resizer-rows');\n    var resizeColBar = resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind$2(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range$1(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter$2(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants(wire.parent(), '.' + resizeBar);\n      each$2(previous, remove$5);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each$2(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add(bar, resizeBar);\n          append$1(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter$2(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter$2(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter$2(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows$1 = rows(warehouse);\n        var cols = columns(warehouse);\n        refreshGrid(warehouse, wire, table, rows$1, cols);\n      }\n    };\n    var each = function (wire, f) {\n      var bars = descendants(wire.parent(), '.' + resizeBar);\n      each$2(bars, f);\n    };\n    var hide = function (wire) {\n      each(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform$1(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$b(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove$7(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove$7(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set$2(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(isEditable$1);\n      };\n      var mouseover = bind(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create$4({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$3 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create$4({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$3 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n    var styleModified = {\n      structure: false,\n      style: true\n    };\n    var structureModified = {\n      structure: true,\n      style: false\n    };\n    var styleAndStructureModified = {\n      structure: true,\n      style: true\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultCellBorderWidths = range$1(5, function (i) {\n      var size = i + 1 + 'px';\n      return {\n        title: size,\n        value: size\n      };\n    });\n    var defaultCellBorderStyles = map$1([\n      'Solid',\n      'Dotted',\n      'Dashed',\n      'Double',\n      'Groove',\n      'Ridge',\n      'Inset',\n      'Outset',\n      'None',\n      'Hidden'\n    ], function (type) {\n      return {\n        title: type,\n        value: type.toLowerCase()\n      };\n    });\n    var determineDefaultStyles = function (editor) {\n      var _a;\n      if (isPixelsForced(editor)) {\n        var dom = editor.dom;\n        var parentBlock = (_a = dom.getParent(editor.selection.getStart(), dom.isBlock)) !== null && _a !== void 0 ? _a : editor.getBody();\n        var contentWidth = getInner(SugarElement.fromDom(parentBlock));\n        return __assign(__assign({}, defaultStyles), { width: contentWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getTableBorderWidths = function (editor) {\n      return editor.getParam('table_border_widths', defaultCellBorderWidths, 'array');\n    };\n    var getTableBorderStyles = function (editor) {\n      return editor.getParam('table_border_styles', defaultCellBorderStyles, 'array');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains$2(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find$1(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var isResizeTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'resizetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n    var getTableBackgroundColorMap = function (editor) {\n      return editor.getParam('table_background_color_map', [], 'array');\n    };\n    var getTableBorderColorMap = function (editor) {\n      return editor.getParam('table_border_color_map', [], 'array');\n    };\n\n    var get$4 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        return TableSize.percentageSize(table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove$7(element, 'width');\n    };\n    var convertToPercentSize = function (table) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute(table, Optional.some(newWidth), Optional.none());\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute(table, Optional.some(newWidth), Optional.none());\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$6(table, 'width');\n      var columns = columns$1(table);\n      var rowElements = columns.length > 0 ? columns : cells$1(table);\n      each$2(rowElements, function (cell) {\n        remove$6(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = convertToPercentSize;\n    var enforcePixels = convertToPixelSize;\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each$2(cells$1(table), function (cell) {\n          var computedWidth = get$a(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove$7(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append$1(body$1(), container);\n      return container;\n    };\n    var get$3 = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$1 = function (editor, wire) {\n      if (editor.inline) {\n        remove$5(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$b(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$4(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage$1(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$1(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$3(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each$2(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing(table) && isPixelsForced(editor)) {\n            enforcePixels(table);\n          } else if (!isPercentSizing(table) && isPercentagesForced(editor)) {\n            enforcePercentage(table);\n          }\n          if (isNoneSizing(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, styleModified);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan$1 = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan$1(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl$2 = function (universe, element) {\n      var candidate = scan$1(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl$2(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl$2;\n\n    var universe$2 = DomUniverse();\n    var freefallRtl = function (element) {\n      return freefallRtl$1(universe$2, element);\n    };\n\n    var halve = function (main, other) {\n      var colspan = getSpan(main, 'colspan');\n      if (colspan === 1) {\n        var width = getGenericWidth(main);\n        width.each(function (w) {\n          var newWidth = w.value / 2;\n          setGenericWidth(main, newWidth, w.unit);\n          setGenericWidth(other, newWidth, w.unit);\n        });\n      }\n    };\n\n    var isHeaderCell = isTag('th');\n    var isHeaderCells = function (cells) {\n      return forall(cells, function (cell) {\n        return isHeaderCell(cell.element);\n      });\n    };\n    var getRowHeaderType = function (isHeaderRow, isHeaderCells) {\n      if (isHeaderRow && isHeaderCells) {\n        return 'sectionCells';\n      } else if (isHeaderRow) {\n        return 'section';\n      } else {\n        return 'cells';\n      }\n    };\n    var getRowType$1 = function (row) {\n      var isHeaderRow = row.section === 'thead';\n      var isHeaderCells = is(findCommonCellType(row.cells), 'th');\n      if (isHeaderRow || isHeaderCells) {\n        return {\n          type: 'header',\n          subType: getRowHeaderType(isHeaderRow, isHeaderCells)\n        };\n      } else if (row.section === 'tfoot') {\n        return { type: 'footer' };\n      } else {\n        return { type: 'body' };\n      }\n    };\n    var findCommonCellType = function (cells) {\n      var headerCells = filter$2(cells, function (cell) {\n        return isHeaderCell(cell.element);\n      });\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var findCommonRowType = function (rows) {\n      var rowTypes = map$1(rows, function (row) {\n        return getRowType$1(row).type;\n      });\n      var hasHeader = contains$2(rowTypes, 'header');\n      var hasFooter = contains$2(rowTypes, 'footer');\n      if (!hasHeader && !hasFooter) {\n        return Optional.some('body');\n      } else {\n        var hasBody = contains$2(rowTypes, 'body');\n        if (hasHeader && !hasBody && !hasFooter) {\n          return Optional.some('header');\n        } else if (!hasHeader && !hasBody && hasFooter) {\n          return Optional.some('footer');\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var findTableRowHeaderType = function (warehouse) {\n      return findMap(warehouse.all, function (row) {\n        var rowType = getRowType$1(row);\n        return rowType.type === 'header' ? Optional.from(rowType.subType) : Optional.none();\n      });\n    };\n\n    var transformCell = function (cell, comparator, substitution) {\n      return elementnew(substitution(cell.element, comparator), true, cell.isLocked);\n    };\n    var transformRow = function (row, section) {\n      return row.section !== section ? rowcells(row.element, row.cells, section, row.isNew) : row;\n    };\n    var section = function () {\n      return {\n        transformRow: transformRow,\n        transformCell: function (cell, comparator, substitution) {\n          var newCell = substitution(cell.element, comparator);\n          var fixedCell = name(newCell) !== 'td' ? mutate$1(newCell, 'td') : newCell;\n          return elementnew(fixedCell, cell.isNew, cell.isLocked);\n        }\n      };\n    };\n    var sectionCells = function () {\n      return {\n        transformRow: transformRow,\n        transformCell: transformCell\n      };\n    };\n    var cells = function () {\n      return {\n        transformRow: function (row, section) {\n          var newSection = section === 'thead' ? 'tbody' : section;\n          return transformRow(row, newSection);\n        },\n        transformCell: transformCell\n      };\n    };\n    var fallback = function () {\n      return {\n        transformRow: identity,\n        transformCell: transformCell\n      };\n    };\n    var getTableSectionType = function (table, fallback) {\n      var warehouse = Warehouse.fromTable(table);\n      var type = findTableRowHeaderType(warehouse).getOr(fallback);\n      switch (type) {\n      case 'section':\n        return section();\n      case 'sectionCells':\n        return sectionCells();\n      case 'cells':\n        return cells();\n      }\n    };\n    var TableSection = {\n      getTableSectionType: getTableSectionType,\n      section: section,\n      sectionCells: sectionCells,\n      cells: cells,\n      fallback: fallback\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove$7(element, property);\n      } else {\n        set$2(element, property, value);\n      }\n    };\n    var insert$1 = function (table, selector, element) {\n      last$2(children$1(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after$5(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$1(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert$1(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert$1(table, 'caption', newSection);\n        } else {\n          append$1(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render$1 = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map$1(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each$2(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append$1(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind$2(gridSection, function (colGroup) {\n          return map$1(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$1(table, sectionName).each(remove$5);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each$2(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy = function (grid) {\n      return map$1(grid, function (row) {\n        var tr = shallow(row.element);\n        each$2(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append$1(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map$1(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.getOr(xs.length);\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var gridRow = getRow(grid, row);\n      var isColRow = gridRow.section === 'colgroup';\n      var colspan = findDiff(gridRow.cells.slice(column), comparator);\n      var rowspan = isColRow ? 1 : findDiff(getColumn(grid.slice(row), column), comparator);\n      return {\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map$1(grid, function (row) {\n        return map$1(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map$1(grid, function (row, rowIndex) {\n        var details = bind$2(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetailnew(row.element, details, row.section, row.isNew);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      each$2(warehouse.colgroups, function (colgroup) {\n        var colgroupCols = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getColumnAt(warehouse, columnIndex).map(function (column) {\n            return elementnew(column.element, isNew, false);\n          }).getOrThunk(function () {\n            return elementnew(generators.colGap(), true, false);\n          });\n          colgroupCols.push(element);\n        }\n        grid.push(rowcells(colgroup.element, colgroupCols, 'colgroup', isNew));\n      });\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew, item.isLocked);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true, false);\n          });\n          rowCells.push(element);\n        }\n        var rowDetail = warehouse.all[rowIndex];\n        var row = rowcells(rowDetail.element, rowCells, rowDetail.section, isNew);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var toDetailList = function (grid) {\n      return toDetails(grid, eq$1);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find$1(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var extractCells = function (warehouse, target, predicate) {\n      var details = map$1(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        }).filter(predicate);\n      });\n      var cells = cat(details);\n      return someIf(cells.length > 0, cells);\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, behaviours) {\n        var warehouse = Warehouse.fromTable(table);\n        var tableSection = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.section).getOrThunk(TableSection.fallback);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators), tableSection);\n          var lockedColumns = getLockedColumnsFromGrid(result.grid);\n          var grid = toDetailList(result.grid);\n          return {\n            info: info,\n            grid: grid,\n            cursor: result.cursor,\n            lockedColumns: lockedColumns\n          };\n        });\n        return output.bind(function (out) {\n          var newElements = render$1(table, out.grid);\n          var tableSizing = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          var resizing = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.resize).getOrThunk(preserveTable);\n          adjustment(table, out.grid, out.info, {\n            sizing: tableSizing,\n            resize: resizing,\n            section: tableSection\n          });\n          postAction(table);\n          refresh(wire, table);\n          remove$7(table, LOCKED_COL_ATTR);\n          if (out.lockedColumns.length > 0) {\n            set$2(table, LOCKED_COL_ATTR, out.lockedColumns.join(','));\n          }\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      return extractCells(warehouse, target, always).map(function (cells) {\n        return {\n          cells: cells,\n          generators: target.generators,\n          clipboard: target.clipboard\n        };\n      });\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      return extractCells(warehouse, target, always);\n    };\n    var onUnlockedCells = function (warehouse, target) {\n      return extractCells(warehouse, target, function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var isUnlockedTableCell = function (warehouse, cell) {\n      return findInWarehouse(warehouse, cell).exists(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var allUnlocked = function (warehouse, cells) {\n      return forall(cells, function (cell) {\n        return isUnlockedTableCell(warehouse, cell);\n      });\n    };\n    var onUnlockedMergable = function (warehouse, target) {\n      return onMergable(warehouse, target).filter(function (mergeable) {\n        return allUnlocked(warehouse, mergeable.cells);\n      });\n    };\n    var onUnlockedUnmergable = function (warehouse, target) {\n      return onUnmergable(warehouse, target).filter(function (cells) {\n        return allUnlocked(warehouse, cells);\n      });\n    };\n\n    var merge$2 = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          var row = rows[i];\n          var isLocked = getCell(row, j).isLocked;\n          mutateCell(row, j, elementnew(substitution(), false, isLocked));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var row = rows[i];\n          var currentCell = getCell(row, j);\n          var currentCellElm = currentCell.element;\n          var isToReplace = comparator(currentCellElm, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(row, j, elementnew(substitution(), true, currentCell.isLocked));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each$2(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true, current.isLocked));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each$2(cells, function (cell) {\n          var replacement = Optional.none();\n          for (var i = index; i < rows.length; i++) {\n            var _loop_1 = function (j) {\n              var row = rows[i];\n              var current = getCell(row, j);\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(row, j, elementnew(sub, true, current.isLocked));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_1(j);\n            }\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (amount, row, generators, isLocked) {\n      var generator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return range$1(amount, function (idx) {\n        return elementnew(generator(), true, isLocked(idx));\n      });\n    };\n    var rowFill = function (grid, amount, generators, lockedColumns) {\n      var exampleRow = grid[grid.length - 1];\n      return grid.concat(range$1(amount, function () {\n        var generator = exampleRow.section === 'colgroup' ? generators.colgroup : generators.row;\n        var row = clone$1(exampleRow, generator, identity);\n        var elements = generateElements(row.cells.length, row, generators, function (idx) {\n          return has$1(lockedColumns, idx.toString());\n        });\n        return setCells(row, elements);\n      }));\n    };\n    var colFill = function (grid, amount, generators, startIndex) {\n      return map$1(grid, function (row) {\n        var newChildren = generateElements(amount, row, generators, never);\n        return addCells(row, startIndex, newChildren);\n      });\n    };\n    var lockedColFill = function (grid, generators, lockedColumns) {\n      return map$1(grid, function (row) {\n        return foldl(lockedColumns, function (acc, colNum) {\n          var newChild = generateElements(1, row, generators, always)[0];\n          return addCell(acc, colNum, newChild);\n        }, row);\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var gridWidth = cellLength(gridA[0]);\n      var isLastColLocked = exists(lockedColumns, function (locked) {\n        return locked === gridWidth - 1;\n      });\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);\n      var newLockedColumns = getLockedColumnsFromGrid(modifiedCols);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, mapToObject(newLockedColumns, always));\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator, lockedColumns) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth + lockedColumns.length;\n      var lockedColumnObj = mapToObject(lockedColumns, always);\n      for (var r = startRow; r < endRow; r++) {\n        var skippedCol = 0;\n        for (var c = startCol; c < endCol; c++) {\n          if (lockedColumnObj[c]) {\n            skippedCol++;\n            continue;\n          }\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var gridBColIndex = c - startCol - skippedCol;\n          var newCell = getCell(gridB[r - startRow], gridBColIndex);\n          var newCellElm = newCell.element;\n          var replacement = generator.replace(newCellElm);\n          mutateCell(gridA[r], c, elementnew(replacement, true, newCell.isLocked));\n        }\n      }\n      return gridA;\n    };\n    var getValidStartAddress = function (currentStartAddress, grid, lockedColumns) {\n      var gridColLength = cellLength(grid[0]);\n      var adjustedRowAddress = extractGridDetails(grid).cols.length + currentStartAddress.row;\n      var possibleColAddresses = range$1(gridColLength - currentStartAddress.column, function (num) {\n        return num + currentStartAddress.column;\n      });\n      var validColAddress = find$1(possibleColAddresses, function (num) {\n        return forall(lockedColumns, function (col) {\n          return col !== num;\n        });\n      }).getOr(gridColLength - 1);\n      return {\n        row: adjustedRowAddress,\n        column: validColAddress\n      };\n    };\n    var getLockedColumnsWithinBounds = function (startAddress, grid, lockedColumns) {\n      return filter$2(lockedColumns, function (colNum) {\n        return colNum >= startAddress.column && colNum <= cellLength(grid[0]) + startAddress.column;\n      });\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);\n      var gridBRows = extractGridDetails(gridB).rows;\n      var lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, lockedColumns);\n      var result = measure(validStartAddress, gridA, gridBRows);\n      return result.map(function (diff) {\n        var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - lockedColumnsWithinBounds.length });\n        var fittedGrid = tailor(gridA, delta, generator);\n        var newLockedColumns = getLockedColumnsFromGrid(fittedGrid);\n        var newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, newLockedColumns);\n        return mergeTables(validStartAddress, fittedGrid, gridBRows, generator, comparator, newLockedColumnsWithinBounds);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map$1(fittedOldGrid, function (gridRow, i) {\n        return addCells(gridRow, index, fittedNewGrid[i].cells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var locked = getLockedColumnsFromGrid(gridA);\n      var diff = measureWidth(gridA, gridB);\n      var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - locked.length });\n      var fittedOldGrid = tailor(gridA, delta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      var newLocked = getLockedColumnsFromGrid(fittedOldGrid);\n      var secondDiff = measureWidth(gridB, gridA);\n      var secondDelta = __assign(__assign({}, secondDiff), { colDelta: secondDiff.colDelta + newLocked.length });\n      var fittedGridB = lockedColFill(gridB, generator, newLocked);\n      var fittedNewGrid = tailor(fittedGridB, secondDelta, generator);\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var cloneRow = function (row, cloneCell, comparator, substitution) {\n      return clone$1(row, function (elem) {\n        return substitution(elem, comparator);\n      }, cloneCell);\n    };\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var newRow = cloneRow(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true, ex.isLocked);\n        return ret;\n      }, comparator, substitution);\n      return cols.concat(before).concat([newRow]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        var cell = getCell(row, example);\n        return elementnew(substitution(cell.element, comparator), true, false);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map$1(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, columns) {\n      return bind$2(grid, function (row) {\n        var existingCells = row.cells;\n        var cells = foldr(columns, function (acc, column) {\n          return column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc;\n        }, existingCells);\n        return cells.length > 0 ? [rowcells(row.element, cells, row.section, row.isNew)] : [];\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var notInStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notInStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var isDuplicatedCell = function (grid, rowIndex, colIndex, comparator) {\n      return notInStartRow(grid, rowIndex, colIndex, comparator) || notInStartColumn(grid[rowIndex], colIndex, comparator);\n    };\n    var rowReplacerPredicate = function (targetRow, columnHeaders) {\n      var entireTableIsHeader = forall(columnHeaders, identity) && isHeaderCells(targetRow.cells);\n      return entireTableIsHeader ? always : function (cell, _rowIndex, colIndex) {\n        var type = name(cell.element);\n        return !(type === 'th' && columnHeaders[colIndex]);\n      };\n    };\n    var columnReplacePredicate = function (targetColumn, rowHeaders) {\n      var entireTableIsHeader = forall(rowHeaders, identity) && isHeaderCells(targetColumn);\n      return entireTableIsHeader ? always : function (cell, rowIndex, _colIndex) {\n        var type = name(cell.element);\n        return !(type === 'th' && rowHeaders[rowIndex]);\n      };\n    };\n    var determineScope = function (applyScope, element, newScope, isInHeader) {\n      var hasSpan = function (scope) {\n        return scope === 'row' ? hasRowspan(element) : hasColspan(element);\n      };\n      var getScope = function (scope) {\n        return hasSpan(scope) ? scope + 'group' : scope;\n      };\n      if (applyScope) {\n        return isHeaderCell(element) ? getScope(newScope) : null;\n      } else if (isInHeader && isHeaderCell(element)) {\n        var oppositeScope = newScope === 'row' ? 'col' : 'row';\n        return getScope(oppositeScope);\n      } else {\n        return null;\n      }\n    };\n    var rowScopeGenerator = function (applyScope, columnHeaders) {\n      return function (cell, rowIndex, columnIndex) {\n        return Optional.some(determineScope(applyScope, cell.element, 'col', columnHeaders[columnIndex]));\n      };\n    };\n    var columnScopeGenerator = function (applyScope, rowHeaders) {\n      return function (cell, rowIndex) {\n        return Optional.some(determineScope(applyScope, cell.element, 'row', rowHeaders[rowIndex]));\n      };\n    };\n    var replace = function (cell, comparator, substitute) {\n      return elementnew(substitute(cell.element, comparator), true, cell.isLocked);\n    };\n    var replaceIn = function (grid, targets, comparator, substitute, replacer, genScope, shouldReplace) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map$1(grid, function (row, rowIndex) {\n        return mapCells(row, function (cell, colIndex) {\n          if (isTarget(cell)) {\n            var newCell_1 = shouldReplace(cell, rowIndex, colIndex) ? replacer(cell, comparator, substitute) : cell;\n            genScope(newCell_1, rowIndex, colIndex).each(function (scope) {\n              setOptions(newCell_1.element, { scope: Optional.from(scope) });\n            });\n            return newCell_1;\n          } else {\n            return cell;\n          }\n        });\n      });\n    };\n    var getColumnCells = function (rows, columnIndex, comparator) {\n      return bind$2(rows, function (row, i) {\n        return isDuplicatedCell(rows, i, columnIndex, comparator) ? [] : [getCell(row, columnIndex)];\n      });\n    };\n    var getRowCells = function (rows, rowIndex, comparator) {\n      var targetRow = rows[rowIndex];\n      return bind$2(targetRow.cells, function (item, i) {\n        return isDuplicatedCell(rows, rowIndex, i, comparator) ? [] : [item];\n      });\n    };\n    var replaceColumns = function (grid, indexes, applyScope, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targets = bind$2(indexes, function (index) {\n        return getColumnCells(rows, index, comparator);\n      });\n      var rowHeaders = map$1(grid, function (row) {\n        return isHeaderCells(row.cells);\n      });\n      var shouldReplaceCell = columnReplacePredicate(targets, rowHeaders);\n      var scopeGenerator = columnScopeGenerator(applyScope, rowHeaders);\n      return replaceIn(grid, targets, comparator, substitution, replace, scopeGenerator, shouldReplaceCell);\n    };\n    var replaceRows = function (grid, indexes, section, applyScope, comparator, substitution, tableSection) {\n      var _a = extractGridDetails(grid), cols = _a.cols, rows = _a.rows;\n      var targetRow = rows[indexes[0]];\n      var targets = bind$2(indexes, function (index) {\n        return getRowCells(rows, index, comparator);\n      });\n      var columnHeaders = map$1(targetRow.cells, function (_cell, index) {\n        return isHeaderCells(getColumnCells(rows, index, comparator));\n      });\n      var newRows = __spreadArray([], rows, true);\n      each$2(indexes, function (index) {\n        newRows[index] = tableSection.transformRow(rows[index], section);\n      });\n      var newGrid = cols.concat(newRows);\n      var shouldReplaceCell = rowReplacerPredicate(targetRow, columnHeaders);\n      var scopeGenerator = rowScopeGenerator(applyScope, columnHeaders);\n      return replaceIn(newGrid, targets, comparator, substitution, tableSection.transformCell, scopeGenerator, shouldReplaceCell);\n    };\n    var replaceCells = function (grid, details, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetCells = map$1(details, function (detail) {\n        return getCell(rows[detail.row], detail.column);\n      });\n      return replaceIn(grid, targetCells, comparator, substitution, replace, Optional.none, always);\n    };\n\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n\n    var isCol = isTag('col');\n    var isColgroup = isTag('colgroup');\n    var isRow$1 = function (element) {\n      return name(element) === 'tr' || isColgroup(element);\n    };\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      var nuCell = function (data) {\n        return isCol(data.element) ? generators.col(data) : generators.cell(data);\n      };\n      var nuRow = function (data) {\n        return isColgroup(data.element) ? generators.colgroup(data) : generators.row(data);\n      };\n      var add = function (element) {\n        if (isRow$1(element)) {\n          return nuRow({ element: element });\n        } else {\n          var replacement = nuCell(toData(element));\n          recent = Optional.some({\n            item: element,\n            replacement: replacement\n          });\n          return replacement;\n        }\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return { getOrInit: getOrInit };\n    };\n    var transform = function (tag) {\n      return function (generators) {\n        var list = [];\n        var find = function (element, comparator) {\n          return find$1(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = tag === 'td' ? { scope: null } : {};\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          if (isRow$1(element) || isCol(element)) {\n            return element;\n          } else {\n            return find(element, comparator).fold(function () {\n              return makeNew(element);\n            }, function (p) {\n              return comparator(element, p.item) ? p.sub : makeNew(element);\n            });\n          }\n        };\n        return { replaceOrInit: replaceOrInit };\n      };\n    };\n    var getScopeAttribute = function (cell) {\n      return getOpt(cell, 'scope').map(function (attribute) {\n        return attribute.substr(0, 3);\n      });\n    };\n    var merging = function (generators) {\n      var unmerge = function (cell) {\n        var scope = getScopeAttribute(cell);\n        scope.each(function (attribute) {\n          return set$2(cell, 'scope', attribute);\n        });\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$6(raw, 'width');\n          remove$6(cell, 'width');\n          scope.each(function (attribute) {\n            return set$2(raw, 'scope', attribute);\n          });\n          return raw;\n        };\n      };\n      var merge = function (cells) {\n        var getScopeProperty = function () {\n          var stringAttributes = cat(map$1(cells, getScopeAttribute));\n          if (stringAttributes.length === 0) {\n            return Optional.none();\n          } else {\n            var baseScope_1 = stringAttributes[0];\n            var scopes_1 = [\n              'row',\n              'col'\n            ];\n            var isMixed = exists(stringAttributes, function (attribute) {\n              return attribute !== baseScope_1 && contains$2(scopes_1, attribute);\n            });\n            return isMixed ? Optional.none() : Optional.from(baseScope_1);\n          }\n        };\n        remove$6(cells[0], 'width');\n        getScopeProperty().fold(function () {\n          return remove$7(cells[0], 'scope');\n        }, function (attribute) {\n          return set$2(cells[0], 'scope', attribute + 'group');\n        });\n        return constant(cells[0]);\n      };\n      return {\n        unmerge: unmerge,\n        merge: merge\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList$1 = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains$2([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock$1 = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains$2(blockList, tagName);\n    };\n    var isEmptyTag$1 = function (universe, item) {\n      return contains$2([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock = function (element) {\n      return isBlock$1(universe$1, element);\n    };\n    var isList = function (element) {\n      return isList$1(universe$1, element);\n    };\n    var isEmptyTag = function (element) {\n      return isEmptyTag$1(universe$1, element);\n    };\n\n    var merge = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$9(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor$2(el, isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind$2(cells, function (cell) {\n          var children = children$3(cell);\n          return advancedBr(children) ? [] : children.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append(cells[0], contents);\n    };\n\n    var isEditable = function (elem) {\n      return isEditable$1(elem, true);\n    };\n    var prune = function (table) {\n      var cells = cells$1(table);\n      if (cells.length === 0) {\n        remove$5(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var findEditableCursorPosition = function (rows) {\n      return findMap(rows, function (row) {\n        return findMap(row.cells, function (cell) {\n          var elem = cell.element;\n          return someIf(isEditable(elem), elem);\n        });\n      });\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var _a, _b;\n      var rows = extractGridDetails(grid).rows;\n      return Optional.from((_b = (_a = rows[row]) === null || _a === void 0 ? void 0 : _a.cells[column]) === null || _b === void 0 ? void 0 : _b.element).filter(isEditable).orThunk(function () {\n        return findEditableCursorPosition(rows);\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var cursorElement = elementFromGrid(grid, row, column);\n      return outcome(grid, cursorElement);\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldr(rows, function (acc, row) {\n        var newG = insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var target = rows[rows.length - 1];\n      var targetIndex = target.row + target.rowspan;\n      var newGrid = foldr(rows, function (newG, row) {\n        return insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var columns = uniqueColumns(details);\n      var targetIndex = columns[0].column;\n      var newGrid = foldr(columns, function (acc, col) {\n        var newG = insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var target = details[details.length - 1];\n      var targetIndex = target.column + target.colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldr(columns, function (newG, col) {\n        return insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var columnIndexes = map$1(columns, function (detail) {\n        return detail.column;\n      });\n      var newGrid = replaceColumns(initialGrid, columnIndexes, true, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeCellsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var newGrid = replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var columnIndexes = map$1(columns, function (detail) {\n        return detail.column;\n      });\n      var newGrid = replaceColumns(initialGrid, columnIndexes, false, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeCellsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var newGrid = replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var makeRowsSection = function (section, applyScope) {\n      return function (initialGrid, details, comparator, genWrappers, tableSection) {\n        var rows = uniqueRows(details);\n        var rowIndexes = map$1(rows, function (detail) {\n          return detail.row;\n        });\n        var newGrid = replaceRows(initialGrid, rowIndexes, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);\n        return bundle(newGrid, details[0].row, details[0].column);\n      };\n    };\n    var opMakeRowsHeader = makeRowsSection('thead', true);\n    var opMakeRowsBody = makeRowsSection('tbody', false);\n    var opMakeRowsFooter = makeRowsSection('tfoot', false);\n    var opEraseColumns = function (grid, extractDetail, _comparator, _genWrappers) {\n      var columns = uniqueColumns(extractDetail.details);\n      var newGrid = deleteColumnsAt(grid, map$1(columns, function (column) {\n        return column.column;\n      }));\n      var maxColIndex = newGrid.length > 0 ? newGrid[0].cells.length - 1 : 0;\n      return bundle(newGrid, columns[0].row, Math.min(columns[0].column, maxColIndex));\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var maxRowIndex = newGrid.length > 0 ? newGrid.length - 1 : 0;\n      return bundle(newGrid, Math.min(details[0].row, maxRowIndex), details[0].column);\n    };\n    var opMergeCells = function (grid, mergable, comparator, genWrappers) {\n      var cells = mergable.cells;\n      merge(cells);\n      var newGrid = merge$2(grid, mergable.bounds, comparator, genWrappers.merge(cells));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var unmerge$1 = function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.unmerge(cell));\n      };\n      var newGrid = foldr(unmergable, unmerge$1, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        return bundle(newGrid, pasteDetails.row, pasteDetails.column);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opGetColumnsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten$1(map$1(house.all, function (row) {\n          return filter$2(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return findCommonCellType(selectedColumnCells);\n      }).getOr('');\n    };\n    var opGetCellsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(findCommonCellType).getOr('');\n    };\n    var opGetRowsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minRowRange = selectedCells[0].row;\n        var maxRowRange = lastSelectedCell.row + lastSelectedCell.rowspan;\n        var selectedRows = house.all.slice(minRowRange, maxRowRange);\n        return findCommonRowType(selectedRows);\n      }).getOr('');\n    };\n    var resize = function (table, list, details, behaviours) {\n      return adjustWidthTo(table, list, details, behaviours.sizing);\n    };\n    var adjustAndRedistributeWidths = function (table, list, details, behaviours) {\n      return adjustAndRedistributeWidths$1(table, list, details, behaviours.sizing, behaviours.resize);\n    };\n    var firstColumnIsLocked = function (_warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column === 0 && detail.isLocked;\n      });\n    };\n    var lastColumnIsLocked = function (warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked;\n      });\n    };\n    var getColumnsWidth = function (warehouse, details) {\n      var columns$1 = columns(warehouse);\n      var uniqueCols = uniqueColumns(details);\n      return foldl(uniqueCols, function (acc, detail) {\n        var column = columns$1[detail.column];\n        var colWidth = column.map(getOuter$2).getOr(0);\n        return acc + colWidth;\n      }, 0);\n    };\n    var insertColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onCells(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details);\n        }).map(function (details) {\n          return {\n            details: details,\n            pixelDelta: getColumnsWidth(warehouse, details)\n          };\n        });\n      };\n    };\n    var eraseColumnsExtractor = function (warehouse, target) {\n      return onUnlockedCells(warehouse, target).map(function (details) {\n        return {\n          details: details,\n          pixelDelta: -getColumnsWidth(warehouse, details)\n        };\n      });\n    };\n    var pasteColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onPasteByEditor(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details.cells);\n        });\n      };\n    };\n    var headerCellGenerator = Generators.transform('th');\n    var bodyCellGenerator = Generators.transform('td');\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnsHeader = run(opMakeColumnsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeRowsHeader = run(opMakeRowsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var makeRowsBody = run(opMakeRowsBody, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeRowsFooter = run(opMakeRowsFooter, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeCellsHeader = run(opMakeCellsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var unmakeCellsHeader = run(opUnmakeCellsHeader, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var mergeCells = run(opMergeCells, onUnlockedMergable, resize, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnlockedUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, pasteColumnsExtractor(true), noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, pasteColumnsExtractor(false), noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnsType = opGetColumnsType;\n    var getCellsType = opGetCellsType;\n    var getRowsType = opGetRowsType;\n\n    var TableActions = function (editor, cellSelection, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var colMutationOp = isResizeTableColumnResizing(editor) ? noop : halve;\n      var getTableSectionType = function (table) {\n        switch (getTableHeaderType(editor)) {\n        case 'section':\n          return TableSection.section();\n        case 'sectionCells':\n          return TableSection.sectionCells();\n        case 'cells':\n          return TableSection.cells();\n        default:\n          return TableSection.getTableSectionType(table, 'section');\n        }\n      };\n      var setSelectionFromAction = function (table, result) {\n        return result.cursor.fold(function () {\n          var cells = cells$1(table);\n          return head(cells).filter(inBody).map(function (firstCell) {\n            cellSelection.clear(table);\n            var rng = editor.dom.createRng();\n            rng.selectNode(firstCell.dom);\n            editor.selection.setRng(rng);\n            set$2(firstCell, 'data-mce-selected', '1');\n            return rng;\n          });\n        }, function (cell) {\n          var des = freefallRtl(cell);\n          var rng = editor.dom.createRng();\n          rng.setStart(des.element.dom, des.offset);\n          rng.setEnd(des.element.dom, des.offset);\n          editor.selection.setRng(rng);\n          cellSelection.clear(table);\n          return Optional.some(rng);\n        });\n      };\n      var execute = function (operation, guard, mutate, lazyWire, effect) {\n        return function (table, target, noEvents) {\n          if (noEvents === void 0) {\n            noEvents = false;\n          }\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var behaviours = {\n            sizing: get$4(editor, table),\n            resize: isResizeTableColumnResizing(editor) ? resizeTable() : preserveTable(),\n            section: getTableSectionType(table)\n          };\n          return guard(table) ? operation(wire, table, target, generators, behaviours).bind(function (result) {\n            each$2(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each$2(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            var range = setSelectionFromAction(table, result);\n            if (inBody(table)) {\n              removeDataStyle(table);\n              if (!noEvents) {\n                fireTableModified(editor, table.dom, effect);\n              }\n            }\n            return range.map(function (rng) {\n              return {\n                rng: rng,\n                effect: effect\n              };\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire, structureModified);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire, structureModified);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire, structureModified);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire, structureModified);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, colMutationOp, lazyWire, structureModified);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, colMutationOp, lazyWire, structureModified);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire, structureModified);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire, structureModified);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire, structureModified);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire, structureModified);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire, structureModified);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire, structureModified);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire, styleAndStructureModified);\n      var makeCellsHeader$1 = execute(makeCellsHeader, always, noop, lazyWire, structureModified);\n      var unmakeCellsHeader$1 = execute(unmakeCellsHeader, always, noop, lazyWire, structureModified);\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire, structureModified);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire, structureModified);\n      var makeRowsHeader$1 = execute(makeRowsHeader, always, noop, lazyWire, structureModified);\n      var makeRowsBody$1 = execute(makeRowsBody, always, noop, lazyWire, structureModified);\n      var makeRowsFooter$1 = execute(makeRowsFooter, always, noop, lazyWire, structureModified);\n      var getTableCellType = getCellsType;\n      var getTableColType = getColumnsType;\n      var getTableRowType = getRowsType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        makeCellsHeader: makeCellsHeader$1,\n        unmakeCellsHeader: unmakeCellsHeader$1,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        makeRowsHeader: makeRowsHeader$1,\n        makeRowsBody: makeRowsBody$1,\n        makeRowsFooter: makeRowsFooter$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set$2(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set$2(td, 'scope', 'col');\n        }\n        append$1(td, SugarElement.fromTag('br'));\n        append$1(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range$1(columns, function () {\n        return append$1(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range$1(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll(table, renderOpts.styles);\n      setAll$1(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append$1(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append$1(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append$1(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$1(container, clone);\n      return get$2(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each$2(descendants(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each$2(descendants(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set$2(table, 'data-mce-id', '__mce');\n        var html = getOuter(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant(getBody(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage(defaultStyles.width)) {\n          enforcePercentage(table);\n        }\n        removeDataStyle(table);\n        remove$7(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map$1(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove$7(element, property);\n      } else {\n        set$2(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter$2(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map$1(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map$1(house.all, function (row) {\n        var cellsToCopy = filter$2(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map$1(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onUnlockedCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArray(__spreadArray([], fakeColGroups, true), fakeRows, true);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.bind(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var filteredGrid = bind$2(slicedGrid, function (row) {\n          var newCells = filter$2(row.cells, function (cell) {\n            return !cell.isLocked;\n          });\n          return newCells.length > 0 ? [__assign(__assign({}, row), { cells: newCells })] : [];\n        });\n        var slicedDetails = toDetailList(filteredGrid);\n        return someIf(slicedDetails.length > 0, slicedDetails);\n      }).map(function (slicedDetails) {\n        return copy(slicedDetails);\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$2.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$2.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var verticalAlignValues = [\n      {\n        text: 'None',\n        value: ''\n      },\n      {\n        text: 'Top',\n        value: 'top'\n      },\n      {\n        text: 'Middle',\n        value: 'middle'\n      },\n      {\n        text: 'Bottom',\n        value: 'bottom'\n      }\n    ];\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var onSetupToggle = function (editor, selections, formatName, formatValue) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var isNone = isEmpty$1(formatValue);\n        var init = function () {\n          var selectedCells = getCellsFromSelection(selections);\n          var checkNode = function (cell) {\n            return editor.formatter.match(formatName, { value: formatValue }, cell.dom, isNone);\n          };\n          if (isNone) {\n            api.setActive(!exists(selectedCells, checkNode));\n            boundCallback.set(editor.formatter.formatChanged(formatName, function (match) {\n              return api.setActive(!match);\n            }, true));\n          } else {\n            api.setActive(forall(selectedCells, checkNode));\n            boundCallback.set(editor.formatter.formatChanged(formatName, api.setActive, false, { value: formatValue }));\n          }\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (items) {\n      return map$1(items, function (item) {\n        var text = item.text || item.title;\n        if (isListGroup(item)) {\n          return {\n            text: text,\n            items: buildListItems(item.menu)\n          };\n        } else {\n          return {\n            text: text,\n            value: item.value\n          };\n        }\n      });\n    };\n    var buildMenuItems = function (editor, selections, items, format, onAction) {\n      return map$1(items, function (item) {\n        var text = item.text || item.title;\n        if (isListGroup(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: text,\n            getSubmenuItems: function () {\n              return buildMenuItems(editor, selections, item.menu, format, onAction);\n            }\n          };\n        } else {\n          return {\n            text: text,\n            type: 'togglemenuitem',\n            onAction: function () {\n              return onAction(item.value);\n            },\n            onSetup: onSetupToggle(editor, selections, format, item.value)\n          };\n        }\n      });\n    };\n    var applyTableCellStyle = function (editor, style) {\n      return function (value) {\n        var _a;\n        editor.execCommand('mceTableApplyCellStyle', false, (_a = {}, _a[style] = value, _a));\n      };\n    };\n    var filterNoneItem = function (list) {\n      return bind$2(list, function (item) {\n        if (isListGroup(item)) {\n          return [__assign(__assign({}, item), { menu: filterNoneItem(item.menu) })];\n        } else {\n          return isNotEmpty(item.value) ? [item] : [];\n        }\n      });\n    };\n    var generateMenuItemsCallback = function (editor, selections, items, format, onAction) {\n      return function (callback) {\n        return callback(buildMenuItems(editor, selections, items, format, onAction));\n      };\n    };\n    var buildColorMenu = function (editor, colorList, style) {\n      var colorMap = map$1(colorList, function (entry) {\n        return {\n          text: entry.title,\n          value: '#' + anyToHex(entry.value).value,\n          type: 'choiceitem'\n        };\n      });\n      return [{\n          type: 'fancymenuitem',\n          fancytype: 'colorswatch',\n          initData: {\n            colors: colorMap.length > 0 ? colorMap : undefined,\n            allowCustomColors: false\n          },\n          onAction: function (data) {\n            var _a;\n            var value = data.value === 'remove' ? '' : data.value;\n            editor.execCommand('mceTableApplyCellStyle', false, (_a = {}, _a[style] = value, _a));\n          }\n        }];\n    };\n    var changeRowHeader = function (editor) {\n      return function () {\n        var currentType = editor.queryCommandValue('mceTableRowType');\n        var newType = currentType === 'header' ? 'body' : 'header';\n        editor.execCommand('mceTableRowType', false, { type: newType });\n      };\n    };\n    var changeColumnHeader = function (editor) {\n      return function () {\n        var currentType = editor.queryCommandValue('mceTableColType');\n        var newType = currentType === 'th' ? 'td' : 'th';\n        editor.execCommand('mceTableColType', false, { type: newType });\n      };\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'Horizontal align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'Vertical align',\n        items: verticalAlignValues\n      }\n    ];\n    var getItems$2 = function (editor) {\n      return children.concat(getClassList$1(editor).toArray());\n    };\n\n    var getAdvancedTab = function (editor, dialogName) {\n      var emptyBorderStyle = [{\n          text: 'Select...',\n          value: ''\n        }];\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: emptyBorderStyle.concat(buildListItems(getTableBorderStyles(editor)))\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw$2(element, 'border-width').getOr(''),\n        borderstyle: getRaw$2(element, 'border-style').getOr(''),\n        bordercolor: getRaw$2(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw$2(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each$2(comparisonData, function (items) {\n        each$2(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find$1(formats, function (name) {\n        return !isUndefined(editor.formatter.matchNode(elm, formatName + name));\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$c(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$c(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$c(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$c(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$c(style, 'border-spacing').or(get$c(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$c(style, 'border-padding').or(get$c(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var getRowType = function (elm) {\n      return table(SugarElement.fromDom(elm)).map(function (table) {\n        var target = { selection: fromDom(elm.cells) };\n        return getRowsType(table, target);\n      }).getOr('');\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw$2(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      var cellspacing = shouldStyleWithCss(editor) ? dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing') : dom.getAttrib(elm, 'cellspacing') || dom.getStyle(elm, 'border-spacing');\n      var cellpadding = shouldStyleWithCss(editor) ? getTDTHOverallStyle(dom, elm, 'padding') || dom.getAttrib(elm, 'cellpadding') : dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(dom, elm, 'padding');\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: cellspacing,\n        cellpadding: cellpadding,\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getSelectedCells = function (table, cells) {\n      var warehouse = Warehouse.fromTable(table);\n      var allCells = Warehouse.justCells(warehouse);\n      var filtered = filter$2(allCells, function (cellA) {\n        return exists(cells, function (cellB) {\n          return eq$1(cellA.element, cellB);\n        });\n      });\n      return map$1(filtered, function (cell) {\n        return {\n          element: cell.element.dom,\n          column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n            return col.element.dom;\n          })\n        };\n      });\n    };\n    var updateSimpleProps$1 = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyStyleData$1 = function (editor, cells, data) {\n      var isSingleCell = cells.length === 1;\n      each$2(cells, function (item) {\n        var cellElm = item.element;\n        var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n        var colModifier = item.column.map(function (col) {\n          return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n        }).getOr(modifier);\n        updateSimpleProps$1(modifier, colModifier, data);\n        if (hasAdvancedCellTab(editor)) {\n          updateAdvancedProps$1(modifier, data);\n        }\n        if (isSingleCell) {\n          unApplyAlign(editor, cellElm);\n          unApplyVAlign(editor, cellElm);\n        }\n        if (data.halign) {\n          applyAlign(editor, cellElm, data.halign);\n        }\n        if (data.valign) {\n          applyVAlign(editor, cellElm, data.valign);\n        }\n      });\n    };\n    var applyStructureData$1 = function (editor, data) {\n      editor.execCommand('mceTableCellType', false, {\n        type: data.celltype,\n        no_events: true\n      });\n    };\n    var applyCellData = function (editor, cells, oldData, data) {\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0 && cells.length >= 1) {\n        table(cells[0]).each(function (table) {\n          var selectedCells = getSelectedCells(table, cells);\n          var styleModified = size(filter$1(modifiedData, function (_value, key) {\n            return key !== 'scope' && key !== 'celltype';\n          })) > 0;\n          var structureModified = has$1(modifiedData, 'celltype');\n          if (styleModified || has$1(modifiedData, 'scope')) {\n            applyStyleData$1(editor, selectedCells, data);\n          }\n          if (structureModified) {\n            applyStructureData$1(editor, data);\n          }\n          fireTableModified(editor, table.dom, {\n            structure: structureModified,\n            style: styleModified\n          });\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, oldData, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = table(cells[0]).map(function (table) {\n        return map$1(getSelectedCells(table, cells), function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open$2 = function (editor, selections) {\n      var cells = getCellsFromSelection(selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$2(editor)\n          },\n          getAdvancedTab(editor, 'cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$2(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells, data)\n      });\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList(editor).toArray());\n    };\n\n    var updateSimpleProps = function (modifier, data) {\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyStyleData = function (editor, rows, data, oldData) {\n      var isSingleRow = rows.length === 1;\n      each$2(rows, function (rowElm) {\n        var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n        updateSimpleProps(modifier, data);\n        if (hasAdvancedRowTab(editor)) {\n          updateAdvancedProps(modifier, data);\n        }\n        if (data.align !== oldData.align) {\n          unApplyAlign(editor, rowElm);\n          applyAlign(editor, rowElm, data.align);\n        }\n      });\n    };\n    var applyStructureData = function (editor, data) {\n      editor.execCommand('mceTableRowType', false, {\n        type: data.type,\n        no_events: true\n      });\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0) {\n        var typeModified_1 = has$1(modifiedData, 'type');\n        var styleModified_1 = typeModified_1 ? size(modifiedData) > 1 : true;\n        if (styleModified_1) {\n          applyStyleData(editor, rows, data, oldData);\n        }\n        if (typeModified_1) {\n          applyStructureData(editor, data);\n        }\n        table(SugarElement.fromDom(rows[0])).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: typeModified_1,\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map$1(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab(editor, 'row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map$1(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var getItems = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, oldData, api) {\n      var dom = editor.dom;\n      var data = api.getData();\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert(editor, cols, rows, 0, 0);\n        }\n        if (size(modifiedData) > 0) {\n          applyDataToElement(editor, tableElm, data);\n          var captionElm = dom.select('caption', tableElm)[0];\n          if (captionElm && !data.caption || !captionElm && data.caption) {\n            editor.execCommand('mceTableToggleCaption');\n          }\n          if (data.align === '') {\n            unApplyAlign(editor, tableElm);\n          } else {\n            applyAlign(editor, tableElm, data.align);\n          }\n        }\n        editor.focus();\n        editor.addVisual();\n        if (size(modifiedData) > 0) {\n          var captionModified = has$1(modifiedData, 'caption');\n          var styleModified = captionModified ? size(modifiedData) > 1 : true;\n          fireTableModified(editor, tableElm, {\n            structure: captionModified,\n            style: styleModified\n          });\n        }\n      });\n    };\n    var open = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table', editor.getBody());\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab(editor, 'table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm, data),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption = function (editor) {\n      return getSelectionCellOrCaption(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var getSelectionStartCell = function (editor) {\n      return getSelectionCell(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after$5(table, cursor);\n            remove$5(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing(table)) {\n                enforcePercentage(table);\n              } else if (sizing === 'fixed' && !isPixelSizing(table)) {\n                enforcePixels(table);\n              } else if (sizing === 'responsive' && !isNoneSizing(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom, structureModified);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var performActionOnSelection = function (action) {\n        return getSelectionStartCell(editor).bind(function (cell) {\n          return getTableFromCell(cell).map(function (table) {\n            return action(table, cell);\n          });\n        });\n      };\n      var toggleTableClass = function (_ui, clazz) {\n        performActionOnSelection(function (table) {\n          editor.formatter.toggle('tableclass', { value: clazz }, table.dom);\n          fireTableModified(editor, table.dom, styleModified);\n        });\n      };\n      var toggleTableCellClass = function (_ui, clazz) {\n        performActionOnSelection(function (table) {\n          var selectedCells = getCellsFromSelection(selections);\n          var allHaveClass = forall(selectedCells, function (cell) {\n            return editor.formatter.match('tablecellclass', { value: clazz }, cell.dom);\n          });\n          var formatterAction = allHaveClass ? editor.formatter.remove : editor.formatter.apply;\n          each$2(selectedCells, function (cell) {\n            return formatterAction('tablecellclass', { value: clazz }, cell.dom);\n          });\n          fireTableModified(editor, table.dom, styleModified);\n        });\n      };\n      var toggleCaption = function () {\n        getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).each(function (table) {\n            child$1(table, 'caption').fold(function () {\n              var caption = SugarElement.fromTag('caption');\n              append$1(caption, SugarElement.fromText('Caption'));\n              appendAt(table, caption, 0);\n              editor.selection.setCursorLocation(caption.dom, 0);\n            }, function (caption) {\n              if (isTag('caption')(cellOrCaption)) {\n                one('td', table).each(function (td) {\n                  return editor.selection.setCursorLocation(td.dom, 0);\n                });\n              }\n              remove$5(caption);\n            });\n            fireTableModified(editor, table.dom, structureModified);\n          });\n        });\n      };\n      var postExecute = function (_data) {\n        editor.focus();\n      };\n      var actOnSelection = function (execute, noEvents) {\n        if (noEvents === void 0) {\n          noEvents = false;\n        }\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          execute(table, targets, noEvents).each(postExecute);\n        });\n      };\n      var copyRowSelection = function () {\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n          return copyRows(table, targets, generators);\n        });\n      };\n      var copyColSelection = function () {\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          return copyCols(table, targets);\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map$1(rows, function (row) {\n            return deep(row);\n          });\n          performActionOnSelection(function (table, startCell) {\n            var generators = paste$1(SugarElement.fromDom(editor.getDoc()));\n            var targets = pasteRows(selections, startCell, clonedRows, generators);\n            execute(table, targets).each(postExecute);\n          });\n        });\n      };\n      var actOnType = function (getAction) {\n        return function (_ui, args) {\n          return get$c(args, 'type').each(function (type) {\n            actOnSelection(getAction(type), args.no_events);\n          });\n        };\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function () {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function () {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function () {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function () {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function () {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function () {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function () {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function () {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableCellToggleClass: toggleTableCellClass,\n        mceTableToggleClass: toggleTableClass,\n        mceTableToggleCaption: toggleCaption,\n        mceTableSizingMode: function (_ui, sizing) {\n          return setSizingMode(sizing);\n        },\n        mceTableCellType: actOnType(function (type) {\n          return type === 'th' ? actions.makeCellsHeader : actions.unmakeCellsHeader;\n        }),\n        mceTableColType: actOnType(function (type) {\n          return type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader;\n        }),\n        mceTableRowType: actOnType(function (type) {\n          switch (type) {\n          case 'header':\n            return actions.makeRowsHeader;\n          case 'footer':\n            return actions.makeRowsFooter;\n          default:\n            return actions.makeRowsBody;\n          }\n        })\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      each$1({\n        mceTableProps: curry(open, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open$2, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(selections);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each$2(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, styleModified);\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var lookupOnSelection = function (action) {\n        return getSelectionCell(getSelectionStart(editor)).bind(function (cell) {\n          return table(cell, isRoot).map(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return action(table, targets);\n          });\n        }).getOr('');\n      };\n      each$1({\n        mceTableRowType: function () {\n          return lookupOnSelection(actions.getTableRowType);\n        },\n        mceTableCellType: function () {\n          return lookupOnSelection(actions.getTableCellType);\n        },\n        mceTableColType: function () {\n          return lookupOnSelection(actions.getTableColType);\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = value();\n      var cols = value();\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          r.fold(rows.clear, rows.set);\n          cols.clear();\n        },\n        clearRows: rows.clear,\n        getColumns: cols.get,\n        setColumns: function (c) {\n          c.fold(cols.clear, cols.set);\n          rows.clear();\n        },\n        clearColumns: cols.clear\n      };\n    };\n\n    var genericBase = {\n      remove_similar: true,\n      inherit: false\n    };\n    var cellBase = __assign({ selector: 'td,th' }, genericBase);\n    var cellFormats = {\n      tablecellbackgroundcolor: __assign({ styles: { backgroundColor: '%value' } }, cellBase),\n      tablecellverticalalign: __assign({ styles: { 'vertical-align': '%value' } }, cellBase),\n      tablecellbordercolor: __assign({ styles: { borderColor: '%value' } }, cellBase),\n      tablecellclass: __assign({ classes: ['%value'] }, cellBase),\n      tableclass: __assign({\n        selector: 'table',\n        classes: ['%value']\n      }, genericBase),\n      tablecellborderstyle: __assign({ styles: { borderStyle: '%value' } }, cellBase),\n      tablecellborderwidth: __assign({ styles: { borderWidth: '%value' } }, cellBase)\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$5 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$5.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$5), { none: none });\n\n    var walk = function (all, current, index, direction, isEligible) {\n      if (isEligible === void 0) {\n        isEligible = always;\n      }\n      var forwards = direction === 1;\n      if (!forwards && index <= 0) {\n        return CellLocation.first(all[0]);\n      } else if (forwards && index >= all.length - 1) {\n        return CellLocation.last(all[all.length - 1]);\n      } else {\n        var newIndex = index + direction;\n        var elem = all[newIndex];\n        return isEligible(elem) ? CellLocation.middle(current, elem) : walk(all, current, newIndex, direction, isEligible);\n      }\n    };\n    var detect$1 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells$1(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isEligible, isRoot) {\n      var detection = detect$1(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return walk(info.all, current, info.index, 1, isEligible);\n      });\n    };\n    var prev = function (current, isEligible, isRoot) {\n      var detection = detect$1(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return walk(info.all, current, info.index, -1, isEligible);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$4 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$4.before;\n    var on = adt$4.on;\n    var after$3 = adt$4.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$3,\n      cata: cata$1,\n      getStart: getStart$1\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var selectNode = function (win, element) {\n      var rng = win.document.createRange();\n      rng.selectNode(element.dom);\n      return rng;\n    };\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$2 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$2.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$2.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$2.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$2.ltr;\n    adt$2.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$9(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children$3(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate$1(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children$3(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretPositionFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretRangeFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children$3(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains$2([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element, selectNodeContents$1) {\n      if (selectNodeContents$1 === void 0) {\n        selectNodeContents$1 = true;\n      }\n      var rngGetter = selectNodeContents$1 ? selectNodeContents : selectNode;\n      var rng = rngGetter(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$1 = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell) {\n      return go$1(editor, isRoot, next(cell, isEditable$1));\n    };\n    var backward = function (editor, isRoot, cell) {\n      return go$1(editor, isRoot, prev(cell, isEditable$1));\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var go$1 = function (editor, isRoot, cell) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        editor.execCommand('mceTableInsertRowAfter');\n        return forward(editor, isRoot, current);\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, cellSelection) {\n      if (event.keyCode === global$1.TAB) {\n        var body_1 = getBody(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains$2(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        var container = SugarElement.fromDom(event.shiftKey ? rng.startContainer : rng.endContainer);\n        cell(container, isRoot_1).each(function (cell) {\n          event.preventDefault();\n          table(cell, isRoot_1).each(cellSelection.clear);\n          editor.selection.collapse(event.shiftKey);\n          var navigation = event.shiftKey ? backward : forward;\n          var rng = navigation(editor, isRoot_1, cell);\n          rng.each(function (range) {\n            editor.selection.setRng(range);\n          });\n        });\n      }\n    };\n\n    var create$1 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$1 };\n\n    var create = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 1) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find$1(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left$1,\n      right: right$1\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$1 = function (universe, item, isRoot) {\n      return seekLeft$1(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$1 = function (universe, item, isRoot) {\n      return seekRight$1(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft$1 = left;\n    var seekRight$1 = right;\n\n    var universe = DomUniverse();\n    var before = function (element, isRoot) {\n      return before$1(universe, element, isRoot);\n    };\n    var after = function (element, isRoot) {\n      return after$1(universe, element, isRoot);\n    };\n    var seekLeft = function (element, predicate, isRoot) {\n      return seekLeft$1(universe, element, predicate, isRoot);\n    };\n    var seekRight = function (element, predicate, isRoot) {\n      return seekRight$1(universe, element, predicate, isRoot);\n    };\n\n    var ancestor = function (scope, predicate, isRoot) {\n      return ancestor$2(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$1.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$1.none('in same cell');\n          }\n        });\n      }).getOr(adt$1.none('default'));\n    };\n    var cata = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$1), {\n      verify: verify,\n      cata: cata\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children = children$3(parent);\n        return indexOf(children, element).map(function (index) {\n          return inParent(parent, children, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$9(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child$3(element, offset).filter(isBr).orThunk(function () {\n        return child$3(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest$2(element, isBlock).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt.none();\n      }\n    };\n    var upMovement = {\n      point: getTop,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    var MouseSelection = function (bridge, container, isRoot, annotations) {\n      var cursor = value();\n      var clearstate = cursor.clear;\n      var applySelection = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length === 1) {\n                var singleCell = boxes[0];\n                var isNonEditableCell = getRaw(singleCell) === 'false';\n                var isCellClosestContentEditable = is(closest(event.target), singleCell, eq$1);\n                if (isNonEditableCell && isCellClosestContentEditable) {\n                  annotations.selectRange(container, boxes, singleCell, singleCell);\n                  bridge.selectContents(singleCell);\n                }\n              } else if (boxes.length > 1) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        applySelection(event);\n      };\n      var mouseup = function (event) {\n        applySelection(event);\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    };\n\n    var down = {\n      traverse: nextSibling,\n      gather: after,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect(win, sel);\n      };\n      var getSelection = function () {\n        return get$1(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$1(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectNode = function (element) {\n        setToElement(win, element, false);\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectNode: selectNode,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve$1(container, annotations.selectedSelector).fold(function () {\n          if (isNavigation(keycode) && !shiftKey) {\n            annotations.clearBeforeUpdate(container);\n          }\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && !shiftKey) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve$1(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (!shiftKey) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove = function (element, classes) {\n      each$2(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants(container, ephemera.selectedSelector);\n        each$2(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each$2(cells, addSelectionClass);\n        add(start, ephemera.firstSelected);\n        add(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove$7(element, ephemera.selected);\n        remove$7(element, ephemera.firstSelected);\n        remove$7(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set$2(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants(container, ephemera.selectedSelector + ',' + ephemera.firstSelectedSelector + ',' + ephemera.lastSelectedSelector);\n        each$2(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each$2(cells, addSelectionAttribute);\n        set$2(start, ephemera.firstSelected, '1');\n        set$2(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid);\n      return bind$2(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map$1(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid);\n      return bind$2(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map$1(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var hasInternalTarget = function (e) {\n      return has(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr, rtl)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var child = function (scope, selector) {\n      return child$1(scope, selector).isSome();\n    };\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var selectionDetails = Optional.none();\n      var isCaption = isTag('caption');\n      var isDisabledForSelection = function (key) {\n        return selectionDetails.forall(function (details) {\n          return !details[key];\n        });\n      };\n      var getStart = function () {\n        return getSelectionCellOrCaption(getSelectionStart(editor), getIsRoot(editor));\n      };\n      var getEnd = function () {\n        return getSelectionCellOrCaption(getSelectionEnd(editor), getIsRoot(editor));\n      };\n      var findTargets = function () {\n        return getStart().bind(function (startCellOrCaption) {\n          return flatten(lift2(table(startCellOrCaption), getEnd().bind(table), function (startTable, endTable) {\n            if (eq$1(startTable, endTable)) {\n              if (isCaption(startCellOrCaption)) {\n                return Optional.some(noMenu(startCellOrCaption));\n              } else {\n                return Optional.some(forMenu(selections, startTable, startCellOrCaption));\n              }\n            }\n            return Optional.none();\n          }));\n        });\n      };\n      var getExtractedDetails = function (targets) {\n        var tableOpt = table(targets.element);\n        return tableOpt.map(function (table) {\n          var warehouse = Warehouse.fromTable(table);\n          var selectedCells = onCells(warehouse, targets).getOr([]);\n          var locked = foldl(selectedCells, function (acc, cell) {\n            if (cell.isLocked) {\n              acc.onAny = true;\n              if (cell.column === 0) {\n                acc.onFirst = true;\n              } else if (cell.column + cell.colspan >= warehouse.grid.columns) {\n                acc.onLast = true;\n              }\n            }\n            return acc;\n          }, {\n            onAny: false,\n            onFirst: false,\n            onLast: false\n          });\n          return {\n            mergeable: onUnlockedMergable(warehouse, targets).isSome(),\n            unmergeable: onUnlockedUnmergable(warehouse, targets).isSome(),\n            locked: locked\n          };\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        selectionDetails = targets.get().bind(getExtractedDetails);\n        each$2(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var setupHandler = function (handler) {\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter$2(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var onSetup = function (api, isDisabled) {\n        return setupHandler(function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        });\n      };\n      var onSetupWithToggle = function (api, isDisabled, isActive) {\n        return setupHandler(function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n            api.setActive(false);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n            api.setActive(isActive(targets));\n          });\n        });\n      };\n      var isDisabledFromLocked = function (lockedDisable) {\n        return selectionDetails.exists(function (details) {\n          return details.locked[lockedDisable];\n        });\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return isCaption(targets.element);\n        });\n      };\n      var onSetupColumn = function (lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupPasteableColumn = function (getClipboardData, lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('mergeable');\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('unmergeable');\n        });\n      };\n      var onSetupTableWithCaption = function (api) {\n        return onSetupWithToggle(api, never, function (targets) {\n          var tableOpt = table(targets.element, getIsRoot(editor));\n          return tableOpt.exists(function (table) {\n            return child(table, 'caption');\n          });\n        });\n      };\n      var onSetupTableHeaders = function (command, headerType) {\n        return function (api) {\n          return onSetupWithToggle(api, function (targets) {\n            return isCaption(targets.element);\n          }, function () {\n            return editor.queryCommandValue(command) === headerType;\n          });\n        };\n      };\n      var onSetupTableRowHeaders = onSetupTableHeaders('mceTableRowType', 'header');\n      var onSetupTableColumnHeaders = onSetupTableHeaders('mceTableColType', 'th');\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupColumn: onSetupColumn,\n        onSetupPasteable: onSetupPasteable,\n        onSetupPasteableColumn: onSetupPasteableColumn,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        onSetupTableWithCaption: onSetupTableWithCaption,\n        onSetupTableRowHeaders: onSetupTableRowHeaders,\n        onSetupTableColumnHeaders: onSetupTableColumnHeaders,\n        targets: targets.get\n      };\n    };\n\n    var addButtons = function (editor, selections, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n      var tableClassList = filterNoneItem(getTableClassList(editor));\n      if (tableClassList.length !== 0) {\n        editor.ui.registry.addMenuButton('tableclass', {\n          icon: 'table-classes',\n          tooltip: 'Table styles',\n          fetch: generateMenuItemsCallback(editor, selections, tableClassList, 'tableclass', function (value) {\n            return editor.execCommand('mceTableToggleClass', false, value);\n          }),\n          onSetup: selectionTargets.onSetupTable\n        });\n      }\n      var tableCellClassList = filterNoneItem(getCellClassList(editor));\n      if (tableCellClassList.length !== 0) {\n        editor.ui.registry.addMenuButton('tablecellclass', {\n          icon: 'table-cell-classes',\n          tooltip: 'Cell styles',\n          fetch: generateMenuItemsCallback(editor, selections, tableCellClassList, 'tablecellclass', function (value) {\n            return editor.execCommand('mceTableCellToggleClass', false, value);\n          }),\n          onSetup: selectionTargets.onSetupCellOrRow\n        });\n      }\n      editor.ui.registry.addMenuButton('tablecellvalign', {\n        icon: 'vertical-align',\n        tooltip: 'Vertical align',\n        fetch: generateMenuItemsCallback(editor, selections, verticalAlignValues, 'tablecellverticalalign', applyTableCellStyle(editor, 'vertical-align')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellborderwidth', {\n        icon: 'border-width',\n        tooltip: 'Border width',\n        fetch: generateMenuItemsCallback(editor, selections, getTableBorderWidths(editor), 'tablecellborderwidth', applyTableCellStyle(editor, 'border-width')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellborderstyle', {\n        icon: 'border-style',\n        tooltip: 'Border style',\n        fetch: generateMenuItemsCallback(editor, selections, getTableBorderStyles(editor), 'tablecellborderstyle', applyTableCellStyle(editor, 'border-style')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleButton('tablecaption', {\n        tooltip: 'Table caption',\n        onAction: cmd('mceTableToggleCaption'),\n        icon: 'table-caption',\n        onSetup: selectionTargets.onSetupTableWithCaption\n      });\n      editor.ui.registry.addMenuButton('tablecellbackgroundcolor', {\n        icon: 'cell-background-color',\n        tooltip: 'Background color',\n        fetch: function (callback) {\n          return callback(buildColorMenu(editor, getTableBackgroundColorMap(editor), 'background-color'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellbordercolor', {\n        icon: 'cell-border-color',\n        tooltip: 'Border color',\n        fetch: function (callback) {\n          return callback(buildColorMenu(editor, getTableBorderColorMap(editor), 'border-color'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleButton('tablerowheader', {\n        tooltip: 'Row header',\n        icon: 'table-top-header',\n        onAction: changeRowHeader(editor),\n        onSetup: selectionTargets.onSetupTableRowHeaders\n      });\n      editor.ui.registry.addToggleButton('tablecolheader', {\n        tooltip: 'Column header',\n        icon: 'table-left-header',\n        onAction: changeColumnHeader(editor),\n        onSetup: selectionTargets.onSetupTableColumnHeaders\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selections, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: constant('tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter')\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: constant('tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter')\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: constant('tablecellprops tablemergecells tablesplitcells')\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(constant(''), function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n      var tableClassList = filterNoneItem(getTableClassList(editor));\n      if (tableClassList.length !== 0) {\n        editor.ui.registry.addNestedMenuItem('tableclass', {\n          icon: 'table-classes',\n          text: 'Table styles',\n          getSubmenuItems: function () {\n            return buildMenuItems(editor, selections, tableClassList, 'tableclass', function (value) {\n              return editor.execCommand('mceTableToggleClass', false, value);\n            });\n          },\n          onSetup: selectionTargets.onSetupTable\n        });\n      }\n      var tableCellClassList = filterNoneItem(getCellClassList(editor));\n      if (tableCellClassList.length !== 0) {\n        editor.ui.registry.addNestedMenuItem('tablecellclass', {\n          icon: 'table-cell-classes',\n          text: 'Cell styles',\n          getSubmenuItems: function () {\n            return buildMenuItems(editor, selections, tableCellClassList, 'tablecellclass', function (value) {\n              return editor.execCommand('mceTableCellToggleClass', false, value);\n            });\n          },\n          onSetup: selectionTargets.onSetupCellOrRow\n        });\n      }\n      editor.ui.registry.addNestedMenuItem('tablecellvalign', {\n        icon: 'vertical-align',\n        text: 'Vertical align',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, verticalAlignValues, 'tablecellverticalalign', applyTableCellStyle(editor, 'vertical-align'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellborderwidth', {\n        icon: 'border-width',\n        text: 'Border width',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, getTableBorderWidths(editor), 'tablecellborderwidth', applyTableCellStyle(editor, 'border-width'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellborderstyle', {\n        icon: 'border-style',\n        text: 'Border style',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, getTableBorderStyles(editor), 'tablecellborderstyle', applyTableCellStyle(editor, 'border-style'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleMenuItem('tablecaption', {\n        icon: 'table-caption',\n        text: 'Table caption',\n        onAction: cmd('mceTableToggleCaption'),\n        onSetup: selectionTargets.onSetupTableWithCaption\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellbackgroundcolor', {\n        icon: 'cell-background-color',\n        text: 'Background color',\n        getSubmenuItems: function () {\n          return buildColorMenu(editor, getTableBackgroundColorMap(editor), 'background-color');\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellbordercolor', {\n        icon: 'cell-border-color',\n        text: 'Border color',\n        getSubmenuItems: function () {\n          return buildColorMenu(editor, getTableBorderColorMap(editor), 'border-color');\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleMenuItem('tablerowheader', {\n        text: 'Row header',\n        icon: 'table-top-header',\n        onAction: changeRowHeader(editor),\n        onSetup: selectionTargets.onSetupTableRowHeaders\n      });\n      editor.ui.registry.addToggleMenuItem('tablecolheader', {\n        text: 'Column header',\n        icon: 'table-left-header',\n        onAction: changeColumnHeader(editor),\n        onSetup: selectionTargets.onSetupTableColumnHeaders\n      });\n    };\n\n    var Plugin = function (editor) {\n      var selections = Selections(function () {\n        return getBody(editor);\n      }, function () {\n        return getSelectionCell(getSelectionStart(editor), getIsRoot(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, cellSelection, resizeHandler.lazyWire);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions);\n      addMenuItems(editor, selections, selectionTargets, clipboard);\n      addButtons(editor, selections, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, cellSelection);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    };\n    function Plugin$1 () {\n      global$3.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$4(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      var attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var sanitizeData = function (editor, data) {\n      var href = data.href;\n      return __assign(__assign({}, data), { href: global$3.isDomSafe(href, 'a', editor.settings) ? href : '' });\n    };\n    var link = function (editor, attachState, data) {\n      var sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$2.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$1.resolve(data);\n      }, function (transform) {\n        return new global$1(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$1(function (callback) {\n        if (isString(linkList)) {\n          global.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = is(initialTarget, '_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !is(info.anchor[key], value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open$1(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$6.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      var getLinkText = function (value) {\n        var anchor = getAnchorElement(editor);\n        var onlyText = isOnlyTextSelected(editor);\n        if (!anchor && onlyText) {\n          var text = getAnchorText(editor.selection, anchor);\n          return Optional.some(text.length > 0 ? text : value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var value = formApi.getValue();\n              var text = getLinkText(value);\n              var attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text: text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.none(),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global$7.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var nativePush = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var hasDimensions = function (editor) {\n      return editor.getParam('image_dimensions', true, 'boolean');\n    };\n    var hasAdvTab = function (editor) {\n      return editor.getParam('image_advtab', false, 'boolean');\n    };\n    var hasUploadTab = function (editor) {\n      return editor.getParam('image_uploadtab', true, 'boolean');\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '', 'string');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.getParam('image_description', true, 'boolean');\n    };\n    var hasImageTitle = function (editor) {\n      return editor.getParam('image_title', false, 'boolean');\n    };\n    var hasImageCaption = function (editor) {\n      return editor.getParam('image_caption', false, 'boolean');\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return isNonNullable(editor.getParam('images_upload_url'));\n    };\n    var hasUploadHandler = function (editor) {\n      return isNonNullable(editor.getParam('images_upload_handler'));\n    };\n    var showAccessibilityOptions = function (editor) {\n      return editor.getParam('a11y_advanced_options', false, 'boolean');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url) {\n      return new global$4(function (callback) {\n        var img = document.createElement('img');\n        var done = function (dimensions) {\n          img.onload = img.onerror = null;\n          if (img.parentNode) {\n            img.parentNode.removeChild(img);\n          }\n          callback(dimensions);\n        };\n        img.onload = function () {\n          var width = parseIntAndGetMax(img.width, img.clientWidth);\n          var height = parseIntAndGetMax(img.height, img.clientHeight);\n          var dimensions = {\n            width: width,\n            height: height\n          };\n          done(global$4.resolve(dimensions));\n        };\n        img.onerror = function () {\n          done(global$4.reject('Failed to get image dimensions for: ' + url));\n        };\n        var style = img.style;\n        style.visibility = 'hidden';\n        style.position = 'fixed';\n        style.bottom = style.left = '0px';\n        style.width = style.height = 'auto';\n        document.body.appendChild(img);\n        img.src = url;\n      });\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = String(css.margin).split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = getImageList(editor);\n      if (isString(imageList)) {\n        global$2.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (isFunction(imageList)) {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      var selectImage = function () {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      };\n      imgElm.onload = function () {\n        if (!data.width && !data.height && hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: String(imgElm.clientWidth),\n            height: String(imgElm.clientHeight)\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$4(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var isPlaceholderImage = function (imgElm) {\n      return imgElm.nodeName === 'IMG' && (imgElm.hasAttribute('data-mce-object') || imgElm.hasAttribute('data-mce-placeholder'));\n    };\n    var isSafeImageUrl = function (editor, src) {\n      return global$3.isDomSafe(src, 'img', editor.settings);\n    };\n\n    var DOM = global$5.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var updateAttrib = function (image, name, value) {\n      if (value === '') {\n        image.removeAttribute(name);\n      } else {\n        image.setAttribute(name, value);\n      }\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          updateAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var isImage = function (elm) {\n      return elm.nodeName === 'IMG';\n    };\n    var getIsDecorative = function (image) {\n      return DOM.getAttrib(image, 'alt').length === 0 && DOM.getAttrib(image, 'role') === 'presentation';\n    };\n    var getAlt = function (image) {\n      if (getIsDecorative(image)) {\n        return '';\n      } else {\n        return getAttrib(image, 'alt');\n      }\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: '',\n        isDecorative: false\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = document.createElement('img');\n      updateAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = document.createElement('img');\n      write(normalizeCss, __assign(__assign({}, data), { caption: false }), image);\n      setAlt(image, data.alt, data.isDecorative);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAlt(image),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle'),\n        isDecorative: getIsDecorative(image)\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var setAlt = function (image, alt, isDecorative) {\n      if (isDecorative) {\n        DOM.setAttrib(image, 'role', 'presentation');\n        var sugarImage = SugarElement.fromDom(image);\n        set(sugarImage, 'alt', '');\n      } else {\n        if (isNull(alt)) {\n          var sugarImage = SugarElement.fromDom(image);\n          remove(sugarImage, 'alt');\n        } else {\n          var sugarImage = SugarElement.fromDom(image);\n          set(sugarImage, 'alt', alt);\n        }\n        if (DOM.getAttrib(image, 'role') === 'presentation') {\n          DOM.setAttrib(image, 'role', '');\n        }\n      }\n    };\n    var updateAlt = function (image, oldData, newData) {\n      if (newData.alt !== oldData.alt || newData.isDecorative !== oldData.isDecorative) {\n        setAlt(image, newData.alt, newData.isDecorative);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', updateAttrib);\n      updateProp(image, oldData, newData, 'title', updateAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', updateAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return updateAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n      updateAlt(image, oldData, newData);\n    };\n\n    var normalizeCss$1 = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || isPlaceholderImage(imgElm))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlockElements = filter(editor.schema.getTextBlockElements(), function (_, parentElm) {\n        return !editor.schema.isValidChild(parentElm, 'figure');\n      });\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return hasNonNullableKey(textBlockElements, node.nodeName);\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss$1(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss$1(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss$1(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        waitLoadImage(editor, data, image);\n      }\n    };\n    var sanitizeImageData = function (editor, data) {\n      var src = data.src;\n      return __assign(__assign({}, data), { src: isSafeImageUrl(editor, src) ? src : '' });\n    };\n    var insertOrUpdateImage = function (editor, partialData) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        var selectedImageData = read(function (css) {\n          return normalizeCss$1(editor, css);\n        }, image);\n        var data = __assign(__assign({}, selectedImageData), partialData);\n        var sanitizedData = sanitizeImageData(editor, data);\n        if (data.src) {\n          writeImageDataToSelection(editor, sanitizedData);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (partialData.src) {\n        insertImageAtCaret(editor, __assign(__assign({}, defaultData()), partialData));\n      }\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.ImageUploader');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizer = function (extractor) {\n      if (extractor === void 0) {\n        extractor = getValue;\n      }\n      return function (list) {\n        if (list) {\n          return Optional.from(list).map(function (list) {\n            return sanitizeList(list, extractor);\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizer(getValue)(list);\n    };\n    var isGroup = function (item) {\n      return has(item, 'items');\n    };\n    var findEntryDelegate = function (list, value) {\n      return findMap(list, function (item) {\n        if (isGroup(item)) {\n          return findEntryDelegate(item.items, value);\n        } else if (item.value === value) {\n          return Optional.some(item);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var findEntry = function (optList, value) {\n      return optList.bind(function (list) {\n        return findEntryDelegate(list, value);\n      });\n    };\n    var ListUtils = {\n      sanitizer: sanitizer,\n      sanitize: sanitize,\n      findEntry: findEntry\n    };\n\n    var makeTab$2 = function (_info) {\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: [\n          {\n            type: 'input',\n            label: 'Style',\n            name: 'style'\n          },\n          {\n            type: 'grid',\n            columns: 2,\n            items: [\n              {\n                type: 'input',\n                label: 'Vertical space',\n                name: 'vspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Horizontal space',\n                name: 'hspace',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'input',\n                label: 'Border width',\n                name: 'border',\n                inputMode: 'numeric'\n              },\n              {\n                type: 'listbox',\n                name: 'borderstyle',\n                label: 'Border style',\n                items: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab$2 };\n\n    var collect = function (editor) {\n      var urlListSanitizer = ListUtils.sanitizer(function (item) {\n        return editor.convertURL(item.value || item.url, 'src');\n      });\n      var futureImageList = new global$4(function (completer) {\n        createImageList(editor, function (imageList) {\n          completer(urlListSanitizer(imageList).map(function (items) {\n            return flatten([\n              [{\n                  text: 'None',\n                  value: ''\n                }],\n              items\n            ]);\n          }));\n        });\n      });\n      var classList = ListUtils.sanitize(getClassList(editor));\n      var hasAdvTab$1 = hasAdvTab(editor);\n      var hasUploadTab$1 = hasUploadTab(editor);\n      var hasUploadUrl$1 = hasUploadUrl(editor);\n      var hasUploadHandler$1 = hasUploadHandler(editor);\n      var image = readImageDataFromSelection(editor);\n      var hasDescription$1 = hasDescription(editor);\n      var hasImageTitle$1 = hasImageTitle(editor);\n      var hasDimensions$1 = hasDimensions(editor);\n      var hasImageCaption$1 = hasImageCaption(editor);\n      var hasAccessibilityOptions = showAccessibilityOptions(editor);\n      var automaticUploads = isAutomaticUploadsEnabled(editor);\n      var prependURL = Optional.some(getPrependUrl(editor)).filter(function (preUrl) {\n        return isString(preUrl) && preUrl.length > 0;\n      });\n      return futureImageList.then(function (imageList) {\n        return {\n          image: image,\n          imageList: imageList,\n          classList: classList,\n          hasAdvTab: hasAdvTab$1,\n          hasUploadTab: hasUploadTab$1,\n          hasUploadUrl: hasUploadUrl$1,\n          hasUploadHandler: hasUploadHandler$1,\n          hasDescription: hasDescription$1,\n          hasImageTitle: hasImageTitle$1,\n          hasDimensions: hasDimensions$1,\n          hasImageCaption: hasImageCaption$1,\n          prependURL: prependURL,\n          hasAccessibilityOptions: hasAccessibilityOptions,\n          automaticUploads: automaticUploads\n        };\n      });\n    };\n\n    var makeItems = function (info) {\n      var imageUrl = {\n        name: 'src',\n        type: 'urlinput',\n        filetype: 'image',\n        label: 'Source'\n      };\n      var imageList = info.imageList.map(function (items) {\n        return {\n          name: 'images',\n          type: 'listbox',\n          label: 'Image list',\n          items: items\n        };\n      });\n      var imageDescription = {\n        name: 'alt',\n        type: 'input',\n        label: 'Alternative description',\n        disabled: info.hasAccessibilityOptions && info.image.isDecorative\n      };\n      var imageTitle = {\n        name: 'title',\n        type: 'input',\n        label: 'Image title'\n      };\n      var imageDimensions = {\n        name: 'dimensions',\n        type: 'sizeinput'\n      };\n      var isDecorative = {\n        type: 'label',\n        label: 'Accessibility',\n        items: [{\n            name: 'isDecorative',\n            type: 'checkbox',\n            label: 'Image is decorative'\n          }]\n      };\n      var classList = info.classList.map(function (items) {\n        return {\n          name: 'classes',\n          type: 'listbox',\n          label: 'Class',\n          items: items\n        };\n      });\n      var caption = {\n        type: 'label',\n        label: 'Caption',\n        items: [{\n            type: 'checkbox',\n            name: 'caption',\n            label: 'Show caption'\n          }]\n      };\n      var getDialogContainerType = function (useColumns) {\n        return useColumns ? {\n          type: 'grid',\n          columns: 2\n        } : { type: 'panel' };\n      };\n      return flatten([\n        [imageUrl],\n        imageList.toArray(),\n        info.hasAccessibilityOptions && info.hasDescription ? [isDecorative] : [],\n        info.hasDescription ? [imageDescription] : [],\n        info.hasImageTitle ? [imageTitle] : [],\n        info.hasDimensions ? [imageDimensions] : [],\n        [__assign(__assign({}, getDialogContainerType(info.classList.isSome() && info.hasImageCaption)), {\n            items: flatten([\n              classList.toArray(),\n              info.hasImageCaption ? [caption] : []\n            ])\n          })]\n      ]);\n    };\n    var makeTab$1 = function (info) {\n      return {\n        title: 'General',\n        name: 'general',\n        items: makeItems(info)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab$1,\n      makeItems: makeItems\n    };\n\n    var makeTab = function (_info) {\n      var items = [{\n          type: 'dropzone',\n          name: 'fileinput'\n        }];\n      return {\n        title: 'Upload',\n        name: 'upload',\n        items: items\n      };\n    };\n    var UploadTab = { makeTab: makeTab };\n\n    var createState = function (info) {\n      return {\n        prevImage: ListUtils.findEntry(info.imageList, info.image.src),\n        prevAlt: info.image.alt,\n        open: true\n      };\n    };\n    var fromImageData = function (image) {\n      return {\n        src: {\n          value: image.src,\n          meta: {}\n        },\n        images: image.src,\n        alt: image.alt,\n        title: image.title,\n        dimensions: {\n          width: image.width,\n          height: image.height\n        },\n        classes: image.class,\n        caption: image.caption,\n        style: image.style,\n        vspace: image.vspace,\n        border: image.border,\n        hspace: image.hspace,\n        borderstyle: image.borderStyle,\n        fileinput: [],\n        isDecorative: image.isDecorative\n      };\n    };\n    var toImageData = function (data, removeEmptyAlt) {\n      return {\n        src: data.src.value,\n        alt: data.alt.length === 0 && removeEmptyAlt ? null : data.alt,\n        title: data.title,\n        width: data.dimensions.width,\n        height: data.dimensions.height,\n        class: data.classes,\n        style: data.style,\n        caption: data.caption,\n        hspace: data.hspace,\n        vspace: data.vspace,\n        border: data.border,\n        borderStyle: data.borderstyle,\n        isDecorative: data.isDecorative\n      };\n    };\n    var addPrependUrl2 = function (info, srcURL) {\n      if (!/^(?:[a-zA-Z]+:)?\\/\\//.test(srcURL)) {\n        return info.prependURL.bind(function (prependUrl) {\n          if (srcURL.substring(0, prependUrl.length) !== prependUrl) {\n            return Optional.some(prependUrl + srcURL);\n          }\n          return Optional.none();\n        });\n      }\n      return Optional.none();\n    };\n    var addPrependUrl = function (info, api) {\n      var data = api.getData();\n      addPrependUrl2(info, data.src.value).each(function (srcURL) {\n        api.setData({\n          src: {\n            value: srcURL,\n            meta: data.src.meta\n          }\n        });\n      });\n    };\n    var formFillFromMeta2 = function (info, data, meta) {\n      if (info.hasDescription && isString(meta.alt)) {\n        data.alt = meta.alt;\n      }\n      if (info.hasAccessibilityOptions) {\n        data.isDecorative = meta.isDecorative || data.isDecorative || false;\n      }\n      if (info.hasImageTitle && isString(meta.title)) {\n        data.title = meta.title;\n      }\n      if (info.hasDimensions) {\n        if (isString(meta.width)) {\n          data.dimensions.width = meta.width;\n        }\n        if (isString(meta.height)) {\n          data.dimensions.height = meta.height;\n        }\n      }\n      if (isString(meta.class)) {\n        ListUtils.findEntry(info.classList, meta.class).each(function (entry) {\n          data.classes = entry.value;\n        });\n      }\n      if (info.hasImageCaption) {\n        if (isBoolean(meta.caption)) {\n          data.caption = meta.caption;\n        }\n      }\n      if (info.hasAdvTab) {\n        if (isString(meta.style)) {\n          data.style = meta.style;\n        }\n        if (isString(meta.vspace)) {\n          data.vspace = meta.vspace;\n        }\n        if (isString(meta.border)) {\n          data.border = meta.border;\n        }\n        if (isString(meta.hspace)) {\n          data.hspace = meta.hspace;\n        }\n        if (isString(meta.borderstyle)) {\n          data.borderstyle = meta.borderstyle;\n        }\n      }\n    };\n    var formFillFromMeta = function (info, api) {\n      var data = api.getData();\n      var meta = data.src.meta;\n      if (meta !== undefined) {\n        var newData = deepMerge({}, data);\n        formFillFromMeta2(info, newData, meta);\n        api.setData(newData);\n      }\n    };\n    var calculateImageSize = function (helpers, info, state, api) {\n      var data = api.getData();\n      var url = data.src.value;\n      var meta = data.src.meta || {};\n      if (!meta.width && !meta.height && info.hasDimensions) {\n        if (isNotEmpty(url)) {\n          helpers.imageSize(url).then(function (size) {\n            if (state.open) {\n              api.setData({ dimensions: size });\n            }\n          }).catch(function (e) {\n            return console.error(e);\n          });\n        } else {\n          api.setData({\n            dimensions: {\n              width: '',\n              height: ''\n            }\n          });\n        }\n      }\n    };\n    var updateImagesDropdown = function (info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.src.value);\n      state.prevImage = image;\n      api.setData({\n        images: image.map(function (entry) {\n          return entry.value;\n        }).getOr('')\n      });\n    };\n    var changeSrc = function (helpers, info, state, api) {\n      addPrependUrl(info, api);\n      formFillFromMeta(info, api);\n      calculateImageSize(helpers, info, state, api);\n      updateImagesDropdown(info, state, api);\n    };\n    var changeImages = function (helpers, info, state, api) {\n      var data = api.getData();\n      var image = ListUtils.findEntry(info.imageList, data.images);\n      image.each(function (img) {\n        var updateAlt = data.alt === '' || state.prevImage.map(function (image) {\n          return image.text === data.alt;\n        }).getOr(false);\n        if (updateAlt) {\n          if (img.value === '') {\n            api.setData({\n              src: img,\n              alt: state.prevAlt\n            });\n          } else {\n            api.setData({\n              src: img,\n              alt: img.text\n            });\n          }\n        } else {\n          api.setData({ src: img });\n        }\n      });\n      state.prevImage = image;\n      changeSrc(helpers, info, state, api);\n    };\n    var calcVSpace = function (css) {\n      var matchingTopBottom = css['margin-top'] && css['margin-bottom'] && css['margin-top'] === css['margin-bottom'];\n      return matchingTopBottom ? removePixelSuffix(String(css['margin-top'])) : '';\n    };\n    var calcHSpace = function (css) {\n      var matchingLeftRight = css['margin-right'] && css['margin-left'] && css['margin-right'] === css['margin-left'];\n      return matchingLeftRight ? removePixelSuffix(String(css['margin-right'])) : '';\n    };\n    var calcBorderWidth = function (css) {\n      return css['border-width'] ? removePixelSuffix(String(css['border-width'])) : '';\n    };\n    var calcBorderStyle = function (css) {\n      return css['border-style'] ? String(css['border-style']) : '';\n    };\n    var calcStyle = function (parseStyle, serializeStyle, css) {\n      return serializeStyle(parseStyle(serializeStyle(css)));\n    };\n    var changeStyle2 = function (parseStyle, serializeStyle, data) {\n      var css = mergeMargins(parseStyle(data.style));\n      var dataCopy = deepMerge({}, data);\n      dataCopy.vspace = calcVSpace(css);\n      dataCopy.hspace = calcHSpace(css);\n      dataCopy.border = calcBorderWidth(css);\n      dataCopy.borderstyle = calcBorderStyle(css);\n      dataCopy.style = calcStyle(parseStyle, serializeStyle, css);\n      return dataCopy;\n    };\n    var changeStyle = function (helpers, api) {\n      var data = api.getData();\n      var newData = changeStyle2(helpers.parseStyle, helpers.serializeStyle, data);\n      api.setData(newData);\n    };\n    var changeAStyle = function (helpers, info, api) {\n      var data = deepMerge(fromImageData(info.image), api.getData());\n      var style = getStyleValue(helpers.normalizeCss, toImageData(data, false));\n      api.setData({ style: style });\n    };\n    var changeFileInput = function (helpers, info, state, api) {\n      var data = api.getData();\n      api.block('Uploading image');\n      head(data.fileinput).fold(function () {\n        api.unblock();\n      }, function (file) {\n        var blobUri = URL.createObjectURL(file);\n        var finalize = function () {\n          api.unblock();\n          URL.revokeObjectURL(blobUri);\n        };\n        var updateSrcAndSwitchTab = function (url) {\n          api.setData({\n            src: {\n              value: url,\n              meta: {}\n            }\n          });\n          api.showTab('general');\n          changeSrc(helpers, info, state, api);\n        };\n        blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = helpers.createBlobCache(file, blobUri, dataUrl);\n          if (info.automaticUploads) {\n            helpers.uploadImage(blobInfo).then(function (result) {\n              updateSrcAndSwitchTab(result.url);\n              finalize();\n            }).catch(function (err) {\n              finalize();\n              helpers.alertErr(err);\n            });\n          } else {\n            helpers.addToBlobCache(blobInfo);\n            updateSrcAndSwitchTab(blobInfo.blobUri());\n            api.unblock();\n          }\n        });\n      });\n    };\n    var changeHandler = function (helpers, info, state) {\n      return function (api, evt) {\n        if (evt.name === 'src') {\n          changeSrc(helpers, info, state, api);\n        } else if (evt.name === 'images') {\n          changeImages(helpers, info, state, api);\n        } else if (evt.name === 'alt') {\n          state.prevAlt = api.getData().alt;\n        } else if (evt.name === 'style') {\n          changeStyle(helpers, api);\n        } else if (evt.name === 'vspace' || evt.name === 'hspace' || evt.name === 'border' || evt.name === 'borderstyle') {\n          changeAStyle(helpers, info, api);\n        } else if (evt.name === 'fileinput') {\n          changeFileInput(helpers, info, state, api);\n        } else if (evt.name === 'isDecorative') {\n          if (api.getData().isDecorative) {\n            api.disable('alt');\n          } else {\n            api.enable('alt');\n          }\n        }\n      };\n    };\n    var closeHandler = function (state) {\n      return function () {\n        state.open = false;\n      };\n    };\n    var makeDialogBody = function (info) {\n      if (info.hasAdvTab || info.hasUploadUrl || info.hasUploadHandler) {\n        var tabPanel = {\n          type: 'tabpanel',\n          tabs: flatten([\n            [MainTab.makeTab(info)],\n            info.hasAdvTab ? [AdvTab.makeTab(info)] : [],\n            info.hasUploadTab && (info.hasUploadUrl || info.hasUploadHandler) ? [UploadTab.makeTab(info)] : []\n          ])\n        };\n        return tabPanel;\n      } else {\n        var panel = {\n          type: 'panel',\n          items: MainTab.makeItems(info)\n        };\n        return panel;\n      }\n    };\n    var makeDialog = function (helpers) {\n      return function (info) {\n        var state = createState(info);\n        return {\n          title: 'Insert/Edit Image',\n          size: 'normal',\n          body: makeDialogBody(info),\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: fromImageData(info.image),\n          onSubmit: helpers.onSubmit(info),\n          onChange: changeHandler(helpers, info, state),\n          onClose: closeHandler(state)\n        };\n      };\n    };\n    var submitHandler = function (editor) {\n      return function (info) {\n        return function (api) {\n          var data = deepMerge(fromImageData(info.image), api.getData());\n          editor.execCommand('mceUpdateImage', false, toImageData(data, info.hasAccessibilityOptions));\n          editor.editorUpload.uploadImagesAuto();\n          api.close();\n        };\n      };\n    };\n    var imageSize = function (editor) {\n      return function (url) {\n        if (!isSafeImageUrl(editor, url)) {\n          return global$4.resolve({\n            width: '',\n            height: ''\n          });\n        } else {\n          return getImageSize(editor.documentBaseURI.toAbsolute(url)).then(function (dimensions) {\n            return {\n              width: String(dimensions.width),\n              height: String(dimensions.height)\n            };\n          });\n        }\n      };\n    };\n    var createBlobCache = function (editor) {\n      return function (file, blobUri, dataUrl) {\n        return editor.editorUpload.blobCache.create({\n          blob: file,\n          blobUri: blobUri,\n          name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n          filename: file.name,\n          base64: dataUrl.split(',')[1]\n        });\n      };\n    };\n    var addToBlobCache = function (editor) {\n      return function (blobInfo) {\n        editor.editorUpload.blobCache.add(blobInfo);\n      };\n    };\n    var alertErr = function (editor) {\n      return function (message) {\n        editor.windowManager.alert(message);\n      };\n    };\n    var normalizeCss = function (editor) {\n      return function (cssText) {\n        return normalizeCss$1(editor, cssText);\n      };\n    };\n    var parseStyle = function (editor) {\n      return function (cssText) {\n        return editor.dom.parseStyle(cssText);\n      };\n    };\n    var serializeStyle = function (editor) {\n      return function (stylesArg, name) {\n        return editor.dom.serializeStyle(stylesArg, name);\n      };\n    };\n    var uploadImage = function (editor) {\n      return function (blobInfo) {\n        return global$1(editor).upload([blobInfo], false).then(function (results) {\n          if (results.length === 0) {\n            return global$4.reject('Failed to upload image');\n          } else if (results[0].status === false) {\n            return global$4.reject(results[0].error.message);\n          } else {\n            return results[0];\n          }\n        });\n      };\n    };\n    var Dialog = function (editor) {\n      var helpers = {\n        onSubmit: submitHandler(editor),\n        imageSize: imageSize(editor),\n        addToBlobCache: addToBlobCache(editor),\n        createBlobCache: createBlobCache(editor),\n        alertErr: alertErr(editor),\n        normalizeCss: normalizeCss(editor),\n        parseStyle: parseStyle(editor),\n        serializeStyle: serializeStyle(editor),\n        uploadImage: uploadImage(editor)\n      };\n      var open = function () {\n        collect(editor).then(makeDialog(helpers)).then(editor.windowManager.open);\n      };\n      return { open: open };\n    };\n\n    var register$1 = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n      editor.addCommand('mceUpdateImage', function (_ui, data) {\n        editor.undoManager.transact(function () {\n          return insertOrUpdateImage(editor, data);\n        });\n      });\n    };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          var node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n\n    var register = function (editor) {\n      editor.ui.registry.addToggleButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onAction: Dialog(editor).open,\n        onSetup: function (buttonApi) {\n          buttonApi.setActive(isNonNullable(getSelectedImage(editor)));\n          return editor.selection.selectorChangedWithUnbind('img:not([data-mce-object],[data-mce-placeholder]),figure.image', buttonApi.setActive).unbind;\n        }\n      });\n      editor.ui.registry.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image...',\n        onAction: Dialog(editor).open\n      });\n      editor.ui.registry.addContextMenu('image', {\n        update: function (element) {\n          return isFigure(element) || isImage(element) && !isPlaceholderImage(element) ? ['image'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global$6.add('image', function (editor) {\n        setup(editor);\n        register(editor);\n        register$1(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"noneditable\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/noneditable')\n//   ES2015:\n//     import 'tinymce/plugins/noneditable'\nrequire('./plugin.js');","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.3 (2022-02-09)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n\n    var open = function (editor) {\n      var editorContent = getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n\n    var register$1 = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        open(editor);\n      });\n    };\n\n    var register = function (editor) {\n      var onAction = function () {\n        return editor.execCommand('mceCodeEditor');\n      };\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: onAction\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: onAction\n      });\n    };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        register$1(editor);\n        register(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n","import tinymce from 'tinymce/tinymce';\nwindow.tinymce = tinymce;\nimport 'tinymce/themes/silver';\nimport 'tinymce/icons/default';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/paste';\nimport 'tinymce/plugins/media';\nimport 'tinymce/plugins/noneditable';\nimport {getInitConfig} from '../libs/tinymce_extensions';\n\nconst ENHANCED = window.ENABLE_MEDIA_UPLOAD;\n\nfunction initRichTextEditor(element, code=false) {\n  // Vue rebuilds the whole dom in between the call to init and tinymce actually doing the init\n  // so we use a selector here until we use vue to init tinymce\n  const selector=`${element.type}#${element.id}`;\n  let config = getInitConfig(selector, ENHANCED, code);\n\n  return tinymce.init(config);\n}\n\nfor (const textArea of document.querySelectorAll('.richtext-editor'))\n  initRichTextEditor(textArea);\n\nfor (const textArea of document.querySelectorAll('.richtext-editor-src'))\n  initRichTextEditor(textArea, true);\n\nglobal.initRichTextEditor = initRichTextEditor;\n","tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-style': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"6\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"3\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"6.8\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"10.6\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"14.4\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"18.2\" y=\"16\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"13\" y=\"11\" rx=\"1\"/></g></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"5\" x=\"3\" y=\"5\" rx=\"1\"/><rect width=\"18\" height=\"3.5\" x=\"3\" y=\"11.5\" rx=\"1\"/><rect width=\"18\" height=\"2\" x=\"3\" y=\"17\" rx=\"1\"/></g></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'cell-background-color': '<svg width=\"24\" height=\"24\"><path d=\"M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z\"/></svg>',\n    'cell-border-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z\" opacity=\".2\"/><path fill-rule=\"nonzero\" d=\"M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z\"/><path d=\"M13 11l-2 2H5v-2h6V6h2z\"/><path fill-rule=\"nonzero\" d=\"M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z\"/></g></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'language': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-caption': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"12\" height=\"2\" x=\"3\" y=\"4\" rx=\"1\"/><path d=\"M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></g></svg>',\n    'table-cell-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z\"/><path fill-rule=\"nonzero\" d=\"M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z\" opacity=\".2\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/><path fill-rule=\"nonzero\" d=\"M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z\" opacity=\".2\"/></g></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-numbering-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z\"/></svg>',\n    'table-row-numbering': '<svg width=\"24\" height=\"24\"><path d=\"M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'vertical-align': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><path d=\"M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z\"/></g></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});"],"sourceRoot":""}